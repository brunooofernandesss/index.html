<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>Módulo5: Simulado da parte de Flávia </title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      background-color: #f4f4f4;
    }

    .quiz-container {
      max-width: 800px;
      width: 100%;
    }

    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 30px;
    }

    .card {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .question {
      font-weight: bold;
      margin-bottom: 10px;
      color: #333;
    }

    .options {
      margin-top: 15px;
    }

    /* Estilos unificados para todas as opções (estáticas e dinâmicas) */
    .option, label.option, label, #newQuestionsContent label {
      display: flex; /* Para alinhar imagem e texto */
      align-items: center;
      margin-bottom: 10px;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      position: relative; /* Para posicionar a tesoura */
    }

    /* FORÇA a remoção de inputs de radio em QUALQUER lugar */
    .option input[type="radio"], 
    label input[type="radio"],
    #newQuestionsContent input[type="radio"],
    #newQuestionsContent label input[type="radio"] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        position: absolute !important;
        left: -9999px !important;
    }

    .option:hover, 
    label.option:hover, 
    label:hover,
    #newQuestionsContent label:hover {
      background-color: #e9e9e9;
    }

    .option.selected, 
    label.option.selected, 
    label.selected,
    #newQuestionsContent label.selected {
      background-color: #d1e7dd;
      border-color: #28a745;
    }

    .option.correct, 
    label.option.correct, 
    label.correct,
    #newQuestionsContent label.correct {
      background-color: #d4edda;
      border-color: #28a745;
    }

    .option.incorrect, 
    label.option.incorrect, 
    label.incorrect,
    #newQuestionsContent label.incorrect {
      background-color: #f8d7da;
      border-color: #dc3545;
    }

    .submit-btn {
      display: block;
      width: 100%;
      padding: 15px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 30px;
    }

    .submit-btn:hover {
      background-color: #0056b3;
    }

    .results {
      text-align: center;
      margin-top: 30px;
      font-size: 20px;
      font-weight: bold;
      color: #333;
    }

    .scissor-icon {
      margin-right: 10px; /* Espaço entre a tesoura e o texto da opção */
      width: 20px; /* Ajuste conforme o tamanho da sua imagem */
      height: 20px; /* Ajuste conforme o tamanho da sua imagem */
      opacity: 0.5; /* Transparência como no original */
      cursor: pointer;
    }

    .scissor-icon.hidden {
      display: none;
    }

    .struck-through {
      text-decoration: line-through;
      color: #888;
    }

    .comment {
      margin-top: 10px;
      padding: 10px;
      background-color: #f0f0f0;
      border-left: 4px solid #007bff;
      font-style: italic;
      color: #555;
      display: none; /* Escondido por padrão */
    }
    .comment.show {
      display: block; /* Mostrado quando ativado */
    }

    /* Estilos para o botão de navegação de erro / diagnóstico */
    .error-nav-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #dc3545; /* Vermelho para erro */
      color: white;
      border: none;
      border-radius: 50%; /* Torna o botão redondo */
      width: 60px;
      height: 60px;
      font-size: 24px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      display: none; /* Escondido por padrão */
      flex-direction: column; /* Para empilhar o ícone e o contador */
      padding: 5px; /* Ajuste o padding para acomodar texto maior */
      box-sizing: border-box; /* Garante que padding não aumente o tamanho total */
      text-align: center;
    }

    .error-nav-btn:hover {
      background-color: #c82333;
    }

    .error-nav-btn .arrow-icon {
      font-size: 30px; /* Tamanho da seta */
      line-height: 1; /* Ajuste para centralizar */
    }

    .error-nav-btn .button-text {
      font-size: 12px; /* Tamanho do texto abaixo da seta */
      line-height: 1;
      margin-top: 2px; /* Espaço entre a seta e o texto */
    }

    /* Estilos para a seção de diagnóstico de erros */
    .error-diagnosis-section {
        margin-top: 50px;
        padding: 30px;
        background-color: #ffe0b2; /* Um laranja claro ou similar */
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.15);
        display: none; /* Escondido por padrão */
        text-align: center;
        font-size: 1.1em;
        color: #333;
    }

    .error-diagnosis-section h2 {
        color: #e65100; /* Laranja mais escuro */
        margin-bottom: 20px;
        font-size: 1.8em;
    }

    .error-diagnosis-section ul {
        list-style: none; /* Remove marcadores de lista */
        padding: 0;
        margin: 0;
    }

    .error-diagnosis-section li {
        background-color: #ff9800; /* Laranja */
        color: white;
        padding: 8px 15px;
        margin: 8px 0;
        border-radius: 5px;
        display: inline-block; /* Para que os itens fiquem lado a lado */
        margin-right: 10px;
        font-weight: bold;
    }
    .error-diagnosis-section li:last-child {
        margin-right: 0;
    }
 .card-bloco {
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 10px;
      background: #fff;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <h1 style="text-align:center; margin-bottom: 30px;">Módulo5: Simulado da parte de Flávia </h1>
    <div class="card-bloco" id="quiz"></div>
    <button class="submit-btn" id="verifyAnswersBtn">Verificar Respostas</button>

    <button class="generate-questions-btn submit-btn" id="generateNewQuestionsBtn" style="display:none;">
      Gerar Novas Perguntas
    </button>

    <div class="results card-bloco" id="results"></div>
    <div id="statusMessage" style="text-align: center; margin-top: 10px; font-weight: bold; color: #007bff;"></div>

    <div class="error-diagnosis-section card-bloco" id="errorDiagnosis">
      <h2>Diagnóstico de Erros</h2>
      <p>Parece que você precisa revisar os seguintes assuntos:</p>
      <ul id="topicsToReview"></ul>
    </div>

    <div class="generated-questions-section card-bloco" id="generatedQuestionsSection" style="display:none;">
      <h2>Novas Perguntas Geradas</h2>
      <div id="newQuestionsContent"></div>
    </div>
  </div>
  
  <button class="error-nav-btn" id="errorNavBtn" style="display:none;">
    <span class="arrow-icon"></span>
    <span class="button-text"></span>
  </button>

  <script>
    const quizContainer = document.getElementById("quiz");
    const resultsContainer = document.getElementById("results");
    const errorNavBtn = document.getElementById("errorNavBtn");
    const arrowIcon = errorNavBtn.querySelector(".arrow-icon");
    const buttonText = errorNavBtn.querySelector(".button-text");
    const errorDiagnosisSection = document.getElementById("errorDiagnosis");
    const topicsToReviewList = document.getElementById("topicsToReview");
    const generateNewQuestionsBtn = document.getElementById("generateNewQuestionsBtn");
    const generatedQuestionsSection = document.getElementById("generatedQuestionsSection");
    const newQuestionsContent = document.getElementById("newQuestionsContent");
    const statusMessage = document.getElementById("statusMessage");

    let wrongQuestionIndices = [];
    let errorCountByTopic = {};
    let totalAnsweredQuestionsByTopic = {};
    let currentWrongQuestionIndex = -1;
    let hasErrors = false;
    let isShowingErrors = false;
    let isShowingDiagnosis = false;

    // Inicializa a visibilidade das seções no carregamento
    errorDiagnosisSection.style.display = 'none';
    topicsToReviewList.innerHTML = '';
    statusMessage.textContent = '';

    const questions = [       {         question: "1. O que o resumo define como a defesa de todo o organismo?",         options: [           "1. O Sistema Nervoso Central.",           "2. O Sistema Endócrino.",           "3. O Sistema Imune.",           "4. O Sistema Circulatório.",         ],         correctAnswer: "3. O Sistema Imune.",         comment: "O Sistema Imune é a defesa do organismo, conforme o ponto inicial da transcrição.",         topic: "Conceito e Órgãos do Sistema Imune",       },       {         question: "2. Qual dos órgãos listados no resumo é citado como um dos principais componentes do Sistema Imune?",         options: [           "1. Pâncreas.",           "2. Pulmões.",           "3. Linfonodos.",           "4. Fígado.",         ],         correctAnswer: "3. Linfonodos.",         comment: "Os órgãos citados são Timo, Linfonodos (células T), Baço, Medula Óssea e Placas de Peyer.",         topic: "Órgãos Linfoides",       },       {         question: "3. Qual das seguintes afirmações melhor descreve a característica principal da Imunidade Inata, segundo o resumo?",         options: [           "1. É lenta e altamente específica.",           "2. É a imunidade que 'nasce com a gente'.",           "3. Possui uma resposta que se altera a cada nova exposição.",           "4. Possui memória imunológica.",         ],         correctAnswer: "2. É a imunidade que 'nasce com a gente'.",         comment: "A Imunidade Inata é caracterizada por ser aquela que 'nasce com a gente', sendo rápida e não possuindo memória.",         topic: "Imunidade Inata: Conceito e Características",       },       {         question: "4. Em relação à velocidade e à memória, a Imunidade Inata é caracterizada por ser:",         options: [           "1. Lenta e possuir memória.",           "2. Lenta e não possuir memória.",           "3. Rápida e possuir memória.",           "4. Rápida e não possuir memória.",         ],         correctAnswer: "4. Rápida e não possuir memória.",         comment: "A imunidade inata é mais rápida, atua sempre da mesma forma e não possui memória.",         topic: "Imunidade Inata vs. Adquirida",       },       {         question: "5. O que é o Colostro, conforme a definição apresentada?",         options: [           "1. A primeira secreção salivar do bebê.",           "2. O primeiro alimento sólido introduzido na dieta.",           "3. A primeira descida do leite materno.",           "4. Um tipo de anticorpo produzido na fase aguda.",         ],         correctAnswer: "3. A primeira descida do leite materno.",         comment: "O Colostro é definido como a primeira descida do leite materno, sendo bem amarelo.",         topic: "Colostro e Imunidade Passiva",       },       {         question: "6. Qual é a importância fundamental do Colostro, segundo o resumo?",         options: [           "1. Possui alto teor de gordura.",           "2. É a substância que mais contém anticorpos.",           "3. É um importante desintoxicante hepático.",           "4. Ajuda a desenvolver o olfato do bebê.",         ],         correctAnswer: "2. É a substância que mais contém anticorpos.",         comment: "É citado que o Colostro é a substância que 'mais contém anticorpos', sendo considerada a primeira vacina do bebê.",         topic: "Anticorpos e Proteção Neonatal",       },       {         question: "7. O Colostro é metaforicamente considerado no resumo como:",         options: [           "1. Um suplemento vitamínico.",           "2. A primeira vacina do bebê.",           "3. Um laxante natural.",           "4. Uma barreira química.",         ],         correctAnswer: "2. A primeira vacina do bebê.",         comment: "O Colostro é considerado 'a primeira vacina do bebê' devido à sua alta concentração de anticorpos.",         topic: "Imunidade Materno-Fetal",       },       {         question: "8. Qual célula é citada como fazendo parte tanto da imunidade inata quanto da adquirida?",         options: [           "1. Neutrófilos.",           "2. Basófilos.",           "3. Linfócitos B.",           "4. Células Dendríticas.",         ],         correctAnswer: "4. Células Dendríticas.",         comment: "As Células Dendríticas são mencionadas por fazerem parte de ambas as imunidades, inata e adquirida, atuando como Células Apresentadoras de Antígeno (CPA).",         topic: "Células Dendríticas",       },       {         question: "9. Além de células, quais são outros componentes do sistema imune inato, conforme listado no resumo?",         options: [           "1. Plasmócitos e Anticorpos.",           "2. Barreiras Física e Química.",           "3. Linfócitos T CD4 e CD8.",           "4. MHC de Classe I e II.",         ],         correctAnswer: "2. Barreiras Física e Química.",         comment: "Os componentes da inata incluem células, Barreiras Física e Química, e Receptores de Reconhecimento de Padrão (PRRs).",         topic: "Componentes da Imunidade Inata",       },       {         question: "10. Qual é o nome dos receptores de reconhecimento do sistema inato, que reconhecem padrões?",         options: [           "1. MHC.",           "2. HLA.",           "3. PRRs.",           "4. IgMs.",         ],         correctAnswer: "3. PRRs.",         comment: "São os Receptores de Reconhecimento de Padrão (PRRs), que reconhecem PAMPs e DAMPs.",         topic: "Receptores de Reconhecimento de Padrão (PRRs)",       },       {         question: "11. O que significa a sigla PAMPs no contexto da Imunologia Inata?",         options: [           "1. Padrões Atípicos de Memória de Plasmócitos.",           "2. Proteínas Ativadoras de Micróbios Patogênicos.",           "3. Padrões Moleculares Associados a Patógenos.",           "4. Pontos Ativadores de Memória Primária.",         ],         correctAnswer: "3. Padrões Moleculares Associados a Patógenos.",         comment: "PAMPs são os Padrões Moleculares Associados a Patógenos, que permitem ao sistema inato reconhecer classes de microrganismos.",         topic: "PAMPs (Pathogen-Associated Molecular Patterns)",       },       {         question: "12. O que significa a sigla DAMPs no contexto da Imunologia Inata?",         options: [           "1. Danos Atípicos por Membrana Plasmática.",           "2. Padrões Moleculares Associados a Danos.",           "3. Disfunções Ativadoras de Microrganismos Patogênicos.",           "4. Diagnósticos Atípicos de Memória Padrão.",         ],         correctAnswer: "2. Padrões Moleculares Associados a Danos.",         comment: "DAMPs são os Padrões Moleculares Associados a Danos, presentes em células do próprio organismo que estão lesionadas ou atípicas.",         topic: "DAMPs (Danger-Associated Molecular Patterns)",       },       {         question: "13. O que os PAMPs permitem ao sistema imune inato, conforme o resumo?",         options: [           "1. Diferenciar um Linfócito B de um T.",           "2. Ativar a produção de anticorpos da classe IgG.",           "3. Reconhecer classes de patógenos (padrões gerais).",           "4. Atravessar a barreira placentária.",         ],         correctAnswer: "3. Reconhecer classes de patógenos (padrões gerais).",         comment: "PAMPs são exemplos de padrões que permitem ao sistema inato reconhecer classes de patógenos.",         topic: "Função dos PAMPs e PRRs",       },       {         question: "14. Em qual das células do próprio organismo os DAMPs estão presentes, conforme a descrição?",         options: [           "1. Células saudáveis e em plena função.",           "2. Células sanguíneas maduras (Hemácias).",           "3. Células que estão 'dando ruim', como as tumorais (atípicas).",           "4. Células exclusivamente do tecido nervoso.",         ],         correctAnswer: "3. Células que estão 'dando ruim', como as tumorais (atípicas).",         comment: "DAMPs são os padrões de células do próprio organismo que estão 'dando ruim', seja por invasão ou por se tornarem atípicas (tumorais).",         topic: "Reconhecimento de Células Danificadas (DAMPs)",       },       {         question: "15. Qual complexo molecular é responsável por apresentar um fragmento específico (epítopo) do patógeno para chamar as células do sistema adquirido (Linfócitos T CD4 e CD8)?",         options: [           "1. PRRs.",           "2. PAMPs.",           "3. MHC.",           "4. IgA.",         ],         correctAnswer: "3. MHC.",         comment: "O MHC (Complexo Principal de Histocompatibilidade) é quem apresenta o fragmento específico (epítopo) para ativar as células do sistema adquirido.",         topic: "Complexo Principal de Histocompatibilidade (MHC)",       },       {         question: "16. O que o MHC apresenta para ativar as células do sistema adquirido?",         options: [           "1. Um padrão geral (PAMP).",           "2. Um anticorpo da classe IgE.",           "3. Um fragmento específico (epítopo).",           "4. Uma citocina pró-inflamatória.",         ],         correctAnswer: "3. Um fragmento específico (epítopo).",         comment: "O MHC apresenta um fragmento específico, chamado epítopo, para Linfócitos T CD4 e CD8.",         topic: "Apresentação de Antígenos e Epítopos",       },       {         question: "17. Qual das características abaixo se aplica à Imunidade Inata?",         options: [           "1. É específica.",           "2. Sofre alterações.",           "3. Atua sempre da mesma forma.",           "4. É muito mais lenta que a adquirida.",         ],         correctAnswer: "3. Atua sempre da mesma forma.",         comment: "A Imunidade Inata é caracterizada por ser mais rápida e atuar sempre da mesma forma.",         topic: "Resposta Imune Inata",       },       {         question: "18. Quais são os tipos de Linfócitos T que são chamados após a apresentação do epítopo via MHC?",         options: [           "1. T B e T M.",           "2. T CD4 e T CD8.",           "3. T Alfa e T Beta.",           "4. T Gama e T Delta.",         ],         correctAnswer: "2. T CD4 e T CD8.",         comment: "A apresentação do epítopo via MHC chama os Linfócitos T CD4 (auxiliares) e T CD8 (citotóxicos).",         topic: "Linfócitos T e Imunidade Adquirida",       },       {         question: "19. A presença de DAMPs em células tumorais é um exemplo de:",         options: [           "1. Invasão por microrganismos.",           "2. Reconhecimento de padrões em células do próprio organismo que estão atípicas.",           "3. Ativação da resposta de memória.",           "4. Produção de grandes quantidades de anticorpos.",         ],         correctAnswer: "2. Reconhecimento de padrões em células do próprio organismo que estão atípicas.",         comment: "DAMPs são padrões associados a danos, sendo citados no resumo como os padrões de células que estão 'dando ruim' ou atípicas (tumorais).",         topic: "Imunidade e Células Atípicas (Tumorais)",       },       {         question: "20. Qual tipo de célula de defesa é citada na lista de Leucócitos (do sistema inato)?",         options: [           "1. Plasmócitos.",           "2. Eritrócitos.",           "3. Neutrófilos.",           "4. Trombócitos.",         ],         correctAnswer: "3. Neutrófilos.",         comment: "Os Leucócitos citados incluem neutrófilos, eosinófilos, basófilos e monócitos.",         topic: "Classificação dos Leucócitos Inatos",       },       {         question: "21. Onde se localizam as Células T, conforme a descrição da lista de órgãos do sistema imune?",         options: [           "1. Medula Óssea.",           "2. Baço.",           "3. Placas de Peyer.",           "4. Linfonodos.",         ],         correctAnswer: "4. Linfonodos.",         comment: "Os Linfonodos são citados com a função de abrigar as células T.",         topic: "Linfócitos T: Localização",       },       {         question: "22. Qual parte da Imunidade Inata é exemplificada pela cor 'bem amarela' do Colostro?",         options: [           "1. Células Dendríticas.",           "2. Barreiras Física e Química.",           "3. Células de defesa (Linfócitos).",           "4. O Colostro em si, que contém anticorpos.",         ],         correctAnswer: "4. O Colostro em si, que contém anticorpos.",         comment: "A cor amarela é uma característica do Colostro, que é a substância rica em anticorpos, parte da defesa inata (IgG que atravessa a placenta).",         topic: "Colostro: Componentes",       },       {         question: "23. Se o MHC apresenta um fragmento específico (epítopo), o que o sistema inato (via PRRs) reconhece, em contraste?",         options: [           "1. Somente o material genético.",           "2. Somente o envelope lipídico.",           "3. Padrões gerais (PAMPs).",           "4. Exclusivamente anticorpos da classe IgG.",         ],         correctAnswer: "3. Padrões gerais (PAMPs).",         comment: "Enquanto o MHC apresenta um fragmento específico, o sistema inato reconhece padrões gerais (PAMPs).",         topic: "Diferença no Reconhecimento: MHC vs. PRRs",       },       {         question: "24. O conceito de Imunidade Inata é dado como a imunidade que:",         options: [           "1. Adquire-se após a vacinação.",           "2. É transmitida por transfusão de sangue.",           "3. Nasce com a gente.",           "4. Desenvolve-se somente após os 5 anos de idade.",         ],         correctAnswer: "3. Nasce com a gente.",         comment: "A Imunidade Inata é caracterizada por ser aquela que 'nasce com a gente'.",         topic: "Definição de Imunidade Inata",       },       {         question: "25. Qual dos seguintes tipos de células é um Leucócito citado como componente da Imunidade Inata?",         options: [           "1. Plasmócitos.",           "2. Monócitos.",           "3. Megacariócitos.",           "4. Condrócitos.",         ],         correctAnswer: "2. Monócitos.",         comment: "Os Leucócitos citados incluem neutrófilos, eosinófilos, basófilos e monócitos.",         topic: "Tipos de Leucócitos Inatos",       },       {         question: "26. O que é descartado por 'crenças antigas', mas que contém a maior concentração de anticorpos?",         options: [           "1. Placas de Peyer.",           "2. O Colostro.",           "3. O Linfonodo.",           "4. O Baço.",         ],         correctAnswer: "2. O Colostro.",         comment: "O Colostro era descartado, mas é rico em anticorpos.",         topic: "História do Colostro",       },       {         question: "27. Além do Timo e dos Linfonodos, qual outro órgão é citado como parte do Sistema Imune?",         options: [           "1. Estômago.",           "2. Baço.",           "3. Glândula Tireoide.",           "4. Rins.",         ],         correctAnswer: "2. Baço.",         comment: "O Baço está na lista dos principais órgãos do sistema imune (Timo, Linfonodos, Baço, Medula Óssea, Placas de Peyer).",         topic: "Órgãos do Sistema Imune",       },       {         question: "28. O sistema imune inato atua sempre da mesma forma. O que o MHC, em contraste, faz?",         options: [           "1. Atua sempre da mesma forma, como o inato.",           "2. Apresenta o antígeno de forma genérica.",           "3. Apresenta um fragmento específico (epítopo) para as células adquiridas.",           "4. Destrói o patógeno antes da fagocitose.",         ],         correctAnswer: "3. Apresenta um fragmento específico (epítopo) para as células adquiridas.",         comment: "O MHC apresenta um epítopo específico, chamando as células do sistema adquirido (Linfócitos T CD4 e CD8).",         topic: "Função do MHC",       },       {         question: "29. As células do sistema imune inato, como os Macrófagos, utilizam quais padrões para reconhecer corpos estranhos?",         options: [           "1. Somente anticorpos.",           "2. PAMPs e DAMPs.",           "3. Linfócitos T CD4 e CD8.",           "4. MHC de Classe I.",         ],         correctAnswer: "2. PAMPs e DAMPs.",         comment: "O sistema inato reconhece padrões gerais (PAMPs) e padrões de dano (DAMPs) para iniciar a defesa.",         topic: "Reconhecimento de Microrganismos pelo Sistema Inato",       },       {         question: "30. Qual das seguintes células é uma das células de defesa listadas no sistema inato (Leucócitos)?",         options: [           "1. Basófilos.",           "2. Linfócitos B.",           "3. Plasmócitos.",           "4. Células T CD8.",         ],         correctAnswer: "1. Basófilos.",         comment: "Os Basófilos estão na lista de Leucócitos (neutrófilos, eosinófilos, basófilos, monócitos) do sistema inato.",         topic: "Leucócitos Granulócitos",       },       {         question: "31. Qual é a principal ação da Imunidade Humoral?",         options: [           "1. Ativação do Ciclo Lítico.",           "2. Produção e ação dos Anticorpos.",           "3. Destruição de células infectadas por T CD8.",           "4. Fagocitose por macrófagos.",         ],         correctAnswer: "2. Produção e ação dos Anticorpos.",         comment: "A Imunidade Humoral é a ação dos Anticorpos, e faz parte da Imunidade Adquirida.",         topic: "Imunidade Humoral",       },       {         question: "32. Qual sistema é introduzido como um auxiliar da resposta do sistema imune?",         options: [           "1. Sistema Endócrino.",           "2. Sistema Complemento.",           "3. Sistema Retículo-Endotelial.",           "4. Sistema Linfoide.",         ],         correctAnswer: "2. Sistema Complemento.",         comment: "O Sistema Complemento é introduzido como um sistema que auxilia a resposta do sistema imune.",         topic: "Sistema Complemento: Função Geral",       },       {         question: "33. Qual via de ativação do Sistema Complemento faz parte primariamente do sistema imune inato, sendo ativada diretamente pela presença do microrganismo?",         options: [           "1. Via Clássica.",           "2. Via das Lectinas.",           "3. Via Alternativa.",           "4. Via do MHC.",         ],         correctAnswer: "3. Via Alternativa.",         comment: "A via Alternativa é a que faz parte primariamente do sistema imune inato, sendo ativada diretamente pelo microrganismo.",         topic: "Via Alternativa do Complemento",       },       {         question: "34. Quais são as vias do Sistema Complemento que são ativadas por Anticorpos e, portanto, fazem parte da imunidade adquirida?",         options: [           "1. Via Alternativa.",           "2. Via Clássica e das Lectinas.",           "3. Via da Fagocitose.",           "4. Via do Epítopo.",         ],         correctAnswer: "2. Via Clássica e das Lectinas.",         comment: "As vias Clássica e das Lectinas são ativadas por Anticorpos e fazem parte da imunidade adquirida.",         topic: "Vias do Complemento e Imunidade Adquirida",       },       {         question: "35. No mecanismo de cascata do complemento, qual molécula é ativada para formar a C3 convertase?",         options: [           "1. C5.",           "2. C9.",           "3. C3.",           "4. C1.",         ],         correctAnswer: "3. C3.",         comment: "O mecanismo de cascata envolve a ativação da C3 em C3a e C3b, formando a C3 convertase.",         topic: "Cascata do Complemento",       },       {         question: "36. O que é a Inflamação, segundo a descrição da aula?",         options: [           "1. Uma resposta exclusivamente do sistema imune adquirido.",           "2. A produção de anticorpos da classe IgE.",           "3. Uma resposta do sistema imune inato.",           "4. Uma reação viral de Ciclo Lisogênico.",         ],         correctAnswer: "3. Uma resposta do sistema imune inato.",         comment: "A Inflamação é descrita como uma resposta do sistema imune inato.",         topic: "Inflamação: Conceito e Classificação",       },       {         question: "37. Qual célula é citada como o principal tipo celular que chega para resolver o problema na Inflamação e forma o pus?",         options: [           "1. Linfócitos T CD4.",           "2. Plasmócitos.",           "3. Neutrófilos.",           "4. Macrófagos.",         ],         correctAnswer: "3. Neutrófilos.",         comment: "Os Neutrófilos são citados como os soldadinhos que chegam e formam, em grande parte, o pus.",         topic: "Papel dos Neutrófilos na Inflamação",       },       {         question: "38. Qual processo inflamatório é mediado por Citocinas e permite a passagem das células de defesa para o tecido lesionado?",         options: [           "1. Vasoconstrição.",           "2. Vasodilatação.",           "3. Hemostasia.",           "4. Degranulação.",         ],         correctAnswer: "2. Vasodilatação.",         comment: "A resposta inflamatória envolve a vasodilatação mediada por Citocinas, aumentando o fluxo sanguíneo e a permeabilidade vascular.",         topic: "Vasodilatação e Citocinas",       },       {         question: "39. Qual é o nome da passagem das células de defesa para o tecido lesionado?",         options: [           "1. Opsonização.",           "2. Diapedese.",           "3. Quimiotaxia.",           "4. Pinocitose.",         ],         correctAnswer: "2. Diapedese.",         comment: "A vasodilatação permite a passagem das células de defesa para o tecido lesionado, processo chamado diapedese.",         topic: "Diapedese e Migração Celular",       },       {         question: "40. Qual dos seguintes itens NÃO é citado como um sinal cardinal da Inflamação no resumo?",         options: [           "1. Calor.",           "2. Edema.",           "3. Febre.",           "4. Dor.",         ],         correctAnswer: "3. Febre.",         comment: "Os sinais cardinais citados são calor, edema, perda de função e dor.",         topic: "Sinais Cardinais da Inflamação",       },       {         question: "41. O que é a Fagocitose?",         options: [           "1. A produção de anticorpos por Plasmócitos.",           "2. A capacidade das células fagocitárias de englobar o corpo estranho.",           "3. A diferenciação de Linfócitos B em Plasmócitos.",           "4. O reconhecimento de DAMPs.",         ],         correctAnswer: "2. A capacidade das células fagocitárias de englobar o corpo estranho.",         comment: "Fagocitose é a capacidade das células fagocitárias de reconhecer e englobar o corpo estranho.",         topic: "Fagocitose",       },       {         question: "42. Dentro do Fagossomo, o que é liberado para desintegrar o microrganismo?",         options: [           "1. Citocinas.",           "2. Enzimas (Lisossomos).",           "3. Epítopos.",           "4. MHC.",         ],         correctAnswer: "2. Enzimas (Lisossomos).",         comment: "Enzimas (lisossomos) desintegram o microrganismo dentro do fagossomo, que se torna um fagolisossomo.",         topic: "Mecanismo Intracelular da Fagocitose",       },       {         question: "43. Após a Fagocitose e desintegração, o que é apresentado pelo MHC para ativar o sistema adquirido?",         options: [           "1. O PAMP completo.",           "2. O epítopo (pedaço específico) do patógeno.",           "3. Uma célula Natural Killer.",           "4. O anticorpo IgM.",         ],         correctAnswer: "2. O epítopo (pedaço específico) do patógeno.",         comment: "O MHC apresenta o epítopo (pedaço específico) para ativar o sistema adquirido (Linfócitos T).",         topic: "Apresentação de Antígenos após Fagocitose",       },       {         question: "44. A Imunidade Adquirida (ou Adaptativa) é caracterizada, entre outros fatores, por ser:",         options: [           "1. Rápida e inespecífica.",           "2. Lenta e específica.",           "3. Agir sempre da mesma forma.",           "4. Nunca guardar memória.",         ],         correctAnswer: "2. Lenta e específica.",         comment: "A Imunidade Adquirida é caracterizada por ser lenta, específica, sofrer alterações e ter memória.",         topic: "Imunidade Adquirida: Características",       },       {         question: "45. Qual das seguintes células é um componente da Imunidade Adquirida?",         options: [           "1. Neutrófilos.",           "2. Monócitos.",           "3. Linfócitos B.",           "4. Basófilos.",         ],         correctAnswer: "3. Linfócitos B.",         comment: "Os componentes da imunidade adquirida incluem Anticorpos, Linfócitos B, Linfócitos T CD4 e Linfócitos T CD8.",         topic: "Componentes da Imunidade Adquirida",       },       {         question: "46. Em que células os Linfócitos B se diferenciam para produzir anticorpos?",         options: [           "1. Células NK.",           "2. Células Dendríticas.",           "3. Fagócitos.",           "4. Plasmócitos.",         ],         correctAnswer: "4. Plasmócitos.",         comment: "Os Linfócitos B se diferenciam em Plasmócitos para produzir anticorpos.",         topic: "Diferenciação de Linfócitos B",       },       {         question: "47. Além de produzir Plasmócitos, qual outra ação os Linfócitos B realizam no sistema adquirido?",         options: [           "1. Ativam o Ciclo Lítico.",           "2. Destroem células infectadas diretamente.",           "3. Deixam células de memória.",           "4. Apresentam antígenos via MHC I.",         ],         correctAnswer: "3. Deixam células de memória.",         comment: "Os Linfócitos B se diferenciam em Plasmócitos e também deixam células de memória, essenciais para a resposta secundária.",         topic: "Memória Imunológica e Linfócitos B",       },       {         question: "48. O Reconhecimento de Antígenos é feito pelas células que, após fagocitar, ativam outras células de defesa. Qual o nome dessas células?",         options: [           "1. Células B de Memória.",           "2. Células Apresentadoras de Antígeno (CPA).",           "3. Células NK.",           "4. Eosinófilos.",         ],         correctAnswer: "2. Células Apresentadoras de Antígeno (CPA).",         comment: "O Reconhecimento de Antígenos é feito pelas Células Apresentadoras de Antígeno (CPA), como as células dendríticas e macrófagos.",         topic: "Células Apresentadoras de Antígeno (CPA)",       },       {         question: "49. Após a apresentação do epítopo, o que as CPAs liberam para ativar outras células de defesa?",         options: [           "1. DAMPs.",           "2. PAMPs.",           "3. Citocinas.",           "4. Flagelos.",         ],         correctAnswer: "3. Citocinas.",         comment: "As CPAs ativam outras células (Linfócitos B ou T CD8) através de citocinas, que são mensageiros químicos.",         topic: "Citocinas na Ativação Imune",       },       {         question: "50. Qual o nome das enzimas e citocinas que aumentam o estímulo para chamar as células necessárias?",         options: [           "1. Linfócitos B.",           "2. Coestimuladores.",           "3. Fagossomos.",           "4. MHC de Classe II.",         ],         correctAnswer: "2. Coestimuladores.",         comment: "Coestimuladores são enzimas e citocinas que aumentam o estímulo para chamar as células necessárias, garantindo uma resposta eficaz.",         topic: "Coestimulação",       },       {         question: "51. O que é a Imunidade Humoral?",         options: [           "1. A imunidade baseada na destruição direta de células.",           "2. A imunidade baseada na utilização de anticorpos.",           "3. A imunidade que só usa Neutrófilos.",           "4. A imunidade de barreiras físicas.",         ],         correctAnswer: "2. A imunidade baseada na utilização de anticorpos.",         comment: "A Imunidade Humoral é a imunidade baseada na utilização de anticorpos, produzidos por Plasmócitos (Linfócitos B diferenciados).",         topic: "Imunidade Humoral e Anticorpos",       },       {         question: "52. Quais são as enzimas que desintegram o microrganismo dentro do fagossomo?",         options: [           "1. Lipases.",           "2. Proteases.",           "3. Lisossomos.",           "4. Amilases.",         ],         correctAnswer: "3. Lisossomos.",         comment: "Enzimas (lisossomos) desintegram o microrganismo dentro do fagossomo.",         topic: "Enzimas Lisossomais",       },       {         question: "53. Qual célula é ativada pelo MHC após a apresentação do epítopo?",         options: [           "1. Neutrófilo.",           "2. Linfócito B.",           "3. Macrófago.",           "4. Célula NK.",         ],         correctAnswer: "2. Linfócito B.",         comment: "A CPA ativa o Linfócito B ou T CD8 após a apresentação do epítopo via MHC, dependendo da classe.",         topic: "Ativação de Linfócitos por CPA",       },       {         question: "54. Qual das características abaixo NÃO pertence à Imunidade Adquirida?",         options: [           "1. Lenta.",           "2. Específica.",           "3. Ter memória.",           "4. Atua sempre da mesma forma.",         ],         correctAnswer: "4. Atua sempre da mesma forma.",         comment: "Atuar sempre da mesma forma é uma característica da Imunidade Inata. A adquirida sofre alterações e é específica.",         topic: "Diferenças entre Imunidade Adquirida e Inata",       },       {         question: "55. Qual é a proteína do complemento que, ao ser ativada em C3a e C3b, forma a C3 convertase?",         options: [           "1. C1.",           "2. C3.",           "3. C5.",           "4. C7.",         ],         correctAnswer: "2. C3.",         comment: "A ativação da C3 em C3a e C3b forma a C3 convertase, um passo crucial na cascata do complemento.",         topic: "Proteína C3 do Complemento",       },       {         question: "56. Qual mediador é responsável pela vasodilatação na resposta inflamatória?",         options: [           "1. MHC.",           "2. Citocinas.",           "3. PAMPs.",           "4. Epítopos.",         ],         correctAnswer: "2. Citocinas.",         comment: "A resposta inflamatória envolve a vasodilatação mediada por Citocinas.",         topic: "Mediadores da Inflamação",       },       {         question: "57. As vias Clássica e das Lectinas do sistema complemento são ativadas por:",         options: [           "1. PAMPs.",           "2. Anticorpos.",           "3. Diapedese.",           "4. C5 convertase.",         ],         correctAnswer: "2. Anticorpos.",         comment: "As vias Clássica e das Lectinas são ativadas por Anticorpos, associando-as à Imunidade Adquirida.",         topic: "Ativação do Complemento por Anticorpos",       },       {         question: "58. A Inflamação é classificada como uma resposta do sistema imune:",         options: [           "1. Adquirido, humoral.",           "2. Adquirido, celular.",           "3. Inato.",           "4. Transitório.",         ],         correctAnswer: "3. Inato.",         comment: "A Inflamação é descrita como uma resposta do sistema imune inato.",         topic: "Inflamação: Resposta Inata",       },       {         question: "59. Na Fagocitose, qual estrutura é formada após a célula fagocitária englobar o corpo estranho?",         options: [           "1. Plasmócito.",           "2. Lisossomo.",           "3. Fagossomo.",           "4. MHC.",         ],         correctAnswer: "3. Fagossomo.",         comment: "O englobamento do corpo estranho forma um fagossomo, que se fundirá com o lisossomo.",         topic: "Estruturas na Fagocitose",       },       {         question: "60. Os Linfócitos B deixam células de memória e se diferenciam em:",         options: [           "1. Monócitos.",           "2. Neutrófilos.",           "3. Plasmócitos.",           "4. Células NK.",         ],         correctAnswer: "3. Plasmócitos.",         comment: "Os Linfócitos B se diferenciam em Plasmócitos para produzir anticorpos e deixam células de memória.",         topic: "Plasmócitos e Produção de Anticorpos",       },       {         question: "61. A integração entre a Imunidade Inata e Adquirida é classificada como:",         options: [           "1. Sequencial e unidirecional.",           "2. Constante e bidirecional.",           "3. Alternativa e independente.",           "4. Lenta e inconstante.",         ],         correctAnswer: "2. Constante e bidirecional.",         comment: "A integração entre as imunidades é constante e bidirecional, agindo em conjunto e se chamando mutuamente.",         topic: "Interação Imunidade Inata e Adquirida",       },       {         question: "62. Quais células e moléculas são citadas como cruciais na integração entre os sistemas inato e adquirido?",         options: [           "1. Neutrófilos e IgA.",           "2. Linfócitos B e DAMPs.",           "3. Células Dendríticas e as Citocinas.",           "4. Macrófagos e MHC I.",         ],         correctAnswer: "3. Células Dendríticas e as Citocinas.",         comment: "Células Dendríticas e Citocinas são cruciais nessa integração, pois o inato chama o adquirido e vice-versa.",         topic: "Células e Moléculas de Integração Imune",       },       {         question: "63. Qual é o principal objetivo da Vacina?",         options: [           "1. Ativar o Ciclo Lítico.",           "2. Induzir a produção de memória imunológica.",           "3. Expor o sistema imune a bactérias mortas.",           "4. Ativar exclusivamente o sistema imune inato.",         ],         correctAnswer: "2. Induzir a produção de memória imunológica.",         comment: "A vacina tem como objetivo preparar o sistema imune adaptativo (adquirido) induzindo memória.",         topic: "Mecanismo de Ação da Vacina",       },       {         question: "64. Como o Linfócito B produz memória, conforme citado na transcrição?",         options: [           "1. Através da inibição do MHC I.",           "2. Através da exposição a partes do microrganismo (atenuado, morto ou material genético).",           "3. Através da Diapedese.",           "4. Através da Via Alternativa do Complemento.",         ],         correctAnswer: "2. Através da exposição a partes do microrganismo (atenuado, morto ou material genético).",         comment: "A vacina induz o sistema a produzir memória através da exposição a partes do microrganismo.",         topic: "Tipos de Vacinas e Resposta Imune",       },       {         question: "65. O que é um Epítopo?",         options: [           "1. A totalidade do antígeno.",           "2. O pedaço específico do antígeno apresentado após a fagocitose.",           "3. Um tipo de Célula Apresentadora de Antígeno.",           "4. A enzima liberada pelo lisossomo.",         ],         correctAnswer: "2. O pedaço específico do antígeno apresentado após a fagocitose.",         comment: "Um epítopo é o pedaço específico do antígeno apresentado após a fagocitose para ativar o sistema imune.",         topic: "Definição de Epítopo",       },       {         question: "66. Qual o anticorpo (Imunoglobulina) responsável pela proteção de mucosas?",         options: [           "1. IgM.",           "2. IgG.",           "3. IgA.",           "4. IgE.",         ],         correctAnswer: "3. IgA.",         comment: "IgA é a Imunoglobulina responsável pela proteção de mucosas (ex: trato gastrointestinal e respiratório).",         topic: "Funções da IgA",       },       {         question: "67. Qual Imunoglobulina está relacionada a parasitas e reações alérgicas?",         options: [           "1. IgD.",           "2. IgE.",           "3. IgM.",           "4. IgA.",         ],         correctAnswer: "2. IgE.",         comment: "IgE está relacionada a parasitas (helmintos) e reações alérgicas (hipersensibilidade tipo I).",         topic: "Funções da IgE",       },       {         question: "68. Qual Imunoglobulina é relacionada à cronicidade da doença (memória) e é a única que atravessa a placenta?",         options: [           "1. IgM.",           "2. IgD.",           "3. IgE.",           "4. IgG.",         ],         correctAnswer: "4. IgG.",         comment: "IgG é relacionada à cronicidade (memória) e é a única que atravessa a placenta, conferindo imunidade passiva ao feto.",         topic: "Funções da IgG",       },       {         question: "69. Qual é o primeiro anticorpo produzido pelo Linfócito B, atuando na fase aguda da doença?",         options: [           "1. IgA.",           "2. IgD.",           "3. IgM.",           "4. IgG.",         ],         correctAnswer: "3. IgM.",         comment: "IgM atua na fase aguda da doença, sendo o primeiro anticorpo produzido pelo Linfócito B (é um pentâmero).",         topic: "Funções da IgM",       },       {         question: "70. Qual Imunoglobulina é citada como responsável por auxiliar os Linfócitos B maduros?",         options: [           "1. IgE.",           "2. IgG.",           "3. IgD.",           "4. IgA.",         ],         correctAnswer: "3. IgD.",         comment: "IgD auxilia Linfócitos B maduros, sendo encontrada principalmente na superfície dessas células.",         topic: "Funções da IgD",       },       {         question: "71. O que é o processo de 'Troca de Classes (Class Switch)'?",         options: [           "1. A mudança de função de um Macrófago para Neutrófilo.",           "2. A capacidade do Linfócito B de alterar a classe de anticorpo que produz.",           "3. A troca de receptores do sistema inato (PRRs para MHC).",           "4. A alteração de um DAMP em um PAMP.",         ],         correctAnswer: "2. A capacidade do Linfócito B de alterar a classe de anticorpo que produz.",         comment: "A Troca de Classes é a autonomia do Linfócito B de alterar a classe de anticorpo (ex: de IgM para IgG, IgE ou IgA) conforme o estímulo das Citocinas.",         topic: "Troca de Classe de Imunoglobulina (Class Switch)",       },       {         question: "72. Qual é a nomenclatura do Complexo Principal de Histocompatibilidade (MHC) no ser humano?",         options: [           "1. PAMP.",           "2. HLA.",           "3. PRR.",           "4. CPA.",         ],         correctAnswer: "2. HLA.",         comment: "O MHC no ser humano é chamado de HLA (Antígenos Leucocitários Humanos).",         topic: "Nomenclatura do MHC (HLA)",       },       {         question: "73. Qual é a principal importância do HLA, segundo o resumo?",         options: [           "1. Produção de anticorpos.",           "2. Compatibilidade de transplantes.",           "3. Fagocitose.",           "4. Formação de pus.",         ],         correctAnswer: "2. Compatibilidade de transplantes.",         comment: "A principal importância do HLA, que é a 'digital' genética, é na compatibilidade de transplantes.",         topic: "HLA e Transplantes",       },       {         question: "74. Onde o MHC de Classe I (HLA de Classe I) é encontrado?",         options: [           "1. Somente em Células Apresentadoras de Antígeno (CPA).",           "2. Somente no Baço e Timo.",           "3. Em todas as células nucleadas.",           "4. Exclusivamente em Linfócitos B.",         ],         correctAnswer: "3. Em todas as células nucleadas.",         comment: "O MHC de Classe I é encontrado em todas as células nucleadas e apresenta antígenos intracelulares.",         topic: "Localização do MHC I",       },       {         question: "75. A quem o MHC de Classe I apresenta antígenos intracelulares para ativar a resposta de morte celular?",         options: [           "1. Linfócitos T CD4 (auxiliares).",           "2. Linfócitos T CD8 (citotóxicos).",           "3. Linfócitos B (Plasmócitos).",           "4. Células Natural Killer (NK).",         ],         correctAnswer: "2. Linfócitos T CD8 (citotóxicos).",         comment: "O MHC I apresenta antígenos intracelulares aos Linfócitos T CD8, que destroem a célula infectada ou atípica.",         topic: "Interação MHC I e Linfócitos T CD8",       },       {         question: "76. Qual é a função do Linfócito T CD8?",         options: [           "1. Produzir anticorpos.",           "2. Auxiliar Macrófagos.",           "3. Ativar a resposta de morte celular (citotóxica).",           "4. Atravessar a placenta.",         ],         correctAnswer: "3. Ativar a resposta de morte celular (citotóxica).",         comment: "Os Linfócitos T CD8 são citotóxicos, ativando a resposta de morte celular.",         topic: "Função do Linfócito T CD8",       },       {         question: "77. Onde o MHC de Classe II (HLA de Classe II) está presente?",         options: [           "1. Em todas as células nucleadas.",           "2. Somente em Linfócitos T CD4.",           "3. Nas Células Apresentadoras de Antígeno (CPA).",           "4. Nas mucosas.",         ],         correctAnswer: "3. Nas Células Apresentadoras de Antígeno (CPA).",         comment: "O MHC de Classe II está presente nas Células Apresentadoras de Antígeno (CPA).",         topic: "Localização do MHC II",       },       {         question: "78. Qual é o Linfócito T que é ativado pelo MHC de Classe II e é responsável por ativar outras células de defesa, guardar memória e diferenciar Plasmócitos?",         options: [           "1. Linfócito T CD8 (citotóxico).",           "2. Linfócito T CD4 (auxiliar).",           "3. Linfócito T B.",           "4. Linfócito T NK.",         ],         correctAnswer: "2. Linfócito T CD4 (auxiliar).",         comment: "O MHC II apresenta antígenos aos Linfócitos T CD4 (auxiliares), que coordenam a resposta imune adquirida.",         topic: "Interação MHC II e Linfócitos T CD4",       },       {         question: "79. Qual é a classe de anticorpo que é o primeiro a ser produzido em uma infecção, antes da Troca de Classes?",         options: [           "1. IgA.",           "2. IgG.",           "3. IgE.",           "4. IgM.",         ],         correctAnswer: "4. IgM.",         comment: "O Linfócito B parte do IgM (o primeiro) para as outras classes. IgM indica infecção aguda.",         topic: "Cinética de Anticorpos",       },       {         question: "80. No combate a Vírus, quando o vírus entra na célula, a célula infectada libera que tipo de sinal para chamar células NK e fagocitárias?",         options: [           "1. DAMPs.",           "2. Citocinas (Interferons).",           "3. PAMPs.",           "4. IgMs.",         ],         correctAnswer: "2. Citocinas (Interferons).",         comment: "A célula infectada libera Interferons (sinais) para chamar células fagocitárias e células Natural Killer (NK).",         topic: "Interferons e Defesa Antiviral",       },       {         question: "81. Qual é a célula do sistema inato que é ativada para matar a célula infectada por vírus?",         options: [           "1. Linfócito B.",           "2. Célula Natural Killer (NK).",           "3. Monócito.",           "4. Plasmócito.",         ],         correctAnswer: "2. Célula Natural Killer (NK).",         comment: "As Células Natural Killer (NK) são chamadas para matar a célula infectada por vírus, sendo parte da imunidade inata.",         topic: "Células Natural Killer (NK)",       },       {         question: "82. No combate a Bactérias Extracelulares, qual é a ação do sistema adquirido?",         options: [           "1. Produzir MHC I.",           "2. Chamar anticorpos e Linfócitos T CD4 para opsonizar (marcar para fagocitose).",           "3. Induzir Autofagia.",           "4. Liberar Interferons.",         ],         correctAnswer: "2. Chamar anticorpos e Linfócitos T CD4 para opsonizar (marcar para fagocitose).",         comment: "O adquirido chama anticorpos e Linfócitos T CD4 para opsonizar (marcar para fagocitose), facilitando a eliminação pelo inato.",         topic: "Mecanismo de Combate: Bactérias Extracelulares",       },       {         question: "83. No combate a Bactérias Intracelulares, qual é o processo que a célula infectada pode induzir para morrer?",         options: [           "1. Opsonização.",           "2. Diapedese.",           "3. Autofagia (morte celular).",           "4. Troca de Classes.",         ],         correctAnswer: "3. Autofagia (morte celular).",         comment: "No inato contra bactérias intracelulares, a célula infectada pode induzir Autofagia (morte celular).",         topic: "Morte Celular Programada (Autofagia)",       },       {         question: "84. Qual a função da IgG em relação ao recém-nascido?",         options: [           "1. Iniciar a produção de IgM.",           "2. Fornecer a primeira proteção ao recém-nascido.",           "3. Ativar a Via Alternativa do Complemento.",           "4. Promover a vasodilatação.",         ],         correctAnswer: "2. Fornecer a primeira proteção ao recém-nascido.",         comment: "O IgG é o único anticorpo que atravessa a placenta, fornecendo a primeira proteção ao recém-nascido (imunidade passiva).",         topic: "IgG e Imunidade Passiva",       },       {         question: "85. No combate a Bactérias Intracelulares, qual Linfócito T auxiliar (T helper) é ativado para auxiliar Macrófagos?",         options: [           "1. T helper 2 (TH2).",           "2. T helper 1 (TH1).",           "3. T helper 17 (TH17).",           "4. T CD8.",         ],         correctAnswer: "2. T helper 1 (TH1).",         comment: "No adquirido contra bactérias intracelulares, T CD4 (T helper 1) auxilia macrófagos, principalmente liberando Interferon Gama.",         topic: "Linfócito T Helper 1 (TH1)",       },       {         question: "86. Onde o MHC de Classe II exibe os antígenos?",         options: [           "1. Dentro do núcleo de todas as células.",           "2. No citoplasma das células B.",           "3. Nas Células Apresentadoras de Antígeno (CPA).",           "4. Na membrana dos Linfócitos T CD8.",         ],         correctAnswer: "3. Nas Células Apresentadoras de Antígeno (CPA).",         comment: "O MHC de Classe II está presente e exibe antígenos nas Células Apresentadoras de Antígeno (CPA).",         topic: "MHC II e Células Apresentadoras de Antígeno",       },       {         question: "87. A vacina prepara qual sistema imune para que a resposta seja imediata, baseada na memória?",         options: [           "1. Apenas o inato.",           "2. Apenas o complemento.",           "3. O adquirido (adaptativo).",           "4. Apenas o MHC I.",         ],         correctAnswer: "3. O adquirido (adaptativo).",         comment: "A vacina prepara o sistema imune adquirido ou adaptativo, que é o que possui memória.",         topic: "Imunização e Memória Adquirida",       },       {         question: "88. Qual é a principal função do Linfócito T CD4, segundo a lista de ações?",         options: [           "1. Destruição direta de células.",           "2. Ativar outras células de defesa, guardar memória e diferenciar Plasmócitos.",           "3. Produzir o anticorpo IgM.",           "4. Fagocitar bactérias extracelulares.",         ],         correctAnswer: "2. Ativar outras células de defesa, guardar memória e diferenciar Plasmócitos.",         comment: "O T CD4 (auxiliar) é responsável por coordenar e ativar as células B, T CD8 e macrófagos, sendo o 'maestro' da resposta adquirida.",         topic: "Função do Linfócito T CD4",       },       {         question: "89. Qual é a definição de HLA?",         options: [           "1. O nome do MHC em bactérias.",           "2. Antígenos Leucocitários Humanos.",           "3. Anticorpo Lipídico Auxiliar.",           "4. Linfócito Ativador.",         ],         correctAnswer: "2. Antígenos Leucocitários Humanos.",         comment: "O MHC no ser humano é chamado de HLA (Antígenos Leucocitários Humanos).",         topic: "Significado da Sigla HLA",       },       {         question: "90. A opsonização é um mecanismo efetor que consiste em:",         options: [           "1. Destruição direta de células.",           "2. Marcar o patógeno para fagocitose.",           "3. Inibir a ação do Linfócito T CD8.",           "4. Trocar a classe de anticorpo (Class Switch).",         ],         correctAnswer: "2. Marcar o patógeno para fagocitose.",         comment: "Opsonizar significa marcar o patógeno para fagocitose (marcador pode ser um anticorpo ou proteína do complemento).",         topic: "Opsonização",       },       {         question: "91. Qual Linfócito T Auxiliar (T helper) é ativado para chamar e ativar Neutrófilos no combate a Fungos?",         options: [           "1. TH1.",           "2. TH2.",           "3. TH17.",           "4. T CD8.",         ],         correctAnswer: "3. TH17.",         comment: "O TH17 é ativado para chamar e ativar Neutrófilos contra Fungos, pois eles estão envolvidos na defesa contra patógenos extracelulares e fúngicos.",         topic: "Linfócito T Helper 17 (TH17)",       },       {         question: "92. Qual Linfócito T Auxiliar (T helper) é ativado para auxiliar Macrófagos no combate a Protozoários e Helmintos?",         options: [           "1. TH1 (via Interferon Gama).",           "2. TH2 (com IgE).",           "3. TH17.",           "4. T CD8.",         ],         correctAnswer: "1. TH1 (via Interferon Gama).",         comment: "O TH1 ativa Macrófagos (via Interferon Gama) no combate a Protozoários e Helmintos, embora o TH2 seja mais forte contra Helmintos (parasitas grandes).",         topic: "Linfócito T Helper 1 (TH1) em Parasitas",       },       {         question: "93. Qual é a característica do vírus em relação ao seu tamanho?",         options: [           "1. Macroscópico.",           "2. Submicroscópico.",           "3. Unicelular.",           "4. Eucarionte.",         ],         correctAnswer: "2. Submicroscópico.",         comment: "O vírus é definido como uma entidade submicroscópica.",         topic: "Características Gerais de Vírus",       },       {         question: "94. Qual é a camada proteica que envolve o material genético (DNA ou RNA) do vírus?",         options: [           "1. Envelope.",           "2. Capsídio.",           "3. Parede Celular.",           "4. Citoplasma.",         ],         correctAnswer: "2. Capsídio.",         comment: "O material genético viral é envolto pelo Capsídio.",         topic: "Estrutura Viral: Capsídio",       },       {         question: "95. Qual é a camada lipídica externa que alguns vírus podem possuir?",         options: [           "1. Capsídio.",           "2. Envelope.",           "3. Plasmídio.",           "4. Quitina.",         ],         correctAnswer: "2. Envelope.",         comment: "O Envelope é a camada lipídica externa que alguns vírus podem possuir.",         topic: "Estrutura Viral: Envelope",       },       {         question: "96. Qual é a sequência correta das etapas da replicação viral?",         options: [           "1. Replicação e Síntese, Adesão, Penetração, Montagem e Liberação.",           "2. Adesão, Penetração, Replicação e Síntese, Montagem e Liberação.",           "3. Penetração, Replicação e Síntese, Adesão, Montagem e Liberação.",           "4. Liberação, Montagem, Replicação e Síntese, Penetração, Adesão.",         ],         correctAnswer: "2. Adesão, Penetração, Replicação e Síntese, Montagem e Liberação.",         comment: "O ciclo de replicação viral segue o ciclo: Adesão, Penetração, Replicação e Síntese, Montagem e Liberação.",         topic: "Ciclo de Replicação Viral",       },       {         question: "97. Qual é o tipo de liberação viral que destrói a célula hospedeira?",         options: [           "1. Ciclo Lisogênico.",           "2. Ciclo Lisossômico.",           "3. Ciclo de Latência.",           "4. Ciclo Lítico.",         ],         correctAnswer: "4. Ciclo Lítico.",         comment: "A liberação pode ocorrer via Ciclo Lítico (destruição da célula).",         topic: "Ciclo Lítico",       },       {         question: "98. Qual é a principal característica das Bactérias em relação à sua estrutura celular?",         options: [           "1. Eucariontes e multicelulares.",           "2. Eucariontes e unicelulares.",           "3. Procariotes e unicelulares.",           "4. Procariotes e multicelulares.",         ],         correctAnswer: "3. Procariotes e unicelulares.",         comment: "Bactérias são microrganismos unicelulares e procariontes.",         topic: "Características Gerais de Bactérias",       },       {         question: "99. O que é a Microbiota, segundo a descrição?",         options: [           "1. Um conjunto de vírus oncogênicos.",           "2. Bactérias que fazem parte da flora normal e vivem no corpo sem causar danos.",           "3. O material genético de fungos dimórficos.",           "4. As enzimas liberadas na inflamação.",         ],         correctAnswer: "2. Bactérias que fazem parte da flora normal e vivem no corpo sem causar danos.",         comment: "A Microbiota (residente/comensal) vive no corpo sem causar danos, sendo benéfica ou neutra.",         topic: "Microbiota (Flora Normal)",       },       {         question: "100. Qual o nome dado à desorganização da Microbiota?",         options: [           "1. Tropismo.",           "2. Latência.",           "3. Disbiose.",           "4. Autofagia.",         ],         correctAnswer: "3. Disbiose.",         comment: "A microbiota pode se tornar patogênica se for desorganizada (Disbiose).",         topic: "Disbiose",       },       {         question: "101. Qual é o tratamento específico para infecções bacterianas?",         options: [           "1. Antivirais.",           "2. Retrovirais.",           "3. Anti-helmínticos.",           "4. Antibiótico.",         ],         correctAnswer: "4. Antibiótico.",         comment: "O tratamento para bactéria é antibiótico; para vírus, retrovirais/antivirais (em número limitado).",         topic: "Tratamento de Infecções Bacterianas",       },       {         question: "102. Qual é o principal componente da parede celular dos Fungos?",         options: [           "1. Peptidoglicanos.",           "2. Lipopolissacarídeos.",           "3. Quitina.",           "4. Celulose.",         ],         correctAnswer: "3. Quitina.",         comment: "A parede celular dos fungos é composta por quitina, diferentemente da celulose (plantas) e peptidoglicanos (bactérias).",         topic: "Estrutura dos Fungos",       },       {         question: "103. O que significa a característica 'Dimórficos' nos Fungos (ex: Candida)?",         options: [           "1. Possuem dois tipos de material genético (DNA e RNA).",           "2. Podem alterar sua forma (levedura ou hifa) dependendo do ambiente.",           "3. Possuem dois envelopes lipídicos.",           "4. Se alimentam de duas formas diferentes.",         ],         correctAnswer: "2. Podem alterar sua forma (levedura ou hifa) dependendo do ambiente.",         comment: "Fungos são dimórficos, podendo alterar sua forma (levedura ou hifa) dependendo da temperatura e do ambiente (característica de patogenicidade).",         topic: "Fungos Dimórficos",       },       {         question: "104. Qual é o fator de virulência dos Fungos que consiste em uma estrutura que dificulta o tratamento?",         options: [           "1. Tropismo.",           "2. Latência.",           "3. Biofilme.",           "4. Capsídio.",         ],         correctAnswer: "3. Biofilme.",         comment: "Os fungos formam biofilme, o que aumenta a dificuldade de tratamento.",         topic: "Fatores de Virulência Fúngica (Biofilme)",       },       {         question: "105. Qual é um dos fatores de virulência dos Fungos que dificulta o reconhecimento pelo sistema imune?",         options: [           "1. Produção de Interferons.",           "2. Inativação do Linfócito B.",           "3. Mascarar PAMPs.",           "4. Ativar o Ciclo Lítico.",         ],         correctAnswer: "3. Mascarar PAMPs.",         comment: "Outro fator de virulência é a capacidade de mascarar PAMPs, dificultando o reconhecimento pelo sistema imune inato.",         topic: "Fatores de Virulência Fúngica (Mascaramento)",       },       {         question: "106. Qual das condições é citada como um fator de risco para infecções fúngicas?",         options: [           "1. Hipertensão.",           "2. Neutropenia.",           "3. Asma.",           "4. Colite.",         ],         correctAnswer: "2. Neutropenia.",         comment: "Fatores de risco para infecções fúngicas incluem neutropenia, imunossupressão, HIV e diabetes.",         topic: "Fatores de Risco para Micoses",       },       {         question: "107. Qual Linfócito T Auxiliar (T helper) atua junto com IgE e Eosinófilos para tentar destruir Protozoários e Helmintos?",         options: [           "1. TH1.",           "2. TH2.",           "3. TH17.",           "4. T CD8.",         ],         correctAnswer: "2. TH2.",         comment: "O TH2, juntamente com IgE e Eosinófilos, age contra parasitas grandes como Protozoários e Helmintos, orquestrando uma resposta alérgica/antiparasitária.",         topic: "Linfócito T Helper 2 (TH2)",       },       {         question: "108. Qual é a principal característica das bactérias Gram-Positivas que permite a retenção do corante de Gram?",         options: [           "1. Presença de Envelope lipídico.",           "2. Presença de Lipopolissacarídeos.",           "3. Alta concentração de peptidoglicanos na parede celular.",           "4. Capacidade de Autofagia.",         ],         correctAnswer: "3. Alta concentração de peptidoglicanos na parede celular.",         comment: "A parede celular tem alta concentração de peptidoglicanos que permite a entrada do corante de Gram, retendo a cor.",         topic: "Coloração de Gram: Gram-Positiva",       },       {         question: "109. O que as bactérias Gram-Negativas possuem que impede a entrada do corante de Gram?",         options: [           "1. Quitina.",           "2. Envelope.",           "3. Peptidoglicanos.",           "4. Lipopolissacarídeos.",         ],         correctAnswer: "4. Lipopolissacarídeos.",         comment: "As Gram-Negativas possuem lipopolissacarídeos que impedem a entrada do corante (possuem uma membrana externa extra).",         topic: "Coloração de Gram: Gram-Negativa",       },       {         question: "110. Qual fator de virulência viral é a afinidade do vírus por certos tecidos/células (ex: vírus da hepatite pelo fígado)?",         options: [           "1. Latência.",           "2. Tropismo.",           "3. Oncogenicidade.",           "4. Biofilme.",         ],         correctAnswer: "2. Tropismo.",         comment: "Tropismo é a afinidade do vírus por certos tecidos/células.",         topic: "Virulência Viral: Tropismo",       },       {         question: "111. Qual é a capacidade de o vírus se manter inativo em uma célula, esperando a baixa da imunidade para se reativar (ex: Herpes Vírus)?",         options: [           "1. Tropismo.",           "2. Oncogenicidade.",           "3. Latência.",           "4. Ciclo Lítico.",         ],         correctAnswer: "3. Latência.",         comment: "Latência é a capacidade de o vírus se manter inativo e se reativar com a baixa da imunidade.",         topic: "Virulência Viral: Latência",       },       {         question: "112. Qual é o termo que define vírus (ex: HPV) que podem causar disfunção celular e proliferação descontrolada, levando a câncer?",         options: [           "1. Lisogênicos.",           "2. Oncogênicos.",           "3. Tropistas.",           "4. Latentes.",         ],         correctAnswer: "2. Oncogênicos.",         comment: "Alguns vírus são Oncogênicos (ex: HPV), podendo causar disfunção celular e proliferação descontrolada.",         topic: "Vírus Oncogênicos",       },       {         question: "113. Qual tipo de diagnóstico viral é considerado demorado, pois o vírus precisa de células para se replicar?",         options: [           "1. PCR.",           "2. Teste rápido de antígeno.",           "3. Sorologia (ELISA).",           "4. Cultura.",         ],         correctAnswer: "4. Cultura.",         comment: "A Cultura é um diagnóstico viral demorado, pois o vírus precisa de células para se replicar.",         topic: "Diagnóstico Viral",       },       {         question: "114. A microbiota que vive conosco a vida toda e ajuda na digestão e proteção contra 'vilões' é chamada de:",         options: [           "1. Microbiota Patogênica.",           "2. Microbiota Transitória.",           "3. Microbiota Residente/Comensal.",           "4. Microbiota de Disbiose.",         ],         correctAnswer: "3. Microbiota Residente/Comensal.",         comment: "Microbiota Residente (ou Comensal) vive conosco a vida toda, sendo crucial para a saúde do hospedeiro.",         topic: "Microbiota Residente vs. Transitória",       },       {         question: "115. Qual é a classificação dos Fungos em relação à sua nutrição?",         options: [           "1. Autótrofos por fotossíntese.",           "2. Heterótrofos por absorção.",           "3. Autótrofos por quimiossíntese.",           "4. Heterótrofos por ingestão.",         ],         correctAnswer: "2. Heterótrofos por absorção.",         comment: "Fungos são heterótrofos por absorção, liberando enzimas digestivas no meio e absorvendo os nutrientes.",         topic: "Nutrição dos Fungos",       },       {         question: "116. O uso indiscriminado de antibióticos leva a qual problema em relação às bactérias?",         options: [           "1. Produção de biofilme.",           "2. Tropismo.",           "3. Latência.",           "4. Resistência bacteriana.",         ],         correctAnswer: "4. Resistência bacteriana.",         comment: "O uso indiscriminado de antibióticos leva à resistência bacteriana, um problema de saúde pública.",         topic: "Resistência a Antibióticos",       },       {         question: "117. Qual o Linfócito T que, ao lado da IgE e Eosinófilos, tenta fazer buracos na parede celular de Protozoários e Helmintos?",         options: [           "1. T CD8.",           "2. TH1.",           "3. TH2.",           "4. TH17.",         ],         correctAnswer: "3. TH2.",         comment: "O TH2, juntamente com IgE e Eosinófilos, tenta fazer buracos na parede celular dos parasitas grandes (Helmintos).",         topic: "Resposta Imune a Helmintos",       },       {         question: "118. Qual é a classificação dos Protozoários?",         options: [           "1. Procariotes, unicelulares, autótrofos.",           "2. Eucariontes, unicelulares, heterótrofos.",           "3. Eucariontes, multicelulares, autótrofos.",           "4. Procariotes, multicelulares, heterótrofos.",         ],         correctAnswer: "2. Eucariontes, unicelulares, heterótrofos.",         comment: "Protozoários são eucariontes, unicelulares e heterótrofos.",         topic: "Características Gerais de Protozoários",       },       {         question: "119. O Ciclo Lisogênico de um vírus é caracterizado por:",         options: [           "1. Destruição imediata da célula.",           "2. Incorporação de material genético sem destruição imediata da célula.",           "3. Produção de anticorpos.",           "4. Ativação da Via Alternativa do Complemento.",         ],         correctAnswer: "2. Incorporação de material genético sem destruição imediata da célula.",         comment: "O Ciclo Lisogênico é a liberação sem destruição da célula, onde o vírus incorpora parte do material genético e/ou da membrana da célula hospedeira.",         topic: "Ciclo Lisogênico",       },       {         question: "120. No combate a Bactérias Extracelulares, qual é a ação primária do sistema imune inato, conforme o resumo?",         options: [           "1. Chamar Linfócitos T CD8.",           "2. Tentar fagocitar e ativar o sistema complemento.",           "3. Induzir Latência.",           "4. Ativar o TH17.",         ],         correctAnswer: "2. Tentar fagocitar e ativar o sistema complemento.",         comment: "Se extracelulares, o inato tenta fagocitar e ativa o sistema complemento (principalmente via alternativa).",         topic: "Mecanismo de Combate: Bactérias Extracelulares Inato",       },     ];

    function buildQuiz() {
      const output = [];

      questions.forEach((currentQuestion, questionNumber) => {
        const options = [];
        for (let i = 0; i < currentQuestion.options.length; i++) {
          options.push(
            `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
              <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
              ${currentQuestion.options[i]}
            </label>`
          );
        }

        output.push(
          `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
            <div class="question">${currentQuestion.question}</div>
            <div class="options">${options.join("")}</div>
            <div class="comment" id="comment-${questionNumber}"></div>
          </div>`
        );
      });

      quizContainer.innerHTML = output.join("");
    }

    function showResults() {
      wrongQuestionIndices = [];
      errorCountByTopic = {};
      totalAnsweredQuestionsByTopic = {};
      currentWrongQuestionIndex = -1;
      hasErrors = false;
      isShowingErrors = false;
      isShowingDiagnosis = false;

      errorDiagnosisSection.style.display = 'none';
      topicsToReviewList.innerHTML = '';
      statusMessage.textContent = '';

      // Busca por todas as perguntas: estáticas e dinâmicas
      const allQuestionCards = document.querySelectorAll('.quiz-container .card, #newQuestionsContent .card');
      let correctAnswersCount = 0;
      let totalQuestionsAnswered = 0;

      console.log('🔍 Verificando', allQuestionCards.length, 'perguntas...');

      allQuestionCards.forEach((card, index) => {
        const questionEl = card.querySelector('.question') || card.querySelector('p');
        if (!questionEl) return;

        const questionText = questionEl.textContent.trim();
        const optionsContainer = card.querySelector('.options') || card;
        const allOptions = optionsContainer.querySelectorAll('.option, label.option, label');
        const userAnswerElement = optionsContainer.querySelector('.option.selected, label.selected');
        const commentDiv = card.querySelector('.comment');

        const questionTopic = card.dataset.topic || "Tópico não informado";
        
        console.log(`📝 Pergunta ${index + 1}: Tópico = "${questionTopic}"`);
        console.log(`🔍 Encontradas ${allOptions.length} alternativas`);
        
        // Remove classes anteriores
        allOptions.forEach(option => {
          option.classList.remove('correct', 'incorrect', 'selected');
        });
        if (commentDiv) commentDiv.classList.remove('show');

        let correctAnswerValue = null;
        let questionComment = null;

        // Verifica se é pergunta estática ou dinâmica
        const isStatic = card.id && card.id.startsWith('question-');
        if (isStatic) {
          // Pergunta estática - busca nos dados originais
          const questionData = questions.find(q => q.question.trim() === questionText);
          if (questionData) {
            correctAnswerValue = questionData.correctAnswer.trim();
            questionComment = questionData.comment;
          }
        } else {
          // Pergunta dinâmica - busca pela opção marcada como correta
          const correctOpt = optionsContainer.querySelector('.option[data-answer="true"], label[data-answer="true"]');
          if (correctOpt) {
            correctAnswerValue = correctOpt.dataset.value?.trim() || correctOpt.textContent.trim();
            console.log(`✅ Resposta correta encontrada: "${correctAnswerValue}"`);
          } else {
            console.log('❌ Nenhuma resposta correta encontrada para pergunta dinâmica');
          }
          
          // Busca comentário no próprio card ou no div comment
          const commentElement = card.querySelector('.comment');
          if (commentElement && commentElement.textContent.trim()) {
            questionComment = commentElement.textContent.trim();
          }
        }

        // Processa resposta do usuário e aplica coloração
        let userAnswer = null;
        if (userAnswerElement) {
          userAnswerElement.classList.add('selected');
          userAnswer = userAnswerElement.dataset.value?.trim() || userAnswerElement.textContent.trim();
          totalQuestionsAnswered++;
          totalAnsweredQuestionsByTopic[questionTopic] = (totalAnsweredQuestionsByTopic[questionTopic] || 0) + 1;

          console.log(`👤 Resposta do usuário: "${userAnswer}"`);
          console.log(`🎯 Resposta correta: "${correctAnswerValue}"`);

          // Verifica se a resposta está correta
          if (userAnswer === correctAnswerValue) {
            correctAnswersCount++;
            console.log(`✅ Resposta correta!`);
          } else {
            hasErrors = true;
            errorCountByTopic[questionTopic] = (errorCountByTopic[questionTopic] || 0) + 1;
            console.log(`❌ Resposta incorreta para tópico: ${questionTopic}`);
          }
        }

        // Aplica coloração: SEMPRE marca a correta de verde, e a errada de vermelho se foi marcada
        allOptions.forEach(option => {
          const optionValue = option.dataset.value?.trim() || option.textContent.trim();
          
          // Marca a resposta correta de verde SEMPRE
          if (optionValue === correctAnswerValue) {
            option.classList.add('correct');
            console.log(`🟢 Marcando como correta: "${optionValue}"`);
          }
          
          // Se o usuário marcou uma resposta E ela está errada, marca de vermelho
          if (userAnswer && optionValue === userAnswer && userAnswer !== correctAnswerValue) {
            option.classList.add('incorrect');
            console.log(`🔴 Marcando como incorreta: "${optionValue}"`);
          }
        });

        // Mostra comentário se disponível
        if (commentDiv && questionComment) {
          commentDiv.textContent = questionComment;
          commentDiv.classList.add('show');
        }
      });

      // Exibe resultados
      resultsContainer.textContent = `Você acertou ${correctAnswersCount} de ${totalQuestionsAnswered} questões respondidas.`;

      console.log('📊 Erros por tópico:', errorCountByTopic);
      console.log('📊 Total por tópico:', totalAnsweredQuestionsByTopic);

      // Gera diagnóstico de erros
      if (hasErrors) {
        for (const topic in errorCountByTopic) {
          const errors = errorCountByTopic[topic];
          const total = totalAnsweredQuestionsByTopic[topic] || 0;
          if (total > 0) {
            const percent = ((errors / total) * 100).toFixed(1);
            const li = document.createElement('li');
            li.textContent = `${topic}: ${percent}% de erros (${errors} de ${total} questões respondidas)`;
            topicsToReviewList.appendChild(li);
          }
        }
      } else {
        const li = document.createElement('li');
        li.textContent = "🥳 Parabéns! Você não teve erros nas questões respondidas.";
        topicsToReviewList.appendChild(li);
      }

      errorDiagnosisSection.style.display = 'block';
      generatedQuestionsSection.style.display = 'block';
      generateNewQuestionsBtn.style.display = 'block';
      scrollToDiagnosis();
    }

    function scrollToQuestion(index) {
      const questionCard = document.getElementById(`question-${index}`);
      if (questionCard) {
        questionCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }

    function scrollToDiagnosis() {
        errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function scrollToGeneratedQuestions() {
        generatedQuestionsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Event listener para seleção de opções (funciona para estáticas e dinâmicas)
    document.addEventListener("click", function (event) {
      const clickedElement = event.target;
      const optionElement = clickedElement.closest('.option');

      if (optionElement) {
          if (clickedElement.classList.contains("scissor-icon")) {
              event.stopPropagation();
              optionElement.classList.toggle("struck-through");
          }
          else {
              const parentCard = optionElement.closest('.card');
              const currentQuestionOptions = parentCard.querySelectorAll('.option');

              currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
              optionElement.classList.add("selected");
          }
      }
    });

    generateNewQuestionsBtn.addEventListener("click", async function() {
        statusMessage.textContent = '⏳ Gerando novas perguntas...';
        generateNewQuestionsBtn.disabled = true;

        const topics = Object.keys(errorCountByTopic).filter(topic => {
            const errorsInTopic = errorCountByTopic[topic] || 0;
            const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
            return errorsInTopic > 0 && totalAnsweredInTopic > 0;
        });

        const topicsToSend = topics.length > 0 ? topics : ["fisiologia celular", "biologia"];

        try {
            const response = await fetch('https://www.quizia.xyz/quiz', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ topicos: topicsToSend }),
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            newQuestionsContent.innerHTML = '';
            if (data && data.html) {
                console.log('📥 HTML recebido do Flask:', data.html);
                
                // Insere o HTML diretamente sem reconstrução complexa
                newQuestionsContent.innerHTML = data.html.replace(/```html|```/g, '');
                
                // Adiciona tesouras e ajusta formatação apenas se necessário
                newQuestionsContent.querySelectorAll('.card').forEach((card, cardIndex) => {
                    // Garante que o elemento de pergunta tenha a classe correta
                    const questionElement = card.querySelector('p');
                    if (questionElement && !questionElement.classList.contains('question')) {
                       questionElement.classList.add('question');
                    }

                    // Remove qualquer input de radio que possa existir e adiciona tesouras
                    card.querySelectorAll('label').forEach((label) => {
                        // Remove inputs de radio MAS preserva o atributo data-answer
                        const radioInput = label.querySelector('input[type="radio"]');
                        if (radioInput) {
                            // PRESERVA o atributo data-answer do input no label
                            if (radioInput.hasAttribute('data-answer')) {
                                label.setAttribute('data-answer', radioInput.getAttribute('data-answer'));
                            }
                            radioInput.remove();
                        }
                        
                        // Garante que tenha a classe option
                        if (!label.classList.contains('option')) {
                            label.classList.add('option');
                        }

                        // Garante que tenha data-value
                        if (!label.dataset.value) {
                            label.dataset.value = label.textContent.trim();
                        }

                        // Adiciona tesoura se não existir
                        if (!label.querySelector('.scissor-icon')) {
                            const scissorIcon = document.createElement('img');
                            scissorIcon.src = 'tesouras.png';
                            scissorIcon.className = 'scissor-icon';
                            scissorIcon.onclick = function(e) {
                                e.stopPropagation();
                                label.classList.toggle('struck-through');
                            };
                            label.insertBefore(scissorIcon, label.firstChild);
                        }
                    });

                    console.log(`🏷️ Card ${cardIndex}: data-topic = "${card.dataset.topic}"`);
                    
                    // Verifica se há opção correta marcada
                    const correctOption = card.querySelector('label[data-answer="true"]');
                    if (correctOption) {
                        console.log(`✅ Opção correta encontrada: "${correctOption.dataset.value}"`);
                    } else {
                        console.log('❌ Nenhuma opção correta encontrada');
                    }
                });
            } else {
                newQuestionsContent.innerHTML = "<p>Não foi possível gerar novas perguntas para os tópicos selecionados.</p>";
            }
            
            generatedQuestionsSection.style.display = 'block';
            scrollToGeneratedQuestions();
            statusMessage.textContent = '✅ Perguntas geradas com sucesso!';
            setTimeout(() => { statusMessage.textContent = '' }, 3000);

        } catch (error) {
            console.error('Erro ao gerar novas perguntas:', error);
            newQuestionsContent.innerHTML = `<p>Erro ao carregar novas perguntas: ${error.message}. Por favor, tente novamente.</p>`;
            generatedQuestionsSection.style.display = 'block';
            scrollToGeneratedQuestions();
            statusMessage.textContent = '❌ Erro na requisição: ' + error.message;
            setTimeout(() => { statusMessage.textContent = '' }, 5000);
        } finally {
            generateNewQuestionsBtn.disabled = false;
        }
    });

    // Inicialização
    buildQuiz();
    errorDiagnosisSection.style.display = 'none';
    generatedQuestionsSection.style.display = 'none';
    generateNewQuestionsBtn.style.display = 'none';

    // Event listener para o botão de verificar respostas
    document.getElementById("verifyAnswersBtn").addEventListener("click", showResults);
  </script>
</body>
</html>
