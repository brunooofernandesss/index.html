<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simulado Sinapses</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        background-color: #f4f4f4;
      }

      .quiz-container {
        max-width: 800px;
        width: 100%;
      }

      h1 {
        color: #333;
        text-align: center;
        margin-bottom: 30px;
      }

      .card {
        background-color: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .question {
        font-weight: bold;
        margin-bottom: 10px;
        color: #333;
      }

      .options {
        margin-top: 15px;
      }

      .option {
        display: flex; /* Para alinhar imagem e texto */
        align-items: center;
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.2s ease;
        position: relative; /* Para posicionar a tesoura */
      }

      .option:hover {
        background-color: #e9e9e9;
      }

      .option.selected {
        background-color: #d1e7dd;
        border-color: #28a745;
      }

      .option.correct {
        background-color: #d4edda;
        border-color: #28a745;
      }

      .option.incorrect {
        background-color: #f8d7da;
        border-color: #dc3545;
      }

      .submit-btn {
        display: block;
        width: 100%;
        padding: 15px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 18px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        margin-top: 30px;
      }

      .submit-btn:hover {
        background-color: #0056b3;
      }

      .results {
        text-align: center;
        margin-top: 30px;
        font-size: 20px;
        font-weight: bold;
        color: #333;
      }

      .scissor-icon {
        margin-right: 10px; /* Espaço entre a tesoura e o texto da opção */
        width: 20px; /* Ajuste conforme o tamanho da sua imagem */
        height: 20px; /* Ajuste conforme o tamanho da sua imagem */
        opacity: 0.5; /* Transparência como no original */
        cursor: pointer;
      }

      .scissor-icon.hidden {
        display: none;
      }

      .struck-through {
        text-decoration: line-through;
        color: #888;
      }

      .comment {
        margin-top: 10px;
        padding: 10px;
        background-color: #f0f0f0;
        border-left: 4px solid #007bff;
        font-style: italic;
        color: #555;
        display: none; /* Escondido por padrão */
      }
      .comment.show {
        display: block; /* Mostrado quando ativado */
      }

      /* Estilos para o botão de navegação de erro / diagnóstico */
      .error-nav-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #dc3545; /* Vermelho para erro */
        color: white;
        border: none;
        border-radius: 50%; /* Torna o botão redondo */
        width: 60px;
        height: 60px;
        font-size: 24px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        display: none; /* Escondido por padrão */
        flex-direction: column; /* Para empilhar o ícone e o contador */
        padding: 5px; /* Ajuste o padding para acomodar texto maior */
        box-sizing: border-box; /* Garante que padding não aumente o tamanho total */
        text-align: center;
      }

      .error-nav-btn:hover {
        background-color: #c82333;
      }

      .error-nav-btn .arrow-icon {
        font-size: 30px; /* Tamanho da seta */
        line-height: 1; /* Ajuste para centralizar */
      }

      .error-nav-btn .button-text {
        font-size: 12px; /* Tamanho do texto abaixo da seta */
        line-height: 1;
        margin-top: 2px; /* Espaço entre a seta e o texto */
      }
      
      /* Estilos para a seção de diagnóstico de erros */
      .error-diagnosis-section {
          margin-top: 50px;
          padding: 30px;
          background-color: #ffe0b2; /* Um laranja claro ou similar */
          border-radius: 8px;
          box-shadow: 0 2px 5px rgba(0,0,0,0.15);
          display: none; /* Escondido por padrão */
          text-align: center;
          font-size: 1.1em;
          color: #333;
      }

      .error-diagnosis-section h2 {
          color: #e65100; /* Laranja mais escuro */
          margin-bottom: 20px;
          font-size: 1.8em;
      }

      .error-diagnosis-section ul {
          list-style: none; /* Remove marcadores de lista */
          padding: 0;
          margin: 0;
      }

      .error-diagnosis-section li {
          background-color: #ff9800; /* Laranja */
          color: white;
          padding: 8px 15px;
          margin: 8px 0;
          border-radius: 5px;
          display: inline-block; /* Para que os itens fiquem lado a lado */
          margin-right: 10px;
          font-weight: bold;
      }
      .error-diagnosis-section li:last-child {
          margin-right: 0;
      }
    </style>
  </head>
  <body>
    <div class="quiz-container">
      <h1>Simulado de Módulo I</h1>
      <div id="quiz"></div>
      <button class="submit-btn" id="submit">Verificar Respostas</button>
      <div id="results" class="results"></div>

      <div id="errorDiagnosis" class="error-diagnosis-section">
        <h2>Diagnóstico de Erros</h2>
        <p>Parece que você precisa revisar os seguintes assuntos:</p>
        <ul id="topicsToReview">
          </ul>
      </div>
    </div>

    <button class="error-nav-btn" id="errorNavBtn">
      <span class="arrow-icon"></span> <span class="button-text"></span> </button>

    <script>
      const quizContainer = document.getElementById("quiz");
      const submitButton = document.getElementById("submit");
      const resultsContainer = document.getElementById("results");
      const errorNavBtn = document.getElementById("errorNavBtn");
      const arrowIcon = errorNavBtn.querySelector(".arrow-icon");
      const buttonText = errorNavBtn.querySelector(".button-text");
      const errorDiagnosisSection = document.getElementById("errorDiagnosis");
      const topicsToReviewList = document.getElementById("topicsToReview");

      let wrongQuestionIndices = []; 
      let errorCountByTopic = {}; 
      let totalAnsweredQuestionsByTopic = {}; 
      let currentWrongQuestionIndex = -1; 
      let hasErrors = false; 
      let isShowingErrors = false; 
      let isShowingDiagnosis = false; 

      const questions = [
        {
          question:
            "1. O que são os Potenciais Pós-Sinápticos (PPS)?",
          options: [
            "a) Apenas potenciais de ação gerados no terminal pré-sináptico.",
            "b) Alterações elétricas no neurônio pós-sináptico resultantes da ação dos neurotransmissores.",
            "c) A liberação de neurotransmissores na fenda sináptica.",
            "d) O potencial de membrana em repouso de um neurônio.",
          ],
          correctAnswer: "b) Alterações elétricas no neurônio pós-sináptico resultantes da ação dos neurotransmissores.",
          comment:
            "Potenciais Pós-Sinápticos (PPS) são alterações no potencial elétrico da membrana do neurônio pós-sináptico, que podem ser excitatórias (PPSE) ou inibitórias (PPSI), e são o resultado da ligação de neurotransmissores aos seus receptores.",
          topic: "Potenciais Pós-Sinápticos e Somação",
        },
        {
          question:
            "2. Qual o efeito de um Potencial Pós-Sináptico Excitatório (PPSE) na membrana pós-sináptica?",
          options: [
            "a) Hiperpolarização.",
            "b) Estabilização do potencial de repouso.",
            "c) Despolarização, aproximando o potencial do limiar.",
            "d) Geração imediata de um potencial de ação.",
          ],
          correctAnswer: "c) Despolarização, aproximando o potencial do limiar.",
          comment:
            "Um PPSE causa uma despolarização (torna o interior mais positivo) da membrana pós-sináptica, aproximando o potencial de membrana do limiar para a geração de um potencial de ação.",
          topic: "Potenciais Pós-Sinápticos e Somação",
        },
        {
          question:
            "3. Qual o efeito de um Potencial Pós-Sináptico Inibitório (PPSI) na membrana pós-sináptica?",
          options: [
            "a) Despolarização.",
            "b) Aproximação do potencial do limiar.",
            "c) Hiperpolarização, afastando o potencial do limiar.",
            "d) Geração imediata de um potencial de ação.",
          ],
          correctAnswer: "c) Hiperpolarização, afastando o potencial do limiar.",
          comment:
            "Um PPSI causa uma hiperpolarização (torna o interior mais negativo) da membrana pós-sináptica, afastando o potencial de membrana do limiar e tornando mais difícil a geração de um potencial de ação.",
          topic: "Potenciais Pós-Sinápticos e Somação",
        },
        {
          question:
            "4. O que é a somação temporal de Potenciais Pós-Sinápticos?",
          options: [
            "a) A soma de PPS de diferentes sinapses ao mesmo tempo.",
            "b) A soma de PPS que chegam rapidamente à mesma sinapse.",
            "c) A inibição de PPS por diferentes neurônios.",
            "d) A anulação de PPS excitatórios por inibitórios.",
          ],
          correctAnswer: "b) A soma de PPS que chegam rapidamente à mesma sinapse.",
          comment:
            "A somação temporal ocorre quando múltiplos PPS (sejam PPSE ou PPSI) chegam ao neurônio pós-sináptico em rápida sucessão através da mesma sinapse, acumulando-se e atingindo o limiar.",
          topic: "Potenciais Pós-Sinápticos e Somação",
        },
        {
          question:
            "5. O que é a somação espacial de Potenciais Pós-Sinápticos?",
          options: [
            "a) A soma de PPS que chegam rapidamente à mesma sinapse.",
            "b) A soma de PPS de diferentes sinapses ao mesmo tempo.",
            "c) A inibição de PPS por diferentes neurônios.",
            "d) A anulação de PPS excitatórios por inibitórios.",
          ],
          correctAnswer: "b) A soma de PPS de diferentes sinapses ao mesmo tempo.",
          comment:
            "A somação espacial ocorre quando PPS (sejam PPSE ou PPSI) de diferentes sinapses, localizadas em diferentes partes do neurônio pós-sináptico, chegam simultaneamente e se somam.",
          topic: "Potenciais Pós-Sinápticos e Somação",
        },
        {
          question:
            "6. Qual a principal função dos neurotransmissores na fenda sináptica?",
          options: [
            "a) Degradar o neurônio pré-sináptico.",
            "b) Atuar como catalisadores de reações químicas.",
            "c) Transmitir o sinal elétrico de um neurônio para outro, modificando o potencial pós-sináptico.",
            "d) Produzir energia para a célula.",
          ],
          correctAnswer: "c) Transmitir o sinal elétrico de um neurônio para outro, modificando o potencial pós-sináptico.",
          comment:
            "Neurotransmissores são substâncias químicas liberadas na fenda sináptica que se ligam a receptores no neurônio pós-sináptico, convertendo o sinal elétrico (potencial de ação) em um sinal químico que então gera uma nova alteração elétrica no neurônio seguinte.",
          topic: "Neurotransmissores e Funções",
        },
        {
          question:
            "7. O que acontece com os neurotransmissores após se ligarem aos receptores pós-sinápticos?",
          options: [
            "a) Eles permanecem indefinidamente ligados aos receptores.",
            "b) São reabsorvidos pelo neurônio pré-sináptico, degradados por enzimas ou se difundem para fora da fenda.",
            "c) São transformados em impulsos elétricos.",
            "d) São imediatamente convertidos em energia.",
          ],
          correctAnswer: "b) São reabsorvidos pelo neurônio pré-sináptico, degradados por enzimas ou se difundem para fora da fenda.",
          comment:
            "Para que a transmissão sináptica seja eficiente e regulada, os neurotransmissores precisam ser rapidamente removidos da fenda sináptica após sua ação. Isso pode ocorrer por recaptação (reabsorção), degradação enzimática ou difusão.",
          topic: "Neurotransmissores e Funções",
        },
        {
          question:
            "8. Qual o papel dos receptores ionotrópicos na sinapse?",
          options: [
            "a) Ativar segundos mensageiros intracelulares.",
            "b) Modificar diretamente a permeabilidade iônica da membrana, abrindo canais iônicos.",
            "c) Sintetizar novos neurotransmissores.",
            "d) Degradar neurotransmissores na fenda.",
          ],
          correctAnswer: "b) Modificar diretamente a permeabilidade iônica da membrana, abrindo canais iônicos.",
          comment:
            "Receptores ionotrópicos são canais iônicos regulados por ligantes. Quando um neurotransmissor se liga a eles, o canal se abre diretamente, permitindo o fluxo de íons e alterando rapidamente o potencial de membrana.",
          topic: "Receptores Sinápticos",
        },
        {
          question:
            "9. Qual o papel dos receptores metabotrópicos na sinapse?",
          options: [
            "a) Modificar diretamente a permeabilidade iônica da membrana.",
            "b) Ativar vias de sinalização intracelulares (segundos mensageiros), levando a efeitos mais lentos e duradouros.",
            "c) Degradar neurotransmissores.",
            "d) Promover a recaptação de neurotransmissores.",
          ],
          correctAnswer: "b) Ativar vias de sinalização intracelulares (segundos mensageiros), levando a efeitos mais lentos e duradouros.",
          comment:
            "Receptores metabotrópicos são acoplados a proteínas G. Sua ativação desencadeia uma cascata de sinalização intracelular, que pode levar à abertura de canais iônicos indiretamente ou a outras modificações na célula, com efeitos mais lentos e prolongados.",
          topic: "Receptores Sinápticos",
        },
        {
          question:
            "10. Qual neurotransmissor é o principal excitatório no sistema nervoso central?",
          options: ["a) GABA", "b) Glicina", "c) Glutamato", "d) Acetilcolina"],
          correctAnswer: "c) Glutamato",
          comment:
            "O glutamato é o neurotransmissor excitatório mais abundante no cérebro e desempenha um papel crucial na aprendizagem e memória.",
          topic: "Neurotransmissores e Funções",
        },
        {
          question:
            "11. Qual neurotransmissor é o principal inibitório no sistema nervoso central?",
          options: [
            "a) Glutamato",
            "b) Glicina",
            "c) GABA (Ácido Gama-aminobutírico)",
            "d) Serotonina",
          ],
          correctAnswer: "c) GABA (Ácido Gama-aminobutírico)",
          comment:
            "O GABA é o principal neurotransmissor inibitório no cérebro, responsável por reduzir a excitabilidade neuronal e promover a calma.",
          topic: "Neurotransmissores e Funções",
        },
        {
          question:
            "12. A acetilcolina desempenha um papel crucial em qual das seguintes funções?",
          options: [
            "a) Regulação do humor e sono.",
            "b) Movimento muscular e memória.",
            "c) Resposta ao estresse.",
            "d) Percepção da dor.",
          ],
          correctAnswer: "b) Movimento muscular e memória.",
          comment:
            "A acetilcolina está envolvida na contração muscular na junção neuromuscular e em funções cognitivas, incluindo a memória e o aprendizado, no cérebro.",
          topic: "Neurotransmissores e Funções",
        },
        {
          question:
            "13. A dopamina está associada a qual das seguintes funções?",
          options: [
            "a) Regulação da temperatura corporal.",
            "b) Recompensa, motivação e controle motor.",
            "c) Processamento visual.",
            "d) Digestão.",
          ],
          correctAnswer: "b) Recompensa, motivação e controle motor.",
          comment:
            "A dopamina é um neurotransmissor multifuncional, crucial para o sistema de recompensa do cérebro, motivação, prazer e coordenação de movimentos.",
          topic: "Neurotransmissores e Funções",
        },
        {
          question:
            "14. A serotonina é conhecida por regular qual das seguintes funções?",
          options: [
            "a) Controle da sede.",
            "b) Humor, sono, apetite e bem-estar.",
            "c) Visão e audição.",
            "d) Equilíbrio.",
          ],
          correctAnswer: "b) Humor, sono, apetite e bem-estar.",
          comment:
            "A serotonina é um neurotransmissor importante na regulação do humor, sono, apetite e funções sociais, sendo um alvo comum para medicamentos antidepressivos.",
          topic: "Neurotransmissores e Funções",
        },
        {
          question:
            "15. A noradrenalina (norepinefrina) está principalmente envolvida em qual das seguintes respostas?",
          options: [
            "a) Digestão e absorção de nutrientes.",
            "b) Resposta de 'luta ou fuga' (stress).",
            "c) Regulação do ciclo circadiano.",
            "d) Formação óssea.",
          ],
          correctAnswer: "b) Resposta de 'luta ou fuga' (stress).",
          comment:
            "A noradrenalina é um neurotransmissor e hormônio que desempenha um papel central na resposta do corpo ao estresse, aumentando o estado de alerta, a frequência cardíaca e a preparação para ação.",
          topic: "Neurotransmissores e Funções",
        },
        {
          question: "16. O que é a plasticidade sináptica?",
          options: [
            "a) A capacidade de um neurônio se regenerar após uma lesão.",
            "b) A capacidade das sinapses de mudar sua força e eficiência ao longo do tempo.",
            "c) A rigidez das membranas neuronais.",
            "d) O processo de morte celular programada em neurônios.",
          ],
          correctAnswer: "b) A capacidade das sinapses de mudar sua força e eficiência ao longo do tempo.",
          comment:
            "A plasticidade sináptica é a capacidade das sinapses de fortalecer ou enfraquecer suas conexões ao longo do tempo em resposta à atividade, sendo fundamental para o aprendizado e a memória.",
          topic: "Plasticidade Sináptica",
        },
        {
          question:
            "17. Qual dos seguintes fenômenos é um exemplo de plasticidade sináptica excitatória de longa duração?",
          options: [
            "a) Depressão de Longa Duração (LTD).",
            "b) Potenciação de Longa Duração (LTP).",
            "c) Inibição Pós-Sináptica.",
            "d) Potencial de Repouso.",
          ],
          correctAnswer: "b) Potenciação de Longa Duração (LTP).",
          comment:
            "A Potenciação de Longa Duração (LTP) é um aumento persistente na força da transmissão sináptica entre dois neurônios que resulta de sua estimulação síncrona, sendo um mecanismo-chave para a aprendizagem e memória.",
          topic: "Plasticidade Sináptica",
        },
        {
          question:
            "18. Qual dos seguintes fenômenos é um exemplo de plasticidade sináptica inibitória de longa duração?",
          options: [
            "a) Potenciação de Longa Duração (LTP).",
            "b) Depressão de Longa Duração (LTD).",
            "c) Potencial de Ação.",
            "d) Somatório Espacial.",
          ],
          correctAnswer: "b) Depressão de Longa Duração (LTD).",
          comment:
            "A Depressão de Longa Duração (LTD) é uma diminuição persistente na força de uma sinapse, que ocorre em resposta a padrões específicos de atividade neuronal, funcionando como um mecanismo de 'desaprendizagem' ou ajuste fino.",
          topic: "Plasticidade Sináptica",
        },
        {
          question:
            "19. Qual íon é crucial para a liberação de neurotransmissores no terminal pré-sináptico?",
          options: [
            "a) Sódio (Na⁺).",
            "b) Potássio (K⁺).",
            "c) Cálcio (Ca²⁺).",
            "d) Cloreto (Cl⁻).",
          ],
          correctAnswer: "c) Cálcio (Ca²⁺).",
          comment:
            "A chegada do potencial de ação ao terminal pré-sináptico abre canais de cálcio dependentes de voltagem. O influxo de Ca²⁺ desencadeia a fusão das vesículas sinápticas com a membrana pré-sináptica e a liberação de neurotransmissores.",
          topic: "Neurotransmissores e Funções",
        },
        {
          question:
            "20. A bainha de mielina, formada por células de Schwann (SNP) ou oligodendrócitos (SNC), tem como principal função:",
          options: [
            "a) Armazenar neurotransmissores.",
            "b) Aumentar a velocidade de condução do impulso nervoso.",
            "c) Degradar neurotransmissores.",
            "d) Produzir energia para o neurônio.",
          ],
          correctAnswer: "b) Aumentar a velocidade de condução do impulso nervoso.",
          comment:
            "A bainha de mielina atua como um isolante elétrico, permitindo que o impulso nervoso salte de um nódulo de Ranvier para outro (condução saltatória), aumentando drasticamente a velocidade de transmissão.",
          topic: "Células Gliais e Mielina",
        },
        {
          question:
            "21. Quais são as principais células gliais do sistema nervoso central responsáveis pela formação da bainha de mielina?",
          options: [
            "a) Astrócitos.",
            "b) Micróglia.",
            "c) Oligodendrócitos.",
            "d) Células ependimárias.",
          ],
          correctAnswer: "c) Oligodendrócitos.",
          comment:
            "Os oligodendrócitos são as células gliais que formam a bainha de mielina no sistema nervoso central (cérebro e medula espinhal).",
          topic: "Células Gliais e Mielina",
        },
        {
          question:
            "22. Quais são as células gliais que formam a bainha de mielina no sistema nervoso periférico?",
          options: [
            "a) Células de Schwann.",
            "b) Astrócitos.",
            "c) Micróglia.",
            "d) Oligodendrócitos.",
          ],
          correctAnswer: "a) Células de Schwann.",
          comment:
            "As células de Schwann são as células gliais que formam a bainha de mielina ao redor dos axônios no sistema nervoso periférico.",
          topic: "Células Gliais e Mielina",
        },
        {
          question:
            "23. Qual o papel dos astrócitos no sistema nervoso central?",
          options: [
            "a) Formar a bainha de mielina.",
            "b) Fagocitar detritos celulares.",
            "c) Suporte metabólico e estrutural aos neurônios, regulação da fenda sináptica e formação da barreira hematoencefálica.",
            "d) Produzir líquido cefalorraquidiano.",
          ],
          correctAnswer: "c) Suporte metabólico e estrutural aos neurônios, regulação da fenda sináptica e formação da barreira hematoencefálica.",
          comment:
            "Os astrócitos são as células gliais mais abundantes e versáteis, desempenhando funções cruciais como suporte nutricional, regulação do ambiente iônico e de neurotransmissores na fenda sináptica, e participação na barreira hematoencefálica.",
          topic: "Células Gliais e Mielina",
        },
        {
          question: "24. A micróglia atua principalmente como:",
          options: [
            "a) Células de suporte estrutural.",
            "b) Células imunológicas do sistema nervoso central, realizando fagocitose.",
            "c) Células produtoras de mielina.",
            "d) Células que regulam a formação de sinapses.",
          ],
          correctAnswer: "b) Células imunológicas do sistema nervoso central, realizando fagocitose.",
          comment:
            "A micróglia são as células imunes residentes do sistema nervoso central, funcionando como macrófagos para remover patógenos, células mortas e detritos.",
          topic: "Células Gliais e Mielina",
        },
        {
          question: "25. O que é a barreira hematoencefálica?",
          options: [
            "a) Uma barreira física que impede o fluxo sanguíneo para o cérebro.",
            "b) Uma estrutura altamente seletiva que regula a passagem de substâncias do sangue para o cérebro.",
            "c) Uma camada protetora ao redor dos nervos periféricos.",
            "d) O local de produção de líquido cefalorraquidiano.",
          ],
          correctAnswer: "b) Uma estrutura altamente seletiva que regula a passagem de substâncias do sangue para o cérebro.",
          comment:
            "A barreira hematoencefálica é formada por células endoteliais dos capilares cerebrais, unidas por junções estreitas, e por astrócitos, que controlam rigorosamente o que entra e sai do cérebro para protegê-lo de toxinas e patógenos.",
          topic: "Barreira Hematoencefálica",
        },
        {
          question:
            "26. Quais são os dois tipos principais de potenciais que ocorrem na membrana neuronal?",
          options: [
            "a) Potencial de repouso e potencial de limite.",
            "b) Potencial de repouso e potencial de ação.",
            "c) Potencial excitável e potencial inibitório.",
            "d) Potencial graduado e potencial de pico.",
          ],
          correctAnswer: "b) Potencial de repouso e potencial de ação.",
          comment:
            "O potencial de repouso é o estado basal da membrana, enquanto o potencial de ação é o impulso elétrico transitório que transmite informações ao longo do neurônio.",
          topic: "Potencial de Ação e Condução",
        },
        {
          question:
            "27. O que é o potencial de membrana em repouso de um neurônio?",
          options: [
            "a) O momento em que o neurônio está ativamente disparando impulsos.",
            "b) O potencial elétrico negativo através da membrana do neurônio quando não está transmitindo um sinal.",
            "c) O ponto em que o neurônio atinge seu limiar para disparar.",
            "d) A total ausência de diferença de carga através da membrana.",
          ],
          correctAnswer: "b) O potencial elétrico negativo através da membrana do neurônio quando não está transmitindo um sinal.",
          comment:
            "O potencial de membrana em repouso é a diferença de potencial elétrico através da membrana celular, geralmente cerca de -70mV, mantida pela bomba de sódio-potássio e pela maior permeabilidade ao potássio.",
          topic: "Potencial de Ação e Condução",
        },
        {
          question:
            "28. Qual íon é o principal responsável pela fase de despolarização de um potencial de ação?",
          options: [
            "a) Potássio (K⁺).",
            "b) Cloreto (Cl⁻).",
            "c) Cálcio (Ca²⁺).",
            "d) Sódio (Na⁺).",
          ],
          correctAnswer: "d) Sódio (Na⁺).",
          comment:
            "A despolarização ocorre quando os canais de sódio dependentes de voltagem se abrem, permitindo um rápido influxo de íons Na⁺ para dentro da célula, tornando o interior mais positivo.",
          topic: "Potencial de Ação e Condução",
        },
        {
          question:
            "29. Qual íon é o principal responsável pela fase de repolarização de um potencial de ação?",
          options: [
            "a) Sódio (Na⁺).",
            "b) Potássio (K⁺).",
            "c) Cloreto (Cl⁻).",
            "d) Cálcio (Ca²⁺).",
          ],
          correctAnswer: "b) Potássio (K⁺).",
          comment:
            "A repolarização ocorre quando os canais de potássio dependentes de voltagem se abrem, permitindo o efluxo de íons K⁺ para fora da célula, restaurando o potencial negativo da membrana.",
          topic: "Potencial de Ação e Condução",
        },
        {
          question:
            "30. O que é o período refratário absoluto de um neurônio?",
          options: [
            "a) O período em que o neurônio pode disparar um potencial de ação, mas apenas com um estímulo muito forte.",
            "b) O período em que o neurônio está completamente incapaz de disparar outro potencial de ação, independentemente da força do estímulo.",
            "c) O período em que o neurônio está em repouso.",
            "d) O período em que os neurotransmissores são liberados.",
          ],
          correctAnswer: "b) O período em que o neurônio está completamente incapaz de disparar outro potencial de ação, independentemente da força do estímulo.",
          comment:
            "O período refratário absoluto ocorre durante a fase de despolarização e início da repolarização, quando os canais de sódio estão inativados, impedindo a geração de um novo potencial de ação.",
          topic: "Potencial de Ação e Condução",
        },
        {
          question:
            "31. O que é o período refratário relativo de um neurônio?",
          options: [
            "a) O período em que o neurônio está completamente incapaz de disparar outro potencial de ação.",
            "b) O período em que o neurônio pode disparar um potencial de ação, mas apenas com um estímulo mais forte que o normal.",
            "c) O período em que o neurônio está em repouso.",
            "d) O período de liberação de neurotransmissores.",
          ],
          correctAnswer: "b) O período em que o neurônio pode disparar um potencial de ação, mas apenas com um estímulo mais forte que o normal.",
          comment:
            "O período refratário relativo ocorre após o período absoluto, durante a fase de hiperpolarização. Embora alguns canais de sódio estejam se recuperando, é necessário um estímulo mais intenso para atingir o limiar e gerar um novo potencial de ação.",
          topic: "Potencial de Ação e Condução",
        },
        {
          question:
            "32. Qual a função da bomba de sódio-potássio (Na⁺/K⁺ ATPase) na manutenção do potencial de repouso?",
          options: [
            "a) Gerar o potencial de ação.",
            "b) Transportar ativamente 3 Na⁺ para fora e 2 K⁺ para dentro da célula, mantendo o gradiente eletroquímico.",
            "c) Degradar neurotransmissores.",
            "d) Abrir canais de íons.",
          ],
          correctAnswer: "b) Transportar ativamente 3 Na⁺ para fora e 2 K⁺ para dentro da célula, mantendo o gradiente eletroquímico.",
          comment:
            "A bomba de Na⁺/K⁺ ATPase é um transportador ativo que, através do consumo de ATP, bombeia 3 íons Na⁺ para fora e 2 íons K⁺ para dentro da célula, estabelecendo e mantendo os gradientes de concentração de íons que são essenciais para o potencial de repouso.",
          topic: "Potencial de Ação e Condução",
        },
        {
          question:
            "33. O que é o limiar de excitação de um neurônio?",
          options: [
            "a) O nível de despolarização necessário para gerar um potencial de ação.",
            "b) O potencial de membrana em repouso.",
            "c) O ponto em que o neurônio libera neurotransmissores.",
            "d) A magnitude máxima de um potencial de ação.",
          ],
          correctAnswer: "a) O nível de despolarização necessário para gerar um potencial de ação.",
          comment:
            "O limiar de excitação é o nível crítico de despolarização que, se atingido, desencadeia a abertura em massa dos canais de sódio dependentes de voltagem e a consequente geração de um potencial de ação.",
          topic: "Potencial de Ação e Condução",
        },
        {
          question:
            "34. O que significa a propriedade 'tudo ou nada' do potencial de ação?",
          options: [
            "a) Ou o neurônio dispara muitos potenciais de ação, ou nenhum.",
            "b) Se o limiar for atingido, o potencial de ação dispara com sua amplitude e forma máximas, ou não dispara de forma alguma.",
            "c) O potencial de ação pode ter amplitudes variáveis.",
            "d) Apenas alguns neurônios podem gerar potenciais de ação.",
          ],
          correctAnswer: "b) Se o limiar for atingido, o potencial de ação dispara com sua amplitude e forma máximas, ou não dispara de forma alguma.",
          comment:
            "A propriedade 'tudo ou nada' significa que, uma vez que o limiar é atingido, o potencial de ação se propaga com intensidade e duração fixas, independentemente da força do estímulo que o iniciou (desde que seja acima do limiar).",
          topic: "Potencial de Ação e Condução",
        },
        {
          question:
            "35. Qual a direção normal da condução do impulso nervoso em um neurônio?",
          options: [
            "a) Do axônio para o dendrito.",
            "b) Do terminal axônico para o corpo celular.",
            "c) Do corpo celular para os dendritos.",
            "d) Do dendrito/corpo celular para o axônio.",
          ],
          correctAnswer: "d) Do dendrito/corpo celular para o axônio.",
          comment:
            "O impulso nervoso geralmente é gerado na zona de gatilho (próximo ao corpo celular, no axônio) e se propaga unidirecionalmente ao longo do axônio, para os terminais axônicos.",
          topic: "Potencial de Ação e Condução",
        },
        {
          question: "36. A sinapse elétrica é caracterizada por:",
          options: [
            "a) Liberação de neurotransmissores.",
            "b) Fenda sináptica larga e comunicação lenta.",
            "c) Junções comunicantes (gap junctions) e transmissão rápida e bidirecional de íons.",
            "d) Receptores metabotrópicos.",
          ],
          correctAnswer: "c) Junções comunicantes (gap junctions) e transmissão rápida e bidirecional de íons.",
          comment:
            "Sinapses elétricas permitem a passagem direta e rápida de corrente iônica de uma célula para outra através de junções comunicantes, possibilitando a sincronização da atividade neuronal.",
          topic: "Sinapses Elétricas vs. Químicas",
        },
        {
          question:
            "37. Qual a principal vantagem da sinapse química sobre a sinapse elétrica?",
          options: [
            "a) Velocidade de transmissão.",
            "b) Menor gasto energético.",
            "c) Maior flexibilidade e modulação do sinal.",
            "d) Ausência de neurotransmissores.",
          ],
          correctAnswer: "c) Maior flexibilidade e modulação do sinal.",
          comment:
            "Embora mais lentas, as sinapses químicas oferecem maior plasticidade e modulação do sinal através de diferentes neurotransmissores e receptores, permitindo respostas mais complexas e adaptativas.",
          topic: "Sinapses Elétricas vs. Químicas",
        },
        {
          question:
            "38. O que é a potenciação pós-tetânica?",
          options: [
            "a) Um enfraquecimento temporário da sinapse.",
            "b) Um aumento de curta duração na força da sinapse após um período de alta frequência de estimulação.",
            "c) A inibição de sinapses adjacentes.",
            "d) A diminuição da liberação de neurotransmissores.",
          ],
          correctAnswer: "b) Um aumento de curta duração na força da sinapse após um período de alta frequência de estimulação.",
          comment:
            "A potenciação pós-tetânica é um fenômeno de plasticidade de curta duração onde a sinapse se torna transitoriamente mais eficaz na transmissão do sinal após um trem de potenciais de ação de alta frequência no neurônio pré-sináptico, geralmente devido ao acúmulo de cálcio intracelular.",
          topic: "Plasticidade Sináptica",
        },
        {
          question:
            "39. O que é plasticidade homeostática no contexto da neurofisiologia?",
          options: [
            "a) Mecanismos que causam a morte de neurônios.",
            "b) Mecanismos que mantêm a atividade neuronal dentro de um intervalo funcional estável, apesar das mudanças na atividade sináptica.",
            "c) A degradação constante de neurotransmissores.",
            "d) A formação de novas sinapses continuamente.",
          ],
          correctAnswer: "b) Mecanismos que mantêm a atividade neuronal dentro de um intervalo funcional estável, apesar das mudanças na atividade sináptica.",
          comment:
            "A plasticidade homeostática refere-se aos mecanismos regulatórios que permitem aos neurônios e circuitos neuronais manterem a estabilidade da sua atividade e excitabilidade, evitando que se tornem excessivamente excitados ou inibidos. É um contraponto à plasticidade hebbiana (LTP/LTD) que fortalece/enfraquece sinapses específicas.",
          topic: "Plasticidade Sináptica",
        },
        {
          question:
            "40. Qual é o papel dos canais de potássio (K⁺) dependentes de voltagem na repolarização da membrana após um potencial de ação?",
          options: [
            "a) Causar despolarização adicional.",
            "b) Hiperpolarizar a membrana excessivamente.",
            "c) Remover cargas positivas da célula, restaurando o potencial de repouso negativo.",
            "d) Trazer cargas positivas para dentro da célula.",
          ],
          correctAnswer: "c) Remover cargas positivas da célula, restaurando o potencial de repouso negativo.",
          comment:
            "Após a despolarização inicial do potencial de ação (causada pelo influxo de Na⁺), os canais de K⁺ dependentes de voltagem abrem-se lentamente. A saída de K⁺ (íons positivos) da célula rapidamente repolariza a membrana, restaurando seu potencial negativo de repouso e encerrando o potencial de ação.",
          topic: "Potencial de Ação e Condução",
        },
      ];

      function buildQuiz() {
        const output = [];

        questions.forEach((currentQuestion, questionNumber) => {
          const options = [];
          for (let i = 0; i < currentQuestion.options.length; i++) {
            options.push(
              `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
                <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
                ${currentQuestion.options[i]}
              </label>`
            );
          }

          output.push(
            `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
              <div class="question">${currentQuestion.question}</div>
              <div class="options">${options.join("")}</div>
              <div class="comment" id="comment-${questionNumber}"></div>
            </div>`
          );
        });

        quizContainer.innerHTML = output.join("");
      }

      function showResults() {
        wrongQuestionIndices = []; 
        errorCountByTopic = {}; 
        totalAnsweredQuestionsByTopic = {}; 
        currentWrongQuestionIndex = -1; 
        hasErrors = false; 
        isShowingErrors = false; 
        isShowingDiagnosis = false;

        errorDiagnosisSection.style.display = 'none';
        topicsToReviewList.innerHTML = ''; 

        const answerContainers = quizContainer.querySelectorAll(".options");
        let correctAnswers = 0;

        questions.forEach((currentQuestion, questionNumber) => {
          const answerContainer = answerContainers[questionNumber];
          const userAnswerElement = answerContainer.querySelector('.option.selected');
          const userAnswerValue = userAnswerElement ? userAnswerElement.dataset.value : undefined;
          const commentDiv = document.getElementById(`comment-${questionNumber}`);

          // Limpa estados anteriores
          const allOptions = answerContainer.querySelectorAll('.option');
          allOptions.forEach(option => {
            option.classList.remove('correct', 'incorrect');
            const scissorIcon = option.querySelector('.scissor-icon');
            if (scissorIcon) scissorIcon.classList.remove('hidden');
          });
          if (commentDiv) commentDiv.classList.remove('show');


          const optionElements = answerContainer.querySelectorAll('.option');
          optionElements.forEach(option => {
            const scissorIcon = option.querySelector('.scissor-icon');

            if (option === userAnswerElement && scissorIcon) {
                scissorIcon.classList.add('hidden');
            } 
            
            if (option.dataset.value === currentQuestion.correctAnswer) {
                option.classList.add('correct');
                if (commentDiv && currentQuestion.comment) {
                    commentDiv.textContent = currentQuestion.comment;
                    commentDiv.classList.add('show');
                }
            }
          });

          // ***************************************************************
          // Lógica crucial: Apenas contabiliza se a questão foi respondida
          // ***************************************************************
          if (userAnswerElement) { 
            totalAnsweredQuestionsByTopic[currentQuestion.topic] = (totalAnsweredQuestionsByTopic[currentQuestion.topic] || 0) + 1;

            if (userAnswerValue !== currentQuestion.correctAnswer) {
              userAnswerElement.classList.add('incorrect');
              wrongQuestionIndices.push(questionNumber);
              hasErrors = true; 

              // Incrementa o contador de erros para este tópico
              errorCountByTopic[currentQuestion.topic] = (errorCountByTopic[currentQuestion.topic] || 0) + 1;
            } else {
              correctAnswers++;
            }
          }
          // ***************************************************************
          // Fim da lógica crucial
          // ***************************************************************
        });

        resultsContainer.textContent = `Você acertou ${correctAnswers} de ${questions.length} questões.`;
        
        // Rola a página totalmente para baixo para exibir o resultado
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });

        if (hasErrors) {
            errorNavBtn.style.display = 'flex';
            arrowIcon.textContent = '⬆️'; 
            buttonText.textContent = 'Diagnóstico de Erros'; 
            isShowingErrors = false; 
            isShowingDiagnosis = false; 
        } else {
            errorNavBtn.style.display = 'none';
        }
      }

      function scrollToQuestion(index) {
        const questionCard = document.getElementById(`question-${index}`);
        if (questionCard) {
          questionCard.scrollIntoView({ behavior: 'smooth', block: 'center' }); 
        }
      }
      
      function scrollToDiagnosis() {
          errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }

      quizContainer.addEventListener("click", function (event) {
        const clickedElement = event.target;
        const optionElement = clickedElement.closest('.option');

        if (optionElement) {
            if (clickedElement.classList.contains("scissor-icon")) {
                optionElement.classList.toggle("struck-through");
            } 
            else {
                const questionNumber = optionElement.dataset.question;
                const currentQuestionOptions = quizContainer.querySelectorAll(`.option[data-question=\"${questionNumber}\"]`);
                currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
                
                optionElement.classList.add("selected");
            }
        }
      });

      errorNavBtn.addEventListener("click", function() {
        if (!hasErrors) { 
            errorNavBtn.style.display = 'none';
            return;
        }

        if (!isShowingErrors && !isShowingDiagnosis) { 
            if (wrongQuestionIndices.length > 0) {
                isShowingErrors = true; 
                currentWrongQuestionIndex = 0; 
                arrowIcon.textContent = '⬇️'; 
                buttonText.textContent = `Próximo Erro (${currentWrongQuestionIndex + 1}/${wrongQuestionIndices.length})`;
                scrollToQuestion(wrongQuestionIndices[currentWrongQuestionIndex]);
            } else {
                isShowingDiagnosis = true;
                arrowIcon.textContent = '⬆️'; 
                buttonText.textContent = 'Diagnóstico de Erros'; 
                
                topicsToReviewList.innerHTML = ''; 
                for (const topic in errorCountByTopic) {
                    const errorsInTopic = errorCountByTopic[topic];
                    const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0; 
                    
                    if (totalAnsweredInTopic > 0) { 
                        const percentage = ((errorsInTopic / totalAnsweredInTopic) * 100).toFixed(1); 
                        const li = document.createElement('li');
                        li.textContent = `${topic}: ${percentage}% de erros (${errorsInTopic} de ${totalAnsweredInTopic} questões respondidas)`;
                        topicsToReviewList.appendChild(li);
                    }
                }
                errorDiagnosisSection.style.display = 'block'; 
                scrollToDiagnosis();
                errorNavBtn.style.display = 'none'; 
            }

        } else if (isShowingErrors) { 
            currentWrongQuestionIndex++;
            if (currentWrongQuestionIndex < wrongQuestionIndices.length) {
                scrollToQuestion(wrongQuestionIndices[currentWrongQuestionIndex]);
                buttonText.textContent = `Próximo Erro (${currentWrongQuestionIndex + 1}/${wrongQuestionIndices.length})`;
            } else {
                isShowingErrors = false; 
                isShowingDiagnosis = true;
                arrowIcon.textContent = '⬇️'; 
                buttonText.textContent = 'Diagnóstico de Erros'; 

                topicsToReviewList.innerHTML = ''; 
                for (const topic in errorCountByTopic) {
                    const errorsInTopic = errorCountByTopic[topic];
                    const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
                    
                    if (totalAnsweredInTopic > 0) {
                        const percentage = ((errorsInTopic / totalAnsweredInTopic) * 100).toFixed(1); 
                        const li = document.createElement('li');
                        li.textContent = `${topic}: ${percentage}% de erros (${errorsInTopic} de ${totalAnsweredInTopic} questões respondidas)`;
                        topicsToReviewList.appendChild(li);
                    }
                }
                errorDiagnosisSection.style.display = 'block'; 
                scrollToDiagnosis();
                errorNavBtn.style.display = 'none'; 
            }
        } 
      });

      submitButton.addEventListener("click", showResults);

      buildQuiz();
    </script>
  </body>
</html>
