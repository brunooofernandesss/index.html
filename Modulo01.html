<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simulado Módulo I</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        background-color: #f4f4f4;
      }

      .quiz-container {
        max-width: 800px;
        width: 100%;
      }

      h1 {
        color: #333;
        text-align: center;
        margin-bottom: 30px;
      }

      .card {
        background-color: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .question {
        font-weight: bold;
        margin-bottom: 10px;
        color: #333;
      }

      .options {
        margin-top: 15px;
      }

      .option {
        display: flex; /* Para alinhar imagem e texto */
        align-items: center;
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.2s ease;
        position: relative; /* Para posicionar a tesoura */
      }

      .option:hover {
        background-color: #e9e9e9;
      }

      .option.selected {
        background-color: #d1e7dd;
        border-color: #28a745;
      }

      .option.correct {
        background-color: #d4edda;
        border-color: #28a745;
      }

      .option.incorrect {
        background-color: #f8d7da;
        border-color: #dc3545;
      }

      .submit-btn {
        display: block;
        width: 100%;
        padding: 15px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 18px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        margin-top: 30px;
      }

      .submit-btn:hover {
        background-color: #0056b3;
      }

      .results {
        text-align: center;
        margin-top: 30px;
        font-size: 20px;
        font-weight: bold;
        color: #333;
      }

      .scissor-icon {
        margin-right: 10px; /* Espaço entre a tesoura e o texto da opção */
        width: 20px; /* Ajuste conforme o tamanho da sua imagem */
        height: 20px; /* Ajuste conforme o tamanho da sua imagem */
        opacity: 0.5; /* Transparência como no original */
        cursor: pointer;
      }

      .scissor-icon.hidden {
        display: none;
      }

      .struck-through {
        text-decoration: line-through;
        color: #888;
      }

      .comment {
        margin-top: 10px;
        padding: 10px;
        background-color: #f0f0f0;
        border-left: 4px solid #007bff;
        font-style: italic;
        color: #555;
        display: none; /* Escondido por padrão */
      }
      .comment.show {
        display: block; /* Mostrado quando ativado */
      }

      /* Estilos para o botão de navegação de erro / diagnóstico */
      .error-nav-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #dc3545; /* Vermelho para erro */
        color: white;
        border: none;
        border-radius: 50%; /* Torna o botão redondo */
        width: 60px;
        height: 60px;
        font-size: 24px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        display: none; /* Escondido por padrão */
        flex-direction: column; /* Para empilhar o ícone e o contador */
        padding: 5px; /* Ajuste o padding para acomodar texto maior */
        box-sizing: border-box; /* Garante que padding não aumente o tamanho total */
        text-align: center;
      }

      .error-nav-btn:hover {
        background-color: #c82333;
      }

      .error-nav-btn .arrow-icon {
        font-size: 30px; /* Tamanho da seta */
        line-height: 1; /* Ajuste para centralizar */
      }

      .error-nav-btn .button-text {
        font-size: 12px; /* Tamanho do texto abaixo da seta */
        line-height: 1;
        margin-top: 2px; /* Espaço entre a seta e o texto */
      }
      
      /* Estilos para a seção de diagnóstico de erros */
      .error-diagnosis-section {
          margin-top: 50px;
          padding: 30px;
          background-color: #ffe0b2; /* Um laranja claro ou similar */
          border-radius: 8px;
          box-shadow: 0 2px 5px rgba(0,0,0,0.15);
          display: none; /* Escondido por padrão */
          text-align: center;
          font-size: 1.1em;
          color: #333;
      }

      .error-diagnosis-section h2 {
          color: #e65100; /* Laranja mais escuro */
          margin-bottom: 20px;
          font-size: 1.8em;
      }

      .error-diagnosis-section ul {
          list-style: none; /* Remove marcadores de lista */
          padding: 0;
          margin: 0;
      }

      .error-diagnosis-section li {
          background-color: #ff9800; /* Laranja */
          color: white;
          padding: 8px 15px;
          margin: 8px 0;
          border-radius: 5px;
          display: inline-block; /* Para que os itens fiquem lado a lado */
          margin-right: 10px;
          font-weight: bold;
      }
      .error-diagnosis-section li:last-child {
          margin-right: 0;
      }
    </style>
  </head>
  <body>
    <div class="quiz-container">
      <h1>Simulado de Módulo I</h1>
      <div id="quiz"></div>
      <button class="submit-btn" id="submit">Verificar Respostas</button>
      <div id="results" class="results"></div>

      <div id="errorDiagnosis" class="error-diagnosis-section">
        <h2>Diagnóstico de Erros</h2>
        <p>Parece que você precisa revisar os seguintes assuntos:</p>
        <ul id="topicsToReview">
          </ul>
      </div>
    </div>

    <button class="error-nav-btn" id="errorNavBtn">
      <span class="arrow-icon">⬇️</span> <span class="button-text">Próximo Erro</span> </button>

    <script>
      const quizContainer = document.getElementById("quiz");
      const submitButton = document.getElementById("submit");
      const resultsContainer = document.getElementById("results");
      const errorNavBtn = document.getElementById("errorNavBtn");
      const arrowIcon = errorNavBtn.querySelector(".arrow-icon");
      const buttonText = errorNavBtn.querySelector(".button-text"); // Novo para o texto do botão
      const errorDiagnosisSection = document.getElementById("errorDiagnosis");
      const topicsToReviewList = document.getElementById("topicsToReview");

      let wrongQuestionIndices = []; // Array para armazenar os índices das questões marcadas erradas
      let wrongQuestionTopics = new Set(); // Set para armazenar tópicos únicos dos erros
      let currentWrongQuestionIndex = -1; // Começa em -1 para que o primeiro clique leve ao índice 0
      let hasErrors = false; // Flag para verificar se há erros
      let isInErrorReviewMode = false; // Flag para controlar se estamos navegando nos erros ou prontos para diagnóstico

      const questions = [
        {
          question:
            "1. Um paciente é admitido no pronto-socorro após sofrer um acidente automobilístico. Ao realizar o exame físico, o médico descreve uma fratura na tíbia, localizada na região distal da perna. Qual plano anatômico divide o corpo em metades superior e inferior, sendo relevante para a descrição da localização da fratura?",
          options: [
            "a) Plano sagital",
            "b) Plano frontal (coronal)",
            "c) Plano transverso (horizontal)",
            "d) Plano mediano",
          ],
          correctAnswer: "c) Plano transverso (horizontal)",
          comment:
            "O plano transverso (horizontal) divide o corpo em metades superior e inferior, sendo fundamental para descrever a localização de estruturas ao longo do eixo vertical.",
          topic: "Anatomia",
        },
        {
          question:
            "2. Durante uma aula prática de anatomia, um estudante realiza o movimento de abdução do braço. Qual eixo anatômico é perpendicular ao plano de movimento realizado pelo estudante?",
          options: [
            "a) Eixo sagital",
            "b) Eixo frontal (coronal)",
            "c) Eixo longitudinal",
            "d) Eixo transverso",
          ],
          correctAnswer: "a) Eixo sagital",
          comment:
            "O movimento de abdução (afastamento da linha média) ocorre no plano frontal (coronal) e é perpendicular ao eixo sagital.",
          topic: "Anatomia",
        },
        {
          question:
            "3. Um atleta de ginástica olímpica realiza um movimento de rotação do tronco durante sua apresentação. Qual plano anatômico é utilizado como referência para descrever esse movimento?",
          options: [
            "a) Plano sagital",
            "b) Plano frontal (coronal)",
            "c) Plano transverso (horizontal)",
            "d) Plano mediano",
          ],
          correctAnswer: "c) Plano transverso (horizontal)",
          comment:
            "Movimentos de rotação, como a rotação do tronco, ocorrem principalmente no plano transverso (horizontal), em torno do eixo longitudinal.",
          topic: "Anatomia",
        },
        {
          question:
            "4. Um paciente com suspeita de lesão medular é submetido a um exame de ressonância magnética. Qual plano de imagem permite visualizar a medula espinhal em sua extensão longitudinal, dividindo o corpo em metades direita e esquerda?",
          options: [
            "a) Plano sagital",
            "b) Plano frontal (coronal)",
            "c) Plano transverso (horizontal)",
            "d) Plano mediano",
          ],
          correctAnswer: "a) Plano sagital",
          comment:
            "O plano sagital divide o corpo em metades direita e esquerda, sendo ideal para visualizar estruturas longitudinais como a medula espinhal em um corte lateral.",
          topic: "Anatomia",
        },
        {
          question:
            "5. Durante a realização de um procedimento cirúrgico, o cirurgião realiza uma incisão na pele do abdome, seguindo uma linha paralela à linha média do corpo. Qual termo anatômico descreve a localização dessa incisão em relação à linha média?",
          options: ["a) Medial", "b) Lateral", "c) Proximal", "d) Distal"],
          correctAnswer: "b) Lateral",
          comment:
            "O termo 'lateral' descreve uma estrutura que está mais afastada da linha média do corpo.",
          topic: "Anatomia",
        },
        {
          question:
            "6. Um radiologista descreve uma lesão no fêmur como estando localizada na porção mais próxima do tronco. Qual termo anatômico ele utilizaria para descrever essa localização?",
          options: ["a) Distal", "b) Proximal", "c) Superior", "d) Inferior"],
          correctAnswer: "b) Proximal",
          comment:
            "O termo 'proximal' descreve uma estrutura que está mais próxima da origem ou do ponto de fixação ao tronco do corpo.",
          topic: "Anatomia",
        },
        {
          question:
            "7. Em uma cirurgia de reconstrução do ligamento cruzado anterior, o cirurgião precisa acessar as estruturas localizadas na parte de trás do joelho. Qual termo anatômico descreve essa região?",
          options: [
            "a) Anterior",
            "b) Posterior",
            "c) Superior",
            "d) Inferior",
          ],
          correctAnswer: "b) Posterior",
          comment:
            "O termo 'posterior' (ou dorsal) descreve a parte de trás do corpo ou de uma estrutura.",
          topic: "Anatomia",
        },
        {
          question:
            "8. Ao descrever a posição anatômica de um paciente, as palmas das mãos estão voltadas para qual direção?",
          options: [
            "a) Anteriormente (para frente)",
            "b) Posteriormente (para trás)",
            "c) Medialmente (para o centro)",
            "d) Lateralmente (para fora)",
          ],
          correctAnswer: "a) Anteriormente (para frente)",
          comment:
            "Na posição anatômica padrão, as palmas das mãos estão voltadas para frente (anteriormente).",
          topic: "Anatomia",
        },
        {
          question:
            "9. Um fisioterapeuta orienta um paciente a realizar um movimento de flexão do cotovelo. Qual plano anatômico está sendo utilizado principalmente durante esse movimento?",
          options: [
            "a) Plano sagital",
            "b) Plano frontal (coronal)",
            "c) Plano transverso (horizontal)",
            "d) Plano oblíquo",
          ],
          correctAnswer: "a) Plano sagital",
          comment:
            "A flexão e extensão (como no cotovelo) são movimentos que ocorrem principalmente no plano sagital, em torno de um eixo transverso.",
          topic: "Anatomia",
        },
        {
          question:
            "10. Qual termo anatômico descreve uma estrutura localizada mais próxima da superfície do corpo?",
          options: ["a) Profundo", "b) Superficial", "c) Médio", "d) Interno"],
          correctAnswer: "b) Superficial",
          comment:
            "O termo 'superficial' descreve uma estrutura que está mais próxima da superfície externa do corpo, em oposição a 'profundo'.",
          topic: "Anatomia",
        },
        {
          question:
            "11. Qual a finalidade da fixação em um protocolo de preparação de lâminas histológicas?",
          options: [
            "a) Realçar estruturas celulares específicas.",
            "b) Preservar a estrutura celular e tecidual.",
            "c) Tornar o tecido mais resistente ao corte.",
            "d) Remover o excesso de água do tecido.",
          ],
          correctAnswer: "b) Preservar a estrutura celular e tecidual.",
          comment:
            "A fixação é o primeiro passo e visa manter a arquitetura celular e tecidual o mais próximo possível do estado vivo, impedindo a degradação.",
          topic: "Histologia",
        },
        {
          question:
            "12. Qual o objetivo da desidratação em um protocolo de preparação de lâminas histológicas?",
          options: [
            "a) Remover o excesso de água do tecido.",
            "b) Tornar o tecido mais transparente.",
            "c) Realçar estruturas celulares específicas.",
            "d) Preservar a estrutura celular e tecidual.",
          ],
          correctAnswer: "a) Remover o excesso de água do tecido.",
          comment:
            "A desidratação, geralmente com concentrações crescentes de álcool, remove a água do tecido para permitir a infiltração de parafina, que é hidrofóbica.",
          topic: "Histologia",
        },
        {
          question:
            "13. Qual o objetivo da coloração em um protocolo de preparação de lâminas histológicas?",
          options: [
            "a) Preservar a estrutura celular e tecidual.",
            "b) Tornar o tecido mais resistente ao corte.",
            "c) Realçar estruturas celulares específicas.",
            "d) Remover o excesso de água do tecido.",
          ],
          correctAnswer: "c) Realçar estruturas celulares específicas.",
          comment:
            "A coloração (ex: Hematoxilina e Eosina) permite visualizar diferentes componentes celulares e teciduais, que seriam transparentes sem ela, facilitando a identificação microscópica.",
          topic: "Histologia",
        },
        {
          question: "14. Qual a função da objetiva em um microscópio óptico?",
          options: [
            "a) Iluminar a amostra.",
            "b) Ampliar a imagem da amostra.",
            "c) Ajustar o foco da imagem.",
            "d) Controlar a quantidade de luz que atinge a amostra.",
          ],
          correctAnswer: "b) Ampliar a imagem da amostra.",
          comment:
            "As objetivas são as lentes localizadas próximas à amostra e são responsáveis pela primeira e maior ampliação da imagem, sendo a mais crítica para a resolução.",
          topic: "Histologia",
        },
        {
          question: "15. Qual a função da ocular em um microscópio óptico?",
          options: [
            "a) Iluminar a amostra.",
            "b) Ampliar a imagem da amostra.",
            "c) Ajustar o foco da imagem.",
            "d) Controlar a quantidade de luz que atinge a amostra.",
          ],
          correctAnswer: "b) Ampliar a imagem da amostra.",
          comment:
            "A ocular (ou lente ocular) é a lente onde o observador coloca o olho, e sua função é ampliar a imagem já ampliada pela objetiva, formando a imagem final que é vista.",
          topic: "Histologia",
        },
        {
          question: "16. Qual a função do condensador em um microscópio óptico?",
          options: [
            "a) Iluminar a amostra.",
            "b) Ampliar a imagem da amostra.",
            "c) Ajustar o foco da imagem.",
            "d) Controlar a quantidade de luz que atinge a amostra.",
          ],
          correctAnswer: "d) Controlar a quantidade de luz que atinge a amostra.",
          comment:
            "O condensador está localizado abaixo da platina e sua função é coletar e focar os raios de luz do iluminador sobre a amostra, otimizando a iluminação para visualização.",
          topic: "Histologia",
        },
        {
          question:
            "17. Uma célula é colocada em uma solução onde a concentração de solutos é maior fora da célula do que dentro dela. Essa solução é considerada:",
          options: [
            "a) Hipertônica.",
            "b) Isotônica.",
            "c) Hipotônica.",
            "d) Neutra.",
          ],
          correctAnswer: "a) Hipertônica.",
          comment:
            "Em uma solução hipertônica, a maior concentração de soluto fora da célula faz com que a água saia da célula por osmose, levando à sua desidratação (murchamento).",
          topic: "Fisiologia Celular",
        },
        {
          question:
            "18. Uma célula é colocada em uma solução onde a concentração de solutos é igual dentro e fora da célula. Essa solução é considerada:",
          options: [
            "a) Hipertônica.",
            "b) Isotônica.",
            "c) Hipotônica.",
            "d) Neutra.",
          ],
          correctAnswer: "b) Isotônica.",
          comment:
            "Em uma solução isotônica, a concentração de solutos é equilibrada, resultando em um movimento líquido de água nulo através da membrana celular, mantendo o volume da célula.",
          topic: "Fisiologia Celular",
        },
        {
          question:
            "19. Uma célula é colocada em uma solução onde a concentração de solutos é menor fora da célula do que dentro dela. Essa solução é considerada:",
          options: [
            "a) Hipertônica.",
            "b) Isotônica.",
            "c) Hipotônica.",
            "d) Neutra.",
          ],
          correctAnswer: "c) Hipotônica.",
          comment:
            "Em uma solução hipotônica, a menor concentração de soluto fora da célula faz com que a água entre na célula por osmose, levando ao seu inchaço e possível lise (estouro).",
          topic: "Fisiologia Celular",
        },
        {
          question:
            "20. Qual o efeito de colocar uma célula em um meio hipertônico?",
          options: [
            "a) A célula incha e pode estourar.",
            "b) A célula murcha.",
            "c) Não há alteração no volume da célula.",
            "d) A célula se divide rapidamente.",
          ],
          correctAnswer: "b) A célula murcha.",
          comment:
            "Em um meio hipertônico, a água se move para fora da célula por osmose, causando a perda de volume e o murchamento celular.",
          topic: "Fisiologia Celular",
        },
        {
          question:
            "21. Qual a importância do uso de luvas de proteção em ambientes de saúde, segundo a NR 32?",
          options: [
            "a) Proteger as mãos contra frio excessivo.",
            "b) Reduzir o risco de contaminação das mãos e a transmissão de microrganismos.",
            "c) Facilitar a manipulação de objetos quentes.",
            "d) Prevenir calos e bolhas nas mãos.",
          ],
          correctAnswer: "b) Reduzir o risco de contaminação das mãos e a transmissão de microrganismos.",
          comment:
            "A NR 32 enfatiza o uso de luvas como barreira de proteção para prevenir a exposição a agentes biológicos e químicos, protegendo tanto o profissional quanto o paciente.",
          topic: "NR 32",
        },
        {
          question:
            "22. A NR 32 estabelece medidas de proteção para a segurança e saúde dos trabalhadores de serviços de saúde, visando:",
          options: [
            "a) Apenas a proteção contra acidentes com produtos químicos.",
            "b) Reduzir os riscos de acidentes e doenças ocupacionais.",
            "c) Regulamentar o horário de trabalho dos funcionários.",
            "d) Controlar a qualidade dos produtos utilizados nos hospitais.",
          ],
          correctAnswer: "b) Reduzir os riscos de acidentes e doenças ocupacionais.",
          comment:
            "O objetivo primordial da NR 32 é a segurança e saúde dos trabalhadores, minimizando a exposição a riscos inerentes aos serviços de saúde e prevenindo doenças e acidentes do trabalho.",
          topic: "NR 32",
        },
        {
          question: "23. Qual o significado da sigla EPI, conforme a NR 32?",
          options: [
            "a) Equipamento de Proteção Interna",
            "b) Equipamento de Prevenção de Infecções",
            "c) Equipamento de Proteção Individual",
            "d) Equipamento Padrão de Higiene",
          ],
          correctAnswer: "c) Equipamento de Proteção Individual",
          comment:
            "EPI significa Equipamento de Proteção Individual, que são dispositivos ou produtos de uso pessoal destinados a proteger o trabalhador de riscos.",
          topic: "NR 32",
        },
        {
          question:
            "24. Em relação aos resíduos de serviços de saúde, a NR 32 determina que:",
          options: [
            "a) Podem ser descartados em lixo comum, desde que bem embalados.",
            "b) Devem ser separados e descartados imediatamente após o uso, em recipientes apropriados.",
            "c) Podem ser acumulados por longos períodos antes do descarte.",
            "d) A responsabilidade do descarte é exclusiva da empresa coletora.",
          ],
          correctAnswer: "b) Devem ser separados e descartados imediatamente após o uso, em recipientes apropriados.",
          comment:
            "A NR 32 exige a segregação e o descarte correto dos Resíduos de Serviços de Saúde (RSS) em recipientes específicos e em tempo hábil para evitar contaminação e proliferação de vetores.",
          topic: "NR 32",
        },
        {
          question:
            "25. Qual a importância da higienização das mãos nos serviços de saúde, segundo a NR 32?",
          options: [
            "a) Apenas para fins estéticos.",
            "b) Prevenir a transmissão de microrganismos.",
            "c) Economizar água e sabão.",
            "d) Aumentar a durabilidade das luvas.",
          ],
          correctAnswer: "b) Prevenir a transmissão de microrganismos.",
          comment:
            "A higienização das mãos é a medida individual mais eficaz para prevenir a transmissão de infecções relacionadas à assistência à saúde (IRAS) e proteger os profissionais.",
          topic: "NR 32",
        },
        {
          question:
            "26. A NR 32 estabelece medidas de proteção contra riscos biológicos, incluindo:",
          options: [
            "a) Apenas o uso de máscaras.",
            "b) Somente a vacinação dos trabalhadores.",
            "c) Medidas de controle de engenharia, administrativas e de higiene.",
            "d) Apenas a proibição de comer em áreas de trabalho.",
          ],
          correctAnswer: "c) Medidas de controle de engenharia, administrativas e de higiene.",
          comment:
            "A NR 32 adota uma abordagem multifacetada para riscos biológicos, incluindo controles de engenharia (ex: isolamento de áreas), administrativos (ex: treinamentos, protocolos) e de higiene (ex: lavagem das mãos, EPIs).",
          topic: "NR 32",
        },
        {
          question:
            "27. Em relação aos riscos químicos, a NR 32 determina que:",
          options: [
            "a) Apenas o manuseio de substâncias corrosivas requer atenção.",
            "b) Apenas o uso de luvas é suficiente para a proteção.",
            "c) Os trabalhadores devem ser informados sobre os riscos e medidas de prevenção.",
            "d) O armazenamento de produtos químicos não precisa de regras específicas.",
          ],
          correctAnswer: "c) Os trabalhadores devem ser informados sobre os riscos e medidas de prevenção.",
          comment:
            "A NR 32 exige que os trabalhadores sejam devidamente informados sobre os produtos químicos que manipulam, seus riscos e as medidas de segurança e emergência.",
          topic: "NR 32",
        },
        {
          question:
            "28. Qual a importância do Programa de Controle Médico de Saúde Ocupacional (PCMSO) nos serviços de saúde, segundo a NR 32?",
          options: [
            "a) Apenas para realizar exames de rotina.",
            "b) Monitorar a saúde dos trabalhadores e prevenir doenças ocupacionais.",
            "c) Controlar a assiduidade dos funcionários.",
            "d) Determinar o salário dos trabalhadores.",
          ],
          correctAnswer: "b) Monitorar a saúde dos trabalhadores e prevenir doenças ocupacionais.",
          comment:
            "O PCMSO é um programa obrigatório que visa rastrear e diagnosticar precocemente agravos à saúde relacionados ao trabalho, monitorando a saúde dos funcionários.",
          topic: "NR 32",
        },
        {
          question:
            "29. Em relação aos riscos radiológicos, a NR 32 estabelece que:",
          options: [
            "a) Apenas hospitais grandes precisam se preocupar com isso.",
            "b) Todas as áreas com risco radiológico devem ser sinalizadas.",
            "c) A exposição à radiação é inofensiva em pequenas doses.",
            "d) A proteção é responsabilidade exclusiva do médico radiologista.",
          ],
          correctAnswer: "b) Todas as áreas com risco radiológico devem ser sinalizadas.",
          comment:
            "A sinalização adequada das áreas com risco radiológico é uma exigência da NR 32 para alertar e proteger trabalhadores e pacientes da exposição indevida à radiação.",
          topic: "NR 32",
        },
        {
          question:
            "30. Qual a importância da Comissão Interna de Prevenção de Acidentes (CIPA) nos serviços de saúde, segundo a NR 32?",
          options: [
            "a) Apenas para fiscalizar o uso de EPIs.",
            "b) Promover a saúde e segurança dos trabalhadores.",
            "c) Organizar eventos sociais na empresa.",
            "d) Distribuir benefícios aos funcionários.",
          ],
          correctAnswer: "b) Promover a saúde e segurança dos trabalhadores.",
          comment:
            "A CIPA atua na prevenção de acidentes e doenças decorrentes do trabalho, buscando a compatibilidade permanente entre o trabalho, a saúde e a segurança.",
          topic: "NR 32",
        },
        {
          question:
            "31. Em relação aos resíduos de serviços de saúde, a NR 32 determina que:",
          options: [
            "a) Podem ser misturados com lixo comum para facilitar o descarte.",
            "b) O descarte pode ser feito em qualquer lixeira, desde que seja plástico.",
            "c) Os resíduos devem ser separados e descartados em recipientes apropriados.",
            "d) A incineração é o único método de descarte permitido.",
          ],
          correctAnswer: "c) Os resíduos devem ser separados e descartados em recipientes apropriados.",
          comment:
            "A correta segregação dos resíduos de serviços de saúde em recipientes específicos é crucial para o manejo seguro e para prevenir a disseminação de patógenos.",
          topic: "NR 32",
        },
        {
          question:
            "32. Qual a importância do uso de Equipamentos de Proteção Individual (EPIs) nos serviços de saúde, segundo a NR 32?",
          options: [
            "a) Apenas para seguir normas de moda.",
            "b) Reduzir o risco de exposição a agentes nocivos à saúde.",
            "c) Aumentar o conforto dos trabalhadores.",
            "d) Diminuir a visibilidade dos funcionários.",
          ],
          correctAnswer: "b) Reduzir o risco de exposição a agentes nocivos à saúde.",
          comment:
            "Os EPIs são a principal barreira de proteção individual contra os diversos riscos presentes nos ambientes de saúde, como biológicos, químicos e físicos.",
          topic: "NR 32",
        },
        {
          question:
            "33. Qual a principal função do DNA nas células?",
          options: [
            "a) Armazenar energia.",
            "b) Catalisar reações químicas.",
            "c) Armazenar e transmitir informações genéticas.",
            "d) Transportar oxigênio.",
          ],
          correctAnswer: "c) Armazenar e transmitir informações genéticas.",
          comment:
            "O DNA é o repositório da informação genética em quase todos os organismos, contendo as instruções para o desenvolvimento, funcionamento e reprodução.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "34. Qual é o nome do processo de duplicação do DNA?",
          options: [
            "a) Transcrição",
            "b) Tradução",
            "c) Replicação",
            "d) Mutação",
          ],
          correctAnswer: "c) Replicação",
          comment:
            "A replicação do DNA é o processo pelo qual uma molécula de DNA é copiada para produzir duas moléculas idênticas de DNA, essencial para a divisão celular.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "35. Quais são as quatro bases nitrogenadas encontradas no DNA?",
          options: [
            "a) Adenina, Guanina, Citosina, Uracila",
            "b) Adenina, Timina, Citosina, Uracila",
            "c) Adenina, Guanina, Citosina, Timina",
            "d) Adenina, Guanina, Uracila, Timina",
          ],
          correctAnswer: "c) Adenina, Guanina, Citosina, Timina",
          comment:
            "As bases nitrogenadas do DNA são Adenina (A), Guanina (G), Citosina (C) e Timina (T). A Uracila (U) substitui a Timina no RNA.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "36. Qual das seguintes bases nitrogenadas não é encontrada no RNA?",
          options: [
            "a) Adenina",
            "b) Guanina",
            "c) Citosina",
            "d) Timina",
          ],
          correctAnswer: "d) Timina",
          comment:
            "No RNA, a base nitrogenada Timina (T) é substituída pela Uracila (U).",
          topic: "Biologia Molecular",
        },
        {
          question:
            "37. Qual é o processo de síntese de RNA a partir de uma fita molde de DNA?",
          options: [
            "a) Replicação",
            "b) Tradução",
            "c) Transcrição",
            "d) Mutação",
          ],
          correctAnswer: "c) Transcrição",
          comment:
            "A transcrição é o processo de sintetizar uma molécula de RNA usando uma fita de DNA como molde, transferindo a informação genética do DNA para o RNA.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "38. Onde ocorre a tradução (síntese de proteínas) na célula eucariótica?",
          options: [
            "a) Núcleo",
            "b) Mitocôndria",
            "c) Ribossomos (no citoplasma ou RER)",
            "d) Complexo de Golgi",
          ],
          correctAnswer: "c) Ribossomos (no citoplasma ou RER)",
          comment:
            "A tradução ocorre nos ribossomos, que podem estar livres no citoplasma ou associados ao Retículo Endoplasmático Rugoso (RER).",
          topic: "Biologia Molecular",
        },
        {
          question:
            "39. Qual é o papel do RNA mensageiro (mRNA) na síntese de proteínas?",
          options: [
            "a) Transportar aminoácidos para o ribossomo.",
            "b) Fazer parte da estrutura do ribossomo.",
            "c) Levar a informação genética do DNA para o ribossomo.",
            "d) Regular a expressão gênica.",
          ],
          correctAnswer: "c) Levar a informação genética do DNA para o ribossomo.",
          comment:
            "O mRNA carrega a sequência de códons, que são as instruções para a montagem dos aminoácidos na ordem correta para formar a proteína.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "40. Qual é a estrutura que liga os aminoácidos para formar uma proteína?",
          options: [
            "a) Ligação de hidrogênio",
            "b) Ligação dissulfeto",
            "c) Ligação peptídica",
            "d) Ligação glicosídica",
          ],
          correctAnswer: "c) Ligação peptídica",
          comment:
            "Os aminoácidos são unidos por ligações peptídicas durante a síntese de proteínas, formando uma cadeia polipeptídica.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "41. Uma alteração na sequência de nucleotídeos do DNA é chamada de:",
          options: [
            "a) Replicação",
            "b) Transcrição",
            "c) Tradução",
            "d) Mutação",
          ],
          correctAnswer: "d) Mutação",
          comment:
            "Mutação é qualquer alteração na sequência de DNA, que pode ser causada por erros na replicação ou por danos ao DNA.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "42. Qual enzima é responsável por sintetizar uma nova fita de DNA durante a replicação?",
          options: [
            "a) RNA polimerase",
            "b) DNA ligase",
            "c) DNA polimerase",
            "d) Helicase",
          ],
          correctAnswer: "c) DNA polimerase",
          comment:
            "A DNA polimerase é a enzima chave na replicação do DNA, catalisando a adição de nucleotídeos à nova fita em crescimento.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "43. Qual é o papel da enzima helicase na replicação do DNA?",
          options: [
            "a) Sintetizar a nova fita de DNA.",
            "b) Ligar os fragmentos de DNA.",
            "c) Abrir a dupla hélice de DNA.",
            "d) Corrigir erros na replicação.",
          ],
          correctAnswer: "c) Abrir a dupla hélice de DNA.",
          comment:
            "A helicase 'desenrola' e separa as duas fitas da dupla hélice do DNA, rompendo as ligações de hidrogênio entre as bases, para que a replicação possa ocorrer.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "44. Qual a função do RNA transportador (tRNA) na síntese de proteínas?",
          options: [
            "a) Levar a informação genética do DNA para o ribossomo.",
            "b) Fazer parte da estrutura do ribossomo.",
            "c) Transportar aminoácidos específicos para o ribossomo.",
            "d) Regular a expressão gênica.",
          ],
          correctAnswer: "c) Transportar aminoácidos específicos para o ribossomo.",
          comment:
            "O tRNA atua como um 'adaptador', lendo o códon no mRNA e trazendo o aminoácido correspondente para ser adicionado à cadeia polipeptidica em crescimento.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "45. O que é um códon no contexto da Biologia Molecular?",
          options: [
            "a) Um tipo de aminoácido.",
            "b) Uma sequência de três nucleotídeos no mRNA que especifica um aminoácido.",
            "c) Uma enzima que participa da replicação.",
            "d) Um segmento de DNA que não codifica proteína.",
          ],
          correctAnswer: "b) Uma sequência de três nucleotídeos no mRNA que especifica um aminoácido.",
          comment:
            "O códon é a unidade básica do código genético, sendo uma trinca de nucleotídeos no mRNA que 'codifica' um aminoácido específico ou um sinal de parada.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "46. Qual o processo de degradação de proteínas nas células?",
          options: [
            "a) Síntese proteica",
            "b) Proteólise",
            "c) Glicólise",
            "d) Oxidação",
          ],
          correctAnswer: "b) Proteólise",
          comment:
            "Proteólise é o processo de quebra de proteínas em peptídeos menores ou aminoácidos por meio de enzimas chamadas proteases.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "47. O que é um gene?",
          options: [
            "a) Uma molécula de proteína.",
            "b) Um segmento de DNA que contém informações para produzir uma molécula funcional (como uma proteína ou RNA).",
            "c) Um tipo de carboidrato.",
            "d) Uma estrutura presente apenas em células vegetais.",
          ],
          correctAnswer: "b) Um segmento de DNA que contém informações para informações para produzir uma molécula funcional (como uma proteína ou RNA).",
          comment:
            "Um gene é a unidade fundamental da hereditariedade, consistindo em uma sequência de DNA que codifica uma característica ou função específica.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "48. Qual a função do DNA polimerase durante a replicação do DNA em relação aos erros?",
          options: [
            "a) Apenas sintetizar a nova fita.",
            "b) Corrigir erros de pareamento de bases.",
            "c) Desempacotar o DNA.",
            "d) Juntar os fragmentos de DNA.",
          ],
          correctAnswer: "b) Corrigir erros de pareamento de bases.",
          comment:
            "Além de sintetizar o DNA, a DNA polimerase possui atividade de revisão (proofreading), corrigindo a maioria dos erros de pareamento de bases durante a replicação, garantindo a fidelidade da cópia genética.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "49. Em que sentido a nova fita de DNA é sintetizada durante a replicação?",
          options: [
            "a) 3' para 5'",
            "b) 5' para 3'",
            "c) Aleatoriamente",
            "d) Ambas as direções simultaneamente",
          ],
          correctAnswer: "b) 5' para 3'",
          comment:
            "Todas as DNA polimerases conhecidas sintetizam o DNA apenas na direção 5' para 3', adicionando nucleotídeos à extremidade 3'-OH da fita em crescimento.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "50. Qual o nome dado ao conjunto completo de DNA em um organismo?",
          options: [
            "a) Proteoma",
            "b) Transcriptoma",
            "c) Genoma",
            "d) Metaboloma",
          ],
          correctAnswer: "c) Genoma",
          comment:
            "O genoma é o conjunto completo de material genético de um organismo, incluindo todos os genes e sequências não codificadoras de DNA.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "51. Qual o nome das enzimas que cortam o DNA em sequências específicas?",
          options: [
            "a) Ligases",
            "b) Polimerases",
            "c) Endonucleases de restrição",
            "d) Helicases",
          ],
          correctAnswer: "c) Endonucleases de restrição",
          comment:
            "As endonucleases de restrição (ou enzimas de restrição) são ferramentas moleculares que reconhecem e clivam o DNA em sequências nucleotídicas específicas, sendo amplamente usadas em engenharia genética.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "52. Qual o papel do promotor na transcrição?",
          options: [
            "a) Codificar a sequência de aminoácidos da proteína.",
            "b) Sinalizar o início da transcrição.",
            "c) Terminar a transcrição.",
            "d) Transportar o mRNA para o ribossomo.",
          ],
          correctAnswer: "b) Sinalizar o início da transcrição.",
          comment:
            "O promotor é uma sequência de DNA onde a RNA polimerase se liga para iniciar a transcrição de um gene.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "53. O que acontece com os íntrons e éxons após a transcrição em eucariotos?",
          options: [
            "a) Ambos são traduzidos em proteína.",
            "b) Os íntrons são removidos e os éxons são unidos (splicing).",
            "c) Os éxons são removidos e os íntrons são unidos.",
            "d) Nenhum deles é traduzido.",
          ],
          correctAnswer: "b) Os íntrons são removidos e os éxons são unidos (splicing).",
          comment:
            "Em eucariotos, o pré-mRNA passa por um processo chamado splicing, onde os íntrons (regiões não codificadoras) são excisados e os éxons (regiões codificadoras) são unidos para formar o mRNA maduro.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "54. Qual a função principal das enzimas em processos biológicos?",
          options: [
            "a) Armazenar energia.",
            "b) Atuar como componentes estruturais.",
            "c) Catalisar reações químicas.",
            "d) Transportar substâncias.",
          ],
          correctAnswer: "c) Catalisar reações químicas.",
          comment:
            "Enzimas são proteínas que atuam como catalisadores biológicos, acelerando a velocidade das reações químicas sem serem consumidas no processo.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "55. Em que tipo de célula o DNA está contido em um núcleo?",
          options: [
            "a) Procariontes",
            "b) Eucariontes",
            "c) Vírus",
            "d) Bacteriófagos",
          ],
          correctAnswer: "b) Eucariontes",
          comment:
            "Em células eucarióticas, o DNA está organizado em cromossomos e contido dentro de um núcleo delimitado por uma membrana nuclear. Em procariontes, o DNA está no citoplasma.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "56. Qual o processo de produção de uma cópia de RNA a partir de uma sequência de DNA?",
          options: [
            "a) Replicação",
            "b) Tradução",
            "c) Transcrição",
            "d) Mitose",
          ],
          correctAnswer: "c) Transcrição",
          comment:
            "Transcrição é o processo pelo qual a informação genética do DNA é copiada para uma molécula de RNA.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "57. Qual a função do anticódon no tRNA?",
          options: [
            "a) Ligar-se ao aminoácido.",
            "b) Ligar-se ao códon no mRNA.",
            "c) Ligar-se ao ribossomo.",
            "d) Catalisar a formação da ligação peptídica.",
          ],
          correctAnswer: "b) Ligar-se ao códon no mRNA.",
          comment:
            "O anticódon é uma sequência de três nucleotídeos no tRNA que se pareia complementarmente com um códon específico no mRNA durante a tradução.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "58. O que é o dogma central da biologia molecular?",
          options: [
            "a) DNA -> RNA -> Proteína",
            "b) Proteína -> RNA -> DNA",
            "c) RNA -> DNA -> Proteína",
            "d) DNA -> Proteína -> RNA",
          ],
          correctAnswer: "a) DNA -> RNA -> Proteína",
          comment:
            "O dogma central da biologia molecular descreve o fluxo de informação genética nas células: do DNA para o RNA (transcrição) e do RNA para a proteína (tradução).",
          topic: "Biologia Molecular",
        },
        {
          question:
            "59. Qual o tipo de ligação que une as duas fitas da dupla hélice de DNA?",
          options: [
            "a) Ligação peptídica",
            "b) Ligação glicosídica",
            "c) Ligação de hidrogênio",
            "d) Ligação fosfodiéster",
          ],
          correctAnswer: "c) Ligação de hidrogênio",
          comment:
            "As duas fitas da dupla hélice de DNA são mantidas unidas por ligações de hidrogênio fracas entre as bases nitrogenadas complementares (A com T, G com C).",
          topic: "Biologia Molecular",
        },
        {
          question:
            "60. Qual a função do gene da telomerase em algumas células?",
          options: [
            "a) Reparar o DNA danificado.",
            "b) Alongar os telômeros, protegendo as extremidades dos cromossomos.",
            "c) Iniciar a replicação do DNA.",
            "d) Sintetizar proteínas.",
          ],
          correctAnswer: "b) Alongar os telômeros, protegendo as extremidades dos cromossomos.",
          comment:
            "A telomerase é uma enzima que adiciona repetições teloméricas às extremidades dos cromossomos, protegendo o DNA contra a degradação e o encurtamento que ocorre a cada replicação.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "61. O que são os nucleossomos?",
          options: [
            "a) Unidades funcionais do RNA.",
            "b) Estruturas que formam os ribossomos.",
            "c) Complexos de DNA enrolado em proteínas histonas, a unidade fundamental da cromatina.",
            "d) Segmentos de DNA que codificam proteínas.",
          ],
          correctAnswer: "c) Complexos de DNA enrolado em proteínas histonas, a unidade fundamental da cromatina.",
          comment:
            "Nucleossomos são as unidades básicas de empacotamento do DNA em eucariotos, consistindo em DNA enrolado em um 'core' de proteínas histonas, formando a cromatina.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "62. Qual o significado de 'sentido 5' para 3'' em relação ao DNA e RNA?",
          options: [
            "a) A direção em que a molécula é lida ou sintetizada.",
            "b) A quantidade de bases nitrogenadas na molécula.",
            "c) O número de cromossomos em uma célula.",
            "d) A temperatura ideal para a replicação.",
          ],
          correctAnswer: "a) A direção em que a molécula é lida ou sintetizada.",
          comment:
            "O sentido 5' para 3' refere-se à polaridade de uma fita de ácido nucleico, indicando a direção em que os nucleotídeos são adicionados durante a síntese (do carbono 5' de um nucleotídeo para o carbono 3' do próximo) e como a informação é lida.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "63. Qual enzima está envolvida no reparo de danos no DNA?",
          options: [
            "a) RNA polimerase",
            "b) DNA ligase",
            "c) Topoisomerase",
            "d) Todas as alternativas anteriores, dependendo do tipo de dano.",
          ],
          correctAnswer: "d) Todas as alternativas anteriores, dependendo do tipo de dano.",
          comment:
            "Várias enzimas participam do reparo do DNA. DNA ligase une quebras, topoisomerase relaxa superenrolamentos e RNA polimerase, embora primariamente para transcrição, está indiretamente envolvida em alguns mecanismos de reparo acoplados à transcrição.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "64. Qual a diferença principal entre DNA e RNA em termos de sua estrutura de fita?",
          options: [
            "a) O DNA é fita simples e o RNA é fita dupla.",
            "b) O DNA é fita dupla e o RNA é fita simples.",
            "c) Ambos são fita dupla.",
            "d) Ambos são fita simples.",
          ],
          correctAnswer: "b) O DNA é fita dupla e o RNA é fita simples.",
          comment:
            "O DNA é tipicamente uma molécula de fita dupla, enquanto o RNA é uma molécula de fita simples (embora possa formar estruturas secundárias complexas).",
          topic: "Biologia Molecular",
        },
        {
          question:
            "65. Qual a função do splicing alternativo?",
          options: [
            "a) Aumentar a taxa de mutação.",
            "b) Produzir diferentes proteínas a partir de um único gene.",
            "c) Degradadar o RNA mensageiro.",
            "d) Iniciar a replicação do DNA.",
          ],
          correctAnswer: "b) Produzir diferentes proteínas a partir de um único gene.",
          comment:
            "O splicing alternativo é um processo que permite que diferentes combinações de éxons sejam unidas a partir de um único transcrito de pré-mRNA, resultando na produção de múltiplas isoformas de proteínas de um único gene.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "66. O que é um íntron?",
          options: [
            "a) Uma sequência de DNA que codifica uma proteína.",
            "b) Uma sequência não codificadora de RNA que é removida durante o splicing.",
            "c) Uma proteína que regula a transcrição.",
            "d) Uma região do DNA que inicia a replicação.",
          ],
          correctAnswer: "b) Uma sequência não codificadora de RNA que é removida durante o splicing.",
          comment:
            "Íntrons são segmentos de DNA (e RNA transcrito) que não contêm informações para a síntese de proteínas e são removidos do pré-mRNA durante o splicing.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "67. O que é um éxon?",
          options: [
            "a) Uma sequência não codificadora de RNA.",
            "b) Uma sequência codificadora de RNA que permanece no mRNA maduro.",
            "c) Uma proteína que atua na tradução.",
            "d) Um tipo de mutação.",
          ],
          correctAnswer: "b) Uma sequência codificadora de RNA que permanece no mRNA maduro.",
          comment:
            "Éxons são as sequências codificadoras de um gene que são expressas e permanecem no mRNA maduro após o splicing, sendo traduzidas em proteínas.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "68. Qual o processo de síntese de proteínas a partir de RNA mensageiro (mRNA)?",
          options: [
            "a) Replicação",
            "b) Transcrição",
            "c) Tradução",
            "d) Mutação",
          ],
          correctAnswer: "c) Tradução",
          comment:
            "Tradução é o processo em que a sequência de nucleotídeos no mRNA é decodificada pelos ribossomos para sintetizar uma cadeia de aminoácidos, formando uma proteína.",
          topic: "Biologia Molecular",
        },
        {
          question:
            "69. O que é o código genético degenerado?",
          options: [
            "a) Significa que o código genético é instável.",
            "b) Significa que diferentes códons podem especificar o mesmo aminoácido.",
            "c) Significa que o código genético pode ser lido em qualquer direção.",
            "d) Significa que o código genético está se deteriorando.",
          ],
          correctAnswer: "b) Significa que diferentes códons podem especificar o mesmo aminoácido.",
          comment:
            "O código genético é degenerado (ou redundante) porque a maioria dos aminoácidos é especificada por mais de um códon, o que oferece uma certa proteção contra mutações pontuais.",
          topic: "Biologia Molecular",
        },
      ];

      function buildQuiz() {
        const output = [];
        questions.forEach((currentQuestion, questionNumber) => {
          const options = [];
          for (let i = 0; i < currentQuestion.options.length; i++) {
            options.push(
              `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
                <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
                ${currentQuestion.options[i]}
              </label>`
            );
          }

          // Adiciona o atributo data-topic ao card da questão
          output.push(
            `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
              <div class="question">${currentQuestion.question}</div>
              <div class="options">${options.join("")}</div>
              <div class="comment" id="comment-${questionNumber}"></div>
            </div>`
          );
        });

        quizContainer.innerHTML = output.join("");
      }

      function showResults() {
        wrongQuestionIndices = []; // Reseta a lista de erros
        wrongQuestionTopics = new Set(); // Reseta os tópicos de erro
        currentWrongQuestionIndex = -1; // Reseta para -1 para que o primeiro clique no botão leve ao índice 0
        hasErrors = false; // Reseta a flag de erros
        isInErrorReviewMode = false; // Sai do modo de revisão de erros

        // Esconde a seção de diagnóstico no início da verificação
        errorDiagnosisSection.style.display = 'none';
        topicsToReviewList.innerHTML = ''; // Limpa a lista de tópicos

        const answerContainers = quizContainer.querySelectorAll(".options");
        let correctAnswers = 0;

        questions.forEach((currentQuestion, questionNumber) => {
          const answerContainer = answerContainers[questionNumber];
          const userAnswerElement = answerContainer.querySelector('.option.selected');
          const userAnswerValue = userAnswerElement ? userAnswerElement.dataset.value : undefined;
          const commentDiv = document.getElementById(`comment-${questionNumber}`);

          // Limpa estados anteriores (se for clicado múltiplas vezes)
          const allOptions = answerContainer.querySelectorAll('.option');
          allOptions.forEach(option => {
            option.classList.remove('correct', 'incorrect');
            const scissorIcon = option.querySelector('.scissor-icon');
            if (scissorIcon) scissorIcon.classList.remove('hidden');
          });
          if (commentDiv) commentDiv.classList.remove('show');


          const optionElements = answerContainer.querySelectorAll('.option');
          optionElements.forEach(option => {
            const scissorIcon = option.querySelector('.scissor-icon');

            // Esconde a tesoura na opção que foi selecionada pelo usuário para não atrapalhar a visualização do gabarito
            if (option === userAnswerElement && scissorIcon) {
                scissorIcon.classList.add('hidden');
            } 
            // Já as outras tesouras (não selecionadas) devem estar visíveis para referência, o que foi garantido pelo reset acima

            // Marca a resposta correta com a classe 'correct'
            if (option.dataset.value === currentQuestion.correctAnswer) {
                option.classList.add('correct');
                if (commentDiv && currentQuestion.comment) {
                    commentDiv.textContent = currentQuestion.comment;
                    commentDiv.classList.add('show');
                }
            }
          });

          // Verifica se a resposta do usuário está incorreta E foi marcada (userAnswerElement existe)
          if (userAnswerElement && userAnswerValue !== currentQuestion.correctAnswer) {
            userAnswerElement.classList.add('incorrect');
            wrongQuestionIndices.push(questionNumber);
            wrongQuestionTopics.add(currentQuestion.topic); // Adiciona o tópico do erro
            hasErrors = true; // Define que há erros
          } else if (userAnswerValue === currentQuestion.correctAnswer) {
            correctAnswers++;
          }
        });

        resultsContainer.textContent = `Você acertou ${correctAnswers} de ${questions.length} questões.`;
        
        // Rola a página totalmente para baixo para exibir o resultado
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });

        // Exibe o botão de navegação de erros se houver questões marcadas erradas
        if (hasErrors) {
            errorNavBtn.style.display = 'flex';
            arrowIcon.textContent = '⬇️'; // Seta para baixo, indicando para rolar para o primeiro erro
            buttonText.textContent = `Próximo Erro (1/${wrongQuestionIndices.length})`; // Exibe o contador
            isInErrorReviewMode = true; // Entra no modo de revisão de erros
        } else {
            errorNavBtn.style.display = 'none'; // Esconde se não houver erros marcados
        }
      }

      // Função para rolar para uma questão específica
      function scrollToQuestion(index) {
        const questionCard = document.getElementById(`question-${index}`);
        if (questionCard) {
          questionCard.scrollIntoView({ behavior: 'smooth', block: 'center' }); 
        }
      }
      
      // Função para rolar para a seção de diagnóstico
      function scrollToDiagnosis() {
          errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }

      // Event listener para o clique nas opções
      quizContainer.addEventListener("click", function (event) {
        const clickedElement = event.target;
        const optionElement = clickedElement.closest('.option');

        if (optionElement) {
            if (clickedElement.classList.contains("scissor-icon")) {
                optionElement.classList.toggle("struck-through");
            } 
            else {
                const questionNumber = optionElement.dataset.question;
                // Remove a classe 'selected' de outras opções na mesma questão
                const currentQuestionOptions = quizContainer.querySelectorAll(`.option[data-question=\"${questionNumber}\"]`);
                currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
                
                // Adiciona a classe 'selected' à opção clicada
                optionElement.classList.add("selected");
            }
        }
      });

      // Event listener para o botão de navegação de erros/diagnóstico
      errorNavBtn.addEventListener("click", function() {
        if (!hasErrors) { // Se não há erros, o botão não deveria estar visível, mas por segurança
            errorNavBtn.style.display = 'none';
            return;
        }

        if (isInErrorReviewMode) {
            currentWrongQuestionIndex++;
            if (currentWrongQuestionIndex < wrongQuestionIndices.length) {
                // Ainda há erros para revisar
                scrollToQuestion(wrongQuestionIndices[currentWrongQuestionIndex]);
                buttonText.textContent = `Próximo Erro (${currentWrongQuestionIndex + 1}/${wrongQuestionIndices.length})`;
            } else {
                // Chegou ao fim dos erros, agora mostra o diagnóstico
                isInErrorReviewMode = false; // Sai do modo de revisão de erros
                arrowIcon.textContent = '⬇️'; // Seta para baixo para o diagnóstico
                buttonText.textContent = 'Diagnóstico';
                
                // Preenche e exibe a seção de diagnóstico
                topicsToReviewList.innerHTML = ''; // Limpa antes de preencher
                if (wrongQuestionTopics.size > 0) {
                    wrongQuestionTopics.forEach(topic => {
                        const li = document.createElement('li');
                        li.textContent = topic;
                        topicsToReviewList.appendChild(li);
                    });
                    errorDiagnosisSection.style.display = 'block'; // Exibe a seção
                    scrollToDiagnosis(); // Rola para ela
                } else {
                    errorDiagnosisSection.style.display = 'none'; // Esconde se não houver tópicos (não deve acontecer se hasErrors é true)
                    errorNavBtn.style.display = 'none'; // Esconde o botão se não há tópicos a mostrar
                }
            }
        } else {
            // Se já não está no modo de revisão, significa que o botão agora é para ir para o diagnóstico
            scrollToDiagnosis();
            errorNavBtn.style.display = 'none'; // O botão some após ir para o diagnóstico
        }
      });

      submitButton.addEventListener("click", showResults);

      buildQuiz();
    </script>
  </body>
</html>
