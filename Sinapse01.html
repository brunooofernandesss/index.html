<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Questionário de Múltipla Escolha: Sinapse Nervosa e Neurotransmissores</title>
    <style>
      body {
        font-family: sans-serif;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        min-height: 100vh;
        background-color: #f4f4f4;
      }

      .quiz-container {
        max-width: 800px;
        width: 100%;
      }

      h1 {
        color: #333;
        text-align: center;
        margin-bottom: 30px;
      }

      .card {
        background-color: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .question {
        font-weight: bold;
        margin-bottom: 10px;
        color: #333;
      }

      .options {
        margin-top: 15px;
      }

      .option {
        display: flex; /* Para alinhar imagem e texto */
        align-items: center;
        margin-bottom: 10px;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.2s ease;
        position: relative; /* Para posicionar a tesoura */
      }

      .option:hover {
        background-color: #e9e9e9;
      }

      .option.selected {
        background-color: #d1e7dd;
        border-color: #28a745;
      }

      .option.correct {
        background-color: #d4edda;
        border-color: #28a745;
      }

      .option.incorrect {
        background-color: #f8d7da;
        border-color: #dc3545;
      }

      .submit-btn {
        display: block;
        width: 100%;
        padding: 15px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 5px;
        font-size: 18px;
        cursor: pointer;
        transition: background-color 0.3s ease;
        margin-top: 30px;
      }

      .submit-btn:hover {
        background-color: #0056b3;
      }

      .results {
        text-align: center;
        margin-top: 30px;
        font-size: 20px;
        font-weight: bold;
        color: #333;
      }

      .scissor-icon {
        margin-right: 10px; /* Espaço entre a tesoura e o texto da opção */
        width: 20px; /* Ajuste conforme o tamanho da sua imagem */
        height: 20px; /* Ajuste conforme o tamanho da sua imagem */
        opacity: 0.5; /* Transparência como no original */
        cursor: pointer;
      }

      .scissor-icon.hidden {
        display: none;
      }

      .struck-through {
        text-decoration: line-through;
        color: #888;
      }

      .comment {
        margin-top: 10px;
        padding: 10px;
        background-color: #f0f0f0;
        border-left: 4px solid #007bff;
        font-style: italic;
        color: #555;
        display: none; /* Escondido por padrão */
      }
      .comment.show {
        display: block; /* Mostrado quando ativado */
      }

      /* Estilos para o botão de navegação de erro / diagnóstico */
      .error-nav-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #dc3545; /* Vermelho para erro */
        color: white;
        border: none;
        border-radius: 50%; /* Torna o botão redondo */
        width: 60px;
        height: 60px;
        font-size: 24px;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        display: none; /* Escondido por padrão */
        flex-direction: column; /* Para empilhar o ícone e o contador */
        padding: 5px; /* Ajuste o padding para acomodar texto maior */
        box-sizing: border-box; /* Garante que padding não aumente o tamanho total */
        text-align: center;
      }

      .error-nav-btn:hover {
        background-color: #c82333;
      }

      .error-nav-btn .arrow-icon {
        font-size: 30px; /* Tamanho da seta */
        line-height: 1; /* Ajuste para centralizar */
      }

      .error-nav-btn .button-text {
        font-size: 12px; /* Tamanho do texto abaixo da seta */
        line-height: 1;
        margin-top: 2px; /* Espaço entre a seta e o texto */
      }
      
      /* Estilos para a seção de diagnóstico de erros */
      .error-diagnosis-section {
          margin-top: 50px;
          padding: 30px;
          background-color: #ffe0b2; /* Um laranja claro ou similar */
          border-radius: 8px;
          box-shadow: 0 2px 5px rgba(0,0,0,0.15);
          display: none; /* Escondido por padrão */
          text-align: center;
          font-size: 1.1em;
          color: #333;
      }

      .error-diagnosis-section h2 {
          color: #e65100; /* Laranja mais escuro */
          margin-bottom: 20px;
          font-size: 1.8em;
      }

      .error-diagnosis-section ul {
          list-style: none; /* Remove marcadores de lista */
          padding: 0;
          margin: 0;
      }

      .error-diagnosis-section li {
          background-color: #ff9800; /* Laranja */
          color: white;
          padding: 8px 15px;
          margin: 8px 0;
          border-radius: 5px;
          display: inline-block; /* Para que os itens fiquem lado a lado */
          margin-right: 10px;
          font-weight: bold;
      }
      .error-diagnosis-section li:last-child {
          margin-right: 0;
      }
    </style>
  </head>
  <body>
    <div class="quiz-container">
      <h1>Questionário de Múltipla Escolha: Sinapse Nervosa e Neurotransmissores</h1>
      <div id="quiz"></div>
      <button class="submit-btn" id="submit">Verificar Respostas</button>
      <div id="results" class="results"></div>

      <div id="errorDiagnosis" class="error-diagnosis-section">
        <h2>Diagnóstico de Erros</h2>
        <p>Parece que você precisa revisar os seguintes assuntos:</p>
        <ul id="topicsToReview">
        </ul>
      </div>
    </div>

    <button class="error-nav-btn" id="errorNavBtn">
      <span class="arrow-icon"></span> <span class="button-text"></span>
    </button>

    <script>
      const quizContainer = document.getElementById("quiz");
      const submitButton = document.getElementById("submit");
      const resultsContainer = document.getElementById("results");
      const errorNavBtn = document.getElementById("errorNavBtn");
      const arrowIcon = errorNavBtn.querySelector(".arrow-icon");
      const buttonText = errorNavBtn.querySelector(".button-text");
      const errorDiagnosisSection = document.getElementById("errorDiagnosis");
      const topicsToReviewList = document.getElementById("topicsToReview");

      let wrongQuestionIndices = [];
      let errorCountByTopic = {};
      let totalAnsweredQuestionsByTopic = {};
      let currentWrongQuestionIndex = -1;
      let hasErrors = false;
      let isShowingErrors = false;
      let isShowingDiagnosis = false;

      // SUAS 40 QUESTÕES ORIGINAIS COM TÓPICOS SUGERIDOS
      const questions = [
        {
          question: "1. Qual é a primeira etapa na transmissão de um sinal em um neurônio, conforme o slide?",
          options: [
            "a) Geração de despolarização.",
            "b) Ativação de canais iônicos voltagem-dependentes.",
            "c) Estímulo.",
            "d) Propagação da alteração (PA).",
          ],
          correctAnswer: "c) Estímulo.",
          comment: "A primeira etapa é o estímulo, que pode ser elétrico, químico ou mecânico, e que inicia a cadeia de eventos que levarão à transmissão do sinal.",
          topic: "Estímulo Neural e Potencial de Ação",
        },
        {
          question: "2. O que acontece com o potencial de membrana em repouso de um neurônio após o recebimento de um estímulo?",
          options: [
            "a) Ele se torna mais negativo.",
            "b) Sua polaridade é alterada.",
            "c) Ele permanece inalterado.",
            "d) Cessa a atividade elétrica.",
          ],
          correctAnswer: "b) Sua polaridade é alterada.",
          comment: "Um estímulo suficientemente forte (acima do limiar) causa uma alteração na permeabilidade da membrana a íons, o que resulta na mudança da polaridade do potencial de membrana, levando à despolarização e à geração de um potencial de ação.",
          topic: "Potencial de Ação e Despolarização",
        },
        {
          question: "3. Qual é a fase que ocorre imediatamente após a ativação de canais iônicos voltagem-dependentes?",
          options: [
            "a) Potencial de repouso.",
            "b) Potencial de ação (despolarização).",
            "c) Hiperpolarização.",
            "d) Período refratário.",
          ],
          correctAnswer: "b) Potencial de ação (despolarização).",
          comment: "A ativação dos canais iônicos voltagem-dependentes (principalmente os de sódio) leva à despolarização da membrana, que é a fase ascendente do potencial de ação.",
          topic: "Fases do Potencial de Ação",
        },
        {
          question: "4. A propagação da alteração (PA) na membrana do neurônio segue qual princípio?",
          options: [
            "a) É proporcional à intensidade do estímulo.",
            "b) É um processo de 'tudo ou nada'.",
            "c) Diminui de amplitude com a distância.",
            "d) Requer um estímulo contínuo para se propagar.",
          ],
          correctAnswer: "b) É um processo de 'tudo ou nada'.",
          comment: "O potencial de ação é um evento de 'tudo ou nada': se o estímulo atingir o limiar, um potencial de ação de amplitude constante é gerado e se propaga sem diminuição ao longo do axônio. Se o limiar não for atingido, não há potencial de ação.",
          topic: "Princípio do Tudo ou Nada",
        },
        {
          question: "5. Qual é o papel da bainha de mielina na transmissão do impulso nervoso?",
          options: [
            "a) Aumentar a resistência da membrana, diminuindo a velocidade.",
            "b) Acelerar a condução do impulso nervoso (condução saltatória).",
            "c) Impedir completamente a transmissão do sinal.",
            "d) Armazenar neurotransmissores.",
          ],
          correctAnswer: "b) Acelerar a condução do impulso nervoso (condução saltatória).",
          comment: "A bainha de mielina isola eletricamente o axônio, permitindo que o potencial de ação 'salte' de um nódulo de Ranvier para o outro (condução saltatória), o que aumenta drasticamente a velocidade de transmissão.",
          topic: "Bainha de Mielina e Condução",
        },
        {
          question: "6. O que são os nódulos de Ranvier?",
          options: [
            "a) Regiões mielinizadas do axônio.",
            "b) Lacunas na bainha de mielina onde ocorre a despolarização.",
            "c) Estruturas que produzem neurotransmissores.",
            "d) Ramificações dos dendritos.",
          ],
          correctAnswer: "b) Lacunas na bainha de mielina onde ocorre a despolarização.",
          comment: "Os nódulos de Ranvier são pequenas lacunas desmielinizadas ao longo do axônio, ricas em canais iônicos voltagem-dependentes, onde o potencial de ação é regenerado durante a condução saltatória.",
          topic: "Nódulos de Ranvier",
        },
        {
          question: "7. Em qual tipo de sinapse ocorre a transmissão direta de corrente elétrica entre as células?",
          options: [
            "a) Sinapse química.",
            "b) Sinapse elétrica.",
            "c) Sinapse mista.",
            "d) Sinapse excitatória.",
          ],
          correctAnswer: "b) Sinapse elétrica.",
          comment: "Nas sinapses elétricas, as células estão conectadas por junções comunicantes (gap junctions), que permitem o fluxo direto e rápido de íons e, portanto, de corrente elétrica entre elas, sem a necessidade de neurotransmissores.",
          topic: "Tipos de Sinapse",
        },
        {
          question: "8. Qual é a principal vantagem da sinapse química sobre a sinapse elétrica?",
          options: [
            "a) Maior velocidade de transmissão.",
            "b) Bidirecionalidade da transmissão.",
            "c) Capacidade de modulação e integração de sinais.",
            "d) Menor gasto energético.",
          ],
          correctAnswer: "c) Capacidade de modulação e integração de sinais.",
          comment: "Sinapses químicas, embora mais lentas, permitem uma maior plasticidade e complexidade na sinalização. Elas podem ser excitatórias ou inibitórias, e a intensidade do sinal pode ser modulada, permitindo a integração de múltiplos sinais.",
          topic: "Vantagens da Sinapse Química",
        },
        {
          question: "9. O que acontece quando o potencial de ação chega ao terminal pré-sináptico em uma sinapse química?",
          options: [
            "a) Liberação de potássio.",
            "b) Abertura de canais de cálcio voltagem-dependentes.",
            "c) Fechamento da fenda sináptica.",
            "d) Inativação dos neurotransmissores.",
          ],
          correctAnswer: "b) Abertura de canais de cálcio voltagem-dependentes.",
          comment: "A despolarização do terminal pré-sináptico pela chegada do potencial de ação abre canais de cálcio dependentes de voltagem, permitindo o influxo de Ca2+, que é essencial para a liberação de neurotransmissores.",
          topic: "Eventos na Sinapse Química",
        },
        {
          question: "10. Qual a função das vesículas sinápticas?",
          options: [
            "a) Degradar neurotransmissores.",
            "b) Armazenar e liberar neurotransmissores na fenda sináptica.",
            "c) Produzir energia para o neurônio.",
            "d) Transportar íons através da membrana.",
          ],
          correctAnswer: "b) Armazenar e liberar neurotransmissores na fenda sináptica.",
          comment: "As vesículas sinápticas são pequenos sacos membranosos que contêm neurotransmissores. Quando o Ca2+ entra no terminal, elas se fundem com a membrana pré-sináptica e liberam os neurotransmissores por exocitose.",
          topic: "Vesículas Sinápticas",
        },
        {
          question: "11. O que são os receptores pós-sinápticos?",
          options: [
            "a) Moléculas que sintetizam neurotransmissores.",
            "b) Canais iônicos que transportam cálcio para o neurônio pré-sináptico.",
            "c) Proteínas na membrana pós-sináptica que se ligam a neurotransmissores.",
            "d) Estruturas responsáveis pela recaptação de neurotransmissores.",
          ],
          correctAnswer: "c) Proteínas na membrana pós-sináptica que se ligam a neurotransmissores.",
          comment: "Receptores pós-sinápticos são proteínas especializadas localizadas na membrana da célula pós-sináptica que se ligam especificamente aos neurotransmissores, desencadeando uma resposta na célula receptora.",
          topic: "Receptores Pós-Sinápticos",
        },
        {
          question: "12. Qual é a principal diferença entre receptores ionotrópicos e metabotrópicos?",
          options: [
            "a) Ionotrópicos degradam neurotransmissores, metabotrópicos os sintetizam.",
            "b) Ionotrópicos são mais lentos, metabotrópicos são mais rápidos.",
            "c) Ionotrópicos são canais iônicos diretos, metabotrópicos ativam segundos mensageiros.",
            "d) Ionotrópicos usam ATP, metabotrópicos não.",
          ],
          correctAnswer: "c) Ionotrópicos são canais iônicos diretos, metabotrópicos ativam segundos mensageiros.",
          comment: "Receptores ionotrópicos são canais iônicos que se abrem diretamente quando um neurotransmissor se liga. Receptores metabotrópicos, por outro lado, são acoplados a proteínas G e atuam ativando segundos mensageiros, levando a efeitos mais lentos e duradouros.",
          topic: "Tipos de Receptores",
        },
        {
          question: "13. O que é um Potencial Pós-Sináptico Excitatório (PPSE)?",
          options: [
            "a) Uma hiperpolarização da membrana pós-sináptica.",
            "b) Uma despolarização da membrana pós-sináptica que torna mais provável o disparo de um PA.",
            "c) A inibição da liberação de neurotransmissores.",
            "d) O fechamento de canais de sódio.",
          ],
          correctAnswer: "b) Uma despolarização da membrana pós-sináptica que torna mais provável o disparo de um PA.",
          comment: "Um PPSE é uma despolarização (torna o potencial mais positivo) da membrana pós-sináptica, aproximando-a do limiar e aumentando a probabilidade de gerar um potencial de ação.",
          topic: "PPSE e PPSI",
        },
        {
          question: "14. O que é um Potencial Pós-Sináptico Inibitório (PPSI)?",
          options: [
            "a) Uma despolarização da membrana pós-sináptica.",
            "b) Uma hiperpolarização da membrana pós-sináptica que torna menos provável o disparo de um PA.",
            "c) O aumento da liberação de neurotransmissores.",
            "d) A abertura de canais de sódio.",
          ],
          correctAnswer: "b) Uma hiperpolarização da membrana pós-sináptica que torna menos provável o disparo de um PA.",
          comment: "Um PPSI é uma hiperpolarização (torna o potencial mais negativo) ou estabilização da membrana pós-sináptica, afastando-a do limiar e diminuindo a probabilidade de gerar um potencial de ação.",
          topic: "PPSE e PPSI",
        },
        {
          question: "15. Qual o processo de soma de PPSEs de diferentes sinapses que chegam ao neurônio ao mesmo tempo?",
          options: [
            "a) Soma temporal.",
            "b) Soma espacial.",
            "c) Potenciação.",
            "d) Habituação.",
          ],
          correctAnswer: "b) Soma espacial.",
          comment: "A soma espacial ocorre quando múltiplos PPSEs de diferentes sinapses chegam à mesma célula pós-sináptica simultaneamente e se somam para atingir o limiar.",
          topic: "Somação Sináptica",
        },
        {
          question: "16. Qual o processo de soma de PPSEs de uma única sinapse que ocorrem em rápida sucessão?",
          options: [
            "a) Soma espacial.",
            "b) Soma temporal.",
            "c) Integração.",
            "d) Modulação.",
          ],
          correctAnswer: "b) Soma temporal.",
          comment: "A soma temporal ocorre quando um único terminal pré-sináptico dispara repetidamente em rápida sucessão, fazendo com que os PPSEs gerados se somem no tempo para atingir o limiar de disparo.",
          topic: "Somação Sináptica",
        },
        {
          question: "17. A acetilcolina é um neurotransmissor liberado na:",
          options: [
            "a) Medula espinhal.",
            "b) Junção neuromuscular.",
            "c) Glândula adrenal.",
            "d) Tireoide.",
          ],
          correctAnswer: "b) Junção neuromuscular.",
          comment: "A acetilcolina é o principal neurotransmissor envolvido na transmissão do sinal dos nervos motores para os músculos esqueléticos na junção neuromuscular, causando a contração muscular.",
          topic: "Neurotransmissores Específicos",
        },
        {
          question: "18. Qual neurotransmissor está associado à regulação do humor, sono e apetite?",
          options: ["a) Dopamina.", "b) GABA.", "c) Serotonina.", "d) Glutamato."],
          correctAnswer: "c) Serotonina.",
          comment: "A serotonina (5-HT) é um neurotransmissor monoamina que desempenha um papel crucial em diversas funções cerebrais, incluindo o humor, sono, apetite e bem-estar. Níveis desregulados de serotonina são frequentemente associados a distúrbios de humor como a depressão.",
          topic: "Neurotransmissores Específicos",
        },
        {
          question: "19. A dopamina está envolvida principalmente em quais vias cerebrais?",
          options: [
            "a) Vias sensoriais de dor.",
            "b) Vias de recompensa, motivação e movimento.",
            "c) Vias de regulação da temperatura.",
            "d) Vias de controle da respiração.",
          ],
          correctAnswer: "b) Vias de recompensa, motivação e movimento.",
          comment: "A dopamina é um neurotransmissor fundamental para o sistema de recompensa do cérebro, motivação, prazer e coordenação motora. Disfunções nas vias dopaminérgicas estão implicadas em condições como a Doença de Parkinson e a dependência de drogas.",
          topic: "Neurotransmissores Específicos",
        },
        {
          question: "20. Qual é o principal neurotransmissor inibitório no cérebro?",
          options: ["a) Glutamato.", "b) Glicina.", "c) Noradrenalina.", "d) GABA."],
          correctAnswer: "d) GABA.",
          comment: "O Ácido Gama-aminobutírico (GABA) é o principal neurotransmissor inibitório do sistema nervoso central. Ele atua reduzindo a excitabilidade neuronal, o que é importante para modular a atividade cerebral e prevenir a superestimulação.",
          topic: "Neurotransmissores Específicos",
        },
        {
          question: "21. Qual é o principal neurotransmissor excitatório no cérebro?",
          options: ["a) Acetilcolina.", "b) Serotonina.", "c) Glutamato.", "d) Dopamina."],
          correctAnswer: "c) Glutamato.",
          comment: "O glutamato é o principal neurotransmissor excitatório do sistema nervoso central, crucial para processos como a aprendizagem e a formação da memória através da potenciação sináptica.",
          topic: "Neurotransmissores Específicos",
        },
        {
          question: "22. A noradrenalina (norepinefrina) está associada a qual sistema do corpo?",
          options: [
            "a) Sistema digestório.",
            "b) Sistema nervoso autônomo (resposta de 'luta ou fuga').",
            "c) Sistema endócrino.",
            "d) Sistema circulatório.",
          ],
          correctAnswer: "b) Sistema nervoso autônomo (resposta de 'luta ou fuga').",
          comment: "A noradrenalina atua tanto como neurotransmissor quanto como hormônio e é um componente chave do sistema nervoso simpático, responsável pela resposta de 'luta ou fuga', aumentando o estado de alerta, frequência cardíaca e prontidão do corpo para o estresse.",
          topic: "Neurotransmissores Específicos",
        },
        {
          question: "23. Qual o processo de remoção de neurotransmissores da fenda sináptica que envolve sua quebra por enzimas?",
          options: [
            "a) Recaptação.",
            "b) Difusão.",
            "c) Degradação enzimática.",
            "d) Armazenamento.",
          ],
          correctAnswer: "c) Degradação enzimática.",
          comment: "A degradação enzimática, como a que ocorre com a acetilcolina pela acetilcolinesterase, é um mecanismo pelo qual os neurotransmissores são inativados e removidos da fenda sináptica, garantindo a cessação rápida do sinal.",
          topic: "Remoção de Neurotransmissores",
        },
        {
          question: "24. A recaptação de neurotransmissores é um mecanismo pelo qual:",
          options: [
            "a) Eles são degradados por enzimas.",
            "b) Eles são absorvidos de volta para o neurônio pré-sináptico ou células da glia.",
            "c) Eles se difundem para fora da fenda sináptica.",
            "d) Eles se ligam a novos receptores.",
          ],
          correctAnswer: "b) Eles são absorvidos de volta para o neurônio pré-sináptico ou células da glia.",
          comment: "A recaptação é um processo ativo de transporte que remove neurotransmissores da fenda sináptica, permitindo sua reutilização ou degradação dentro do neurônio pré-sináptico ou células gliais, sendo crucial para regular a duração e intensidade do sinal sináptico.",
          topic: "Remoção de Neurotransmissores",
        },
        {
          question: "25. Qual é o papel da bomba de sódio-potássio na manutenção do potencial de repouso da membrana?",
          options: [
            "a) Ela produz neurotransmissores.",
            "b) Ela transporta íons contra seus gradientes de concentração, mantendo o interior negativo.",
            "c) Ela degrada proteínas da membrana.",
            "d) Ela gera o potencial de ação.",
          ],
          correctAnswer: "b) Ela transporta íons contra seus gradientes de concentração, mantendo o interior negativo.",
          comment: "A bomba de sódio-potássio (Na+/K+ ATPase) utiliza ATP para bombear 3 íons Na+ para fora da célula e 2 íons K+ para dentro, mantendo os gradientes eletroquímicos e contribuindo significativamente para o potencial de membrana em repouso, que é negativo no interior.",
          topic: "Potencial de Repouso",
        },
        {
          question: "26. O que é Potenciação de Longo Prazo (LTP)?",
          options: [
            "a) Uma diminuição persistente na força da sinapse.",
            "b) Um aumento duradouro na força da transmissão sináptica.",
            "c) A inibição do disparo neuronal.",
            "d) A morte de neurônios.",
          ],
          correctAnswer: "b) Um aumento duradouro na força da transmissão sináptica.",
          comment: "A Potenciação de Longo Prazo (LTP) é um fenômeno de plasticidade sináptica caracterizado por um aumento persistente na eficiência da transmissão sináptica após uma estimulação de alta frequência, sendo um mecanismo celular fundamental para o aprendizado e a memória.",
          topic: "Plasticidade Sináptica",
        },
        {
          question: "27. A Depressão de Longo Prazo (LTD) é o oposto da LTP, caracterizada por:",
          options: [
            "a) Um aumento na excitabilidade neuronal.",
            "b) Uma diminuição persistente na força da transmissão sináptica.",
            "c) A formação de novas sinapses.",
            "d) Aceleração da condução do PA.",
          ],
          correctAnswer: "b) Uma diminuição persistente na força da transmissão sináptica.",
          comment: "A Depressão de Longo Prazo (LTD) é outra forma de plasticidade sináptica que resulta em uma redução duradoura da eficácia da transmissão sináptica. Junto com a LTP, a LTD é importante para o ajuste fino e a eliminação de sinapses, contribuindo para a dinâmica da rede neural.",
          topic: "Plasticidade Sináptica",
        },
        {
          question: "28. Qual a importância da plasticidade sináptica para o sistema nervoso?",
          options: [
            "a) Manter as sinapses inalteradas ao longo da vida.",
            "b) Permitir o aprendizado e a memória através da modificação da força sináptica.",
            "c) Apenas garantir a transmissão rápida de sinais.",
            "d) Degradar neurotransmissores excessivos.",
          ],
          correctAnswer: "b) Permitir o aprendizado e a memória através da modificação da força sináptica.",
          comment: "A plasticidade sináptica é a base neural para processos como aprendizado e memória, pois permite que as conexões entre os neurônios sejam fortalecidas ou enfraquecidas em resposta à experiência, adaptando o cérebro a novas informações e habilidades.",
          topic: "Importância da Plasticidade Sináptica",
        },
        {
          question: "29. O que é inibição pré-sináptica?",
          options: [
            "a) Um mecanismo que aumenta a liberação de neurotransmissores.",
            "b) Um mecanismo que reduz a quantidade de neurotransmissor liberada pelo terminal pré-sináptico.",
            "c) Uma alteração na sensibilidade dos receptores pós-sinápticos.",
            "d) A degradação de neurotransmissores antes de serem liberados.",
          ],
          correctAnswer: "b) Um mecanismo que reduz a quantidade de neurotransmissor liberada pelo terminal pré-sináptico.",
          comment: "A inibição pré-sináptica ocorre quando um neurônio, ao fazer sinapse no terminal de outro neurônio, reduz a quantidade de neurotransmissor que será liberada por este último, diminuindo seletivamente a magnitude da resposta pós-sináptica sem afetar outras sinapses do neurônio.",
          topic: "Modulação Sináptica",
        },
        {
          question: "30. O que é facilitação pré-sináptica?",
          options: [
            "a) Uma redução na liberação de neurotransmissores.",
            "b) Um aumento na quantidade de neurotransmissor liberada pelo terminal pré-sináptico.",
            "c) Aumento da inibição pós-sináptica.",
            "d) Fechamento de canais de cálcio.",
          ],
          correctAnswer: "b) Um aumento na quantidade de neurotransmissor liberada pelo terminal pré-sináptico.",
          comment: "A facilitação pré-sináptica é o oposto da inibição, onde um neurônio atua no terminal pré-sináptico de outro, aumentando a quantidade de neurotransmissor liberado, resultando em uma resposta pós-sináptica mais forte.",
          topic: "Modulação Sináptica",
        },
        {
          question: "31. Qual a importância da reciclagem de vesículas sinápticas?",
          options: [
            "a) Garantir o descarte de neurotransmissores velhos.",
            "b) Permitir a rápida reposição de vesículas e a continuidade da transmissão sináptica.",
            "c) Diminuir o gasto energético do neurônio.",
            "d) Aumentar o período refratário.",
          ],
          correctAnswer: "b) Permitir a rápida reposição de vesículas e a continuidade da transmissão sináptica.",
          comment: "Após a fusão com a membrana pré-sináptica e liberação de neurotransmissores, as vesículas são endocitadas e recicladas dentro do terminal. Esse processo rápido e eficiente é vital para manter um suprimento constante de vesículas prontas para liberar neurotransmissores, garantindo a sustentabilidade da sinalização sináptica.",
          topic: "Reciclagem de Vesículas",
        },
        {
          question: "32. O que acontece com a permeabilidade da membrana pós-sináptica quando um neurotransmissor inibitório se liga ao seu receptor?",
          options: [
            "a) Aumenta a permeabilidade a íons sódio (Na+).",
            "b) Diminui a permeabilidade a todos os íons.",
            "c) Aumenta a permeabilidade a íons cloreto (Cl-) ou potássio (K+), tornando a membrana mais negativa.",
            "d) Não há alteração na permeabilidade.",
          ],
          correctAnswer: "c) Aumenta a permeabilidade a íons cloreto (Cl-) ou potássio (K+), tornando a membrana mais negativa.",
          comment: "Neurotransmissores inibitórios (como GABA ou glicina) geralmente abrem canais para íons Cl- (que entram, deixando o interior mais negativo) ou canais para íons K+ (que saem, deixando o interior mais negativo), resultando em hiperpolarização ou estabilização da membrana e dificultando o disparo de um potencial de ação.",
          topic: "Ação de Neurotransmissores Inibitórios",
        },
        {
          question: "33. A liberação de neurotransmissores é um processo de qual tipo de transporte?",
          options: [
            "a) Transporte ativo primário.",
            "b) Difusão facilitada.",
            "c) Exocitose.",
            "d) Endocitose.",
          ],
          correctAnswer: "c) Exocitose.",
          comment: "A liberação de neurotransmissores das vesículas sinápticas para a fenda sináptica é um exemplo clássico de exocitose, um processo de transporte em massa que move substâncias para fora da célula.",
          topic: "Transporte de Neurotransmissores",
        },
        {
          question: "34. Qual a função dos autorreceptores no terminal pré-sináptico?",
          options: [
            "a) Receber sinais de outros neurônios.",
            "b) Degradar neurotransmissores.",
            "c) Regular a própria liberação de neurotransmissores pelo terminal.",
            "d) Ativar a recaptação.",
          ],
          correctAnswer: "c) Regular a própria liberação de neurotransmissores pelo terminal.",
          comment: "Autorreceptores são receptores localizados na membrana do neurônio pré-sináptico que se ligam ao neurotransmissor que o próprio neurônio libera. Sua ativação geralmente resulta em uma diminuição da liberação subsequente de neurotransmissores, agindo como um mecanismo de feedback negativo para controlar a sinalização.",
          topic: "Autorreceptores e Regulação Sináptica",
        },
        {
          question: "35. O que são os canais de sódio voltagem-dependentes?",
          options: [
            "a) Canais que se abrem em resposta à ligação de um neurotransmissor.",
            "b) Canais que se abrem em resposta a mudanças no potencial elétrico da membrana.",
            "c) Canais que transportam sódio para fora da célula.",
            "d) Canais sempre abertos para o sódio.",
          ],
          correctAnswer: "b) Canais que se abrem em resposta a mudanças no potencial elétrico da membrana.",
          comment: "Canais de sódio voltagem-dependentes são proteínas transmembrana que se abrem quando a membrana atinge um determinado limiar de despolarização, permitindo o influxo rápido de íons sódio e iniciando a fase ascendente do potencial de ação.",
          topic: "Canais Iônicos",
        },
        {
          question: "36. Qual a função do período refratário do potencial de ação?",
          options: [
            "a) Permitir a soma de múltiplos estímulos.",
            "b) Garantir que o potencial de ação se propague em apenas uma direção e regular a frequência de disparo.",
            "c) Aumentar a amplitude do potencial de ação.",
            "d) Diminuir a velocidade de condução.",
          ],
          correctAnswer: "b) Garantir que o potencial de ação se propague em apenas uma direção e regular a frequência de disparo.",
          comment: "O período refratário (absoluto e relativo) impede que um novo potencial de ação seja gerado imediatamente após um anterior, garantindo que o sinal se propague unidirecionalmente e limitando a frequência máxima de disparos do neurônio.",
          topic: "Período Refratário",
        },
        {
          question: "37. A miastenia gravis é uma doença autoimune que afeta a transmissão sináptica. Qual parte da sinapse ela ataca principalmente?",
          options: [
            "a) Canais de cálcio pré-sinápticos.",
            "b) Vesículas de acetilcolina.",
            "c) Receptores de acetilcolina na membrana pós-sináptica.",
            "d) A enzima acetilcolinesterase.",
          ],
          correctAnswer: "c) Receptores de acetilcolina na membrana pós-sináptica.",
          comment: "A miastenia gravis é caracterizada pela produção de anticorpos que atacam e destroem os receptores de acetilcolina na junção neuromuscular, levando à fraqueza muscular progressiva devido à diminuição da resposta ao neurotransmissor.",
          topic: "Doenças da Sinapse",
        },
        {
          question: "38. Qual dos seguintes não é um mecanismo de remoção de neurotransmissores da fenda sináptica?",
          options: [
            "a) Difusão para fora da fenda.",
            "b) Degradação enzimática.",
            "c) Síntese de novos neurotransmissores.",
            "d) Recaptação por transportadores.",
          ],
          correctAnswer: "c) Síntese de novos neurotransmissores.",
          comment: "A síntese de novos neurotransmissores ocorre dentro do neurônio pré-sináptico (ou no corpo celular), mas não é um mecanismo de remoção dos neurotransmissores da fenda sináptica após a liberação. Os mecanismos de remoção são difusão, degradação enzimática e recaptação.",
          topic: "Remoção de Neurotransmissores",
        },
        {
          question: "39. Toxinas como a do botulismo (Botox) agem na sinapse de que forma?",
          options: [
            "a) Aumentando a liberação de acetilcolina.",
            "b) Bloqueando a liberação de acetilcolina, causando paralisia muscular.",
            "c) Ativando os receptores de acetilcolina.",
            "d) Degradando a acetilcolina na fenda.",
          ],
          correctAnswer: "b) Bloqueando a liberação de acetilcolina, causando paralisia muscular.",
          comment: "A toxina botulínica age clivando proteínas SNARE nos terminais nervosos colinérgicos, impedindo a fusão das vesículas e, consequentemente, o bloqueio da liberação de acetilcolina, o que leva à paralisia flácida dos músculos.",
          topic: "Toxinas e Sinapse",
        },
        {
          question: "40. Qual o efeito da liberação de GABA (ácido gama-aminobutírico) na maioria das sinapses centrais?",
          options: [
            "a) Excitatório, causando despolarização.",
            "b) Inibitório, causando hiperpolarização ou estabilização do potencial de membrana.",
            "c) Aumento da liberação de outros neurotransmissores.",
            "d) Degradação de receptores pós-sinápticos.",
          ],
          correctAnswer: "b) Inibitório, causando hiperpolarização ou estabilização do potencial de membrana.",
          comment: "O GABA é o principal neurotransmissor inibitório do sistema nervoso central. Ele se liga a receptores GABA (principalmente GABAA, que são canais de Cl-) e causa a entrada de Cl- na célula, hiperpolarizando ou estabilizando o potencial de membrana e dificultando a geração de um potencial de ação.",
          topic: "Ação de Neurotransmissores Inibitórios",
        },
      ];

      function buildQuiz() {
        const output = [];

        questions.forEach((currentQuestion, questionNumber) => {
          const options = [];
          for (let i = 0; i < currentQuestion.options.length; i++) {
            options.push(
              `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
                <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
                ${currentQuestion.options[i]}
              </label>`
            );
          }

          output.push(
            `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
              <div class="question">${currentQuestion.question}</div>
              <div class="options">${options.join("")}</div>
              <div class="comment" id="comment-${questionNumber}"></div>
            </div>`
          );
        });

        quizContainer.innerHTML = output.join("");
      }

      function showResults() {
        // Resetar estados e contadores
        wrongQuestionIndices = [];
        errorCountByTopic = {};
        totalAnsweredQuestionsByTopic = {};
        currentWrongQuestionIndex = -1;
        hasErrors = false;
        isShowingErrors = false;
        isShowingDiagnosis = false;

        errorDiagnosisSection.style.display = 'none';
        topicsToReviewList.innerHTML = '';

        const answerContainers = quizContainer.querySelectorAll(".options");
        let correctAnswers = 0;

        questions.forEach((currentQuestion, questionNumber) => {
          const answerContainer = answerContainers[questionNumber];
          const userAnswerElement = answerContainer.querySelector('.option.selected');
          const userAnswerValue = userAnswerElement ? userAnswerElement.dataset.value : undefined;
          const commentDiv = document.getElementById(`comment-${questionNumber}`);

          // Limpa estados anteriores
          const allOptions = answerContainer.querySelectorAll('.option');
          allOptions.forEach(option => {
            option.classList.remove('correct', 'incorrect');
            const scissorIcon = option.querySelector('.scissor-icon');
            if (scissorIcon) scissorIcon.classList.remove('hidden'); // Garante que a tesoura volte a aparecer
            option.classList.remove('struck-through'); // Remove o riscado também
          });
          if (commentDiv) commentDiv.classList.remove('show');


          const optionElements = answerContainer.querySelectorAll('.option');
          optionElements.forEach(option => {
            const scissorIcon = option.querySelector('.scissor-icon');

            // Se a opção foi selecionada, esconde a tesoura dela
            if (option === userAnswerElement && scissorIcon) {
                scissorIcon.classList.add('hidden');
            }

            if (option.dataset.value === currentQuestion.correctAnswer) {
                option.classList.add('correct');
                if (commentDiv && currentQuestion.comment) {
                    commentDiv.textContent = currentQuestion.comment;
                    commentDiv.classList.add('show');
                }
            }
          });

          if (userAnswerElement) {
            // Garante que o tópico seja considerado apenas se a questão foi respondida
            totalAnsweredQuestionsByTopic[currentQuestion.topic] = (totalAnsweredQuestionsByTopic[currentQuestion.topic] || 0) + 1;

            if (userAnswerValue !== currentQuestion.correctAnswer) {
              userAnswerElement.classList.add('incorrect');
              wrongQuestionIndices.push(questionNumber);
              hasErrors = true;

              errorCountByTopic[currentQuestion.topic] = (errorCountByTopic[currentQuestion.topic] || 0) + 1;
            } else {
              correctAnswers++;
            }
          }
        });

        resultsContainer.textContent = `Você acertou ${correctAnswers} de ${questions.length} questões.`;

        // Rola a página até o final para exibir o resultado e o botão (se houver erros)
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });

        if (hasErrors) {
            errorNavBtn.style.display = 'flex'; // Exibe o botão de navegação
            arrowIcon.textContent = '⬇️'; // Seta para baixo inicialmente para rolar para a primeira questão errada
            buttonText.textContent = 'Revisar Erros'; // Texto inicial do botão
            isShowingErrors = false; // Começa como falso para que o primeiro clique ative a navegação
            isShowingDiagnosis = false; // Não está mostrando o diagnóstico ainda
        } else {
            errorNavBtn.style.display = 'none'; // Esconde o botão se não houver erros
        }
      }

      function scrollToQuestion(index) {
        const questionCard = document.getElementById(`question-${index}`);
        if (questionCard) {
          questionCard.scrollIntoView({ behavior: 'smooth', block: 'center' }); // Rola para o centro da questão
        }
      }

      function scrollToDiagnosis() {
          errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' }); // Rola para o início da seção de diagnóstico
      }

      quizContainer.addEventListener("click", function (event) {
        const clickedElement = event.target;
        const optionElement = clickedElement.closest('.option'); // Encontra o div .option mais próximo

        if (optionElement) {
            // Se o clique foi diretamente na tesoura
            if (clickedElement.classList.contains("scissor-icon")) {
                optionElement.classList.toggle("struck-through");
            }
            // Se o clique foi em qualquer outra parte do bloco da alternativa
            else {
                const questionNumber = optionElement.dataset.question;
                // Desseleciona todas as outras opções da mesma questão
                const currentQuestionOptions = quizContainer.querySelectorAll(`.option[data-question=\"${questionNumber}\"]`);
                currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));

                // Seleciona a opção clicada
                optionElement.classList.add("selected");
            }
        }
      });

      errorNavBtn.addEventListener("click", function() {
        if (!hasErrors) { // Não deve aparecer se não há erros, mas por segurança
            errorNavBtn.style.display = 'none';
            return;
        }

        if (!isShowingErrors && !isShowingDiagnosis) { // Estado inicial: não mostrando erros nem diagnóstico
            if (wrongQuestionIndices.length > 0) {
                isShowingErrors = true; // Entra no modo de navegação de erros
                currentWrongQuestionIndex = 0; // Começa pelo primeiro erro
                arrowIcon.textContent = '⬇️'; // Seta para baixo para indicar "próximo"
                buttonText.textContent = `Próximo Erro (${currentWrongQuestionIndex + 1}/${wrongQuestionIndices.length})`;
                scrollToQuestion(wrongQuestionIndices[currentWrongQuestionIndex]); // Rola para o primeiro erro
            } else { // Se de alguma forma não há erros (botão não deveria estar visível)
                // Transita para o diagnóstico direto
                isShowingDiagnosis = true;
                arrowIcon.textContent = '⬆️'; // Seta para cima para o diagnóstico
                buttonText.textContent = 'Diagnóstico de Erros';

                topicsToReviewList.innerHTML = '';
                for (const topic in errorCountByTopic) {
                    const errorsInTopic = errorCountByTopic[topic];
                    const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;

                    if (totalAnsweredInTopic > 0) {
                        const percentage = ((errorsInTopic / totalAnsweredInTopic) * 100).toFixed(1);
                        const li = document.createElement('li');
                        li.textContent = `${topic}: ${percentage}% de erros (${errorsInTopic} de ${totalAnsweredInTopic} questões respondidas)`;
                        topicsToReviewList.appendChild(li);
                    }
                }
                errorDiagnosisSection.style.display = 'block';
                scrollToDiagnosis();
                errorNavBtn.style.display = 'none'; // Esconde o botão após ir para o diagnóstico final
            }

        } else if (isShowingErrors) { // Está no modo de navegação de erros
            currentWrongQuestionIndex++; // Vai para o próximo erro
            if (currentWrongQuestionIndex < wrongQuestionIndices.length) {
                scrollToQuestion(wrongQuestionIndices[currentWrongQuestionIndex]); // Rola para o próximo erro
                buttonText.textContent = `Próximo Erro (${currentWrongQuestionIndex + 1}/${wrongQuestionIndices.length})`;
            } else { // Todos os erros foram revisados
                isShowingErrors = false; // Sai do modo de navegação de erros
                isShowingDiagnosis = true; // Entra no modo de diagnóstico
                arrowIcon.textContent = '⬆️'; // Seta para cima para o diagnóstico
                buttonText.textContent = 'Diagnóstico de Erros';

                topicsToReviewList.innerHTML = '';
                for (const topic in errorCountByTopic) {
                    const errorsInTopic = errorCountByTopic[topic];
                    const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;

                    if (totalAnsweredInTopic > 0) {
                        const percentage = ((errorsInTopic / totalAnsweredInTopic) * 100).toFixed(1);
                        const li = document.createElement('li');
                        li.textContent = `${topic}: ${percentage}% de erros (${errorsInTopic} de ${totalAnsweredInTopic} questões respondidas)`;
                        topicsToReviewList.appendChild(li);
                    }
                }
                errorDiagnosisSection.style.display = 'block';
                scrollToDiagnosis();
                errorNavBtn.style.display = 'none'; // Esconde o botão após ir para o diagnóstico final
            }
        }
        // Se isShowingDiagnosis for true, não faz nada ao clicar no botão. Ele já deve ter desaparecido.
      });

      submitButton.addEventListener("click", showResults);

      buildQuiz();
    </script>
  </body>
</html>
