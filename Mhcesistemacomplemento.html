<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>MHC e Sistema Complemento</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      background-color: #f4f4f4;
    }

    .quiz-container {
      max-width: 800px;
      width: 100%;
    }

    h1 {
      color: #333;
      text-align: center;
      margin-bottom: 30px;
    }

    .card {
      background-color: white;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .question {
      font-weight: bold;
      margin-bottom: 10px;
      color: #333;
    }

    .options {
      margin-top: 15px;
    }

    /* Estilos unificados para todas as opções (estáticas e dinâmicas) */
    .option, label.option, label, #newQuestionsContent label {
      display: flex; /* Para alinhar imagem e texto */
      align-items: center;
      margin-bottom: 10px;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.2s ease;
      position: relative; /* Para posicionar a tesoura */
    }

    /* FORÇA a remoção de inputs de radio em QUALQUER lugar */
    .option input[type="radio"], 
    label input[type="radio"],
    #newQuestionsContent input[type="radio"],
    #newQuestionsContent label input[type="radio"] {
        display: none !important;
        visibility: hidden !important;
        opacity: 0 !important;
        position: absolute !important;
        left: -9999px !important;
    }

    .option:hover, 
    label.option:hover, 
    label:hover,
    #newQuestionsContent label:hover {
      background-color: #e9e9e9;
    }

    .option.selected, 
    label.option.selected, 
    label.selected,
    #newQuestionsContent label.selected {
      background-color: #d1e7dd;
      border-color: #28a745;
    }

    .option.correct, 
    label.option.correct, 
    label.correct,
    #newQuestionsContent label.correct {
      background-color: #d4edda;
      border-color: #28a745;
    }

    .option.incorrect, 
    label.option.incorrect, 
    label.incorrect,
    #newQuestionsContent label.incorrect {
      background-color: #f8d7da;
      border-color: #dc3545;
    }

    .submit-btn {
      display: block;
      width: 100%;
      padding: 15px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      margin-top: 30px;
    }

    .submit-btn:hover {
      background-color: #0056b3;
    }

    .results {
      text-align: center;
      margin-top: 30px;
      font-size: 20px;
      font-weight: bold;
      color: #333;
    }

    .scissor-icon {
      margin-right: 10px; /* Espaço entre a tesoura e o texto da opção */
      width: 20px; /* Ajuste conforme o tamanho da sua imagem */
      height: 20px; /* Ajuste conforme o tamanho da sua imagem */
      opacity: 0.5; /* Transparência como no original */
      cursor: pointer;
    }

    .scissor-icon.hidden {
      display: none;
    }

    .struck-through {
      text-decoration: line-through;
      color: #888;
    }

    .comment {
      margin-top: 10px;
      padding: 10px;
      background-color: #f0f0f0;
      border-left: 4px solid #007bff;
      font-style: italic;
      color: #555;
      display: none; /* Escondido por padrão */
    }
    .comment.show {
      display: block; /* Mostrado quando ativado */
    }

    /* Estilos para o botão de navegação de erro / diagnóstico */
    .error-nav-btn {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background-color: #dc3545; /* Vermelho para erro */
      color: white;
      border: none;
      border-radius: 50%; /* Torna o botão redondo */
      width: 60px;
      height: 60px;
      font-size: 24px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      display: none; /* Escondido por padrão */
      flex-direction: column; /* Para empilhar o ícone e o contador */
      padding: 5px; /* Ajuste o padding para acomodar texto maior */
      box-sizing: border-box; /* Garante que padding não aumente o tamanho total */
      text-align: center;
    }

    .error-nav-btn:hover {
      background-color: #c82333;
    }

    .error-nav-btn .arrow-icon {
      font-size: 30px; /* Tamanho da seta */
      line-height: 1; /* Ajuste para centralizar */
    }

    .error-nav-btn .button-text {
      font-size: 12px; /* Tamanho do texto abaixo da seta */
      line-height: 1;
      margin-top: 2px; /* Espaço entre a seta e o texto */
    }

    /* Estilos para a seção de diagnóstico de erros */
    .error-diagnosis-section {
        margin-top: 50px;
        padding: 30px;
        background-color: #ffe0b2; /* Um laranja claro ou similar */
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.15);
        display: none; /* Escondido por padrão */
        text-align: center;
        font-size: 1.1em;
        color: #333;
    }

    .error-diagnosis-section h2 {
        color: #e65100; /* Laranja mais escuro */
        margin-bottom: 20px;
        font-size: 1.8em;
    }

    .error-diagnosis-section ul {
        list-style: none; /* Remove marcadores de lista */
        padding: 0;
        margin: 0;
    }

    .error-diagnosis-section li {
        background-color: #ff9800; /* Laranja */
        color: white;
        padding: 8px 15px;
        margin: 8px 0;
        border-radius: 5px;
        display: inline-block; /* Para que os itens fiquem lado a lado */
        margin-right: 10px;
        font-weight: bold;
    }
    .error-diagnosis-section li:last-child {
        margin-right: 0;
    }
 .card-bloco {
      border: 1px solid #ddd;
      border-radius: 6px;
      padding: 10px;
      background: #fff;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <h1 style="text-align:center; margin-bottom: 30px;">MHC e Sistema Complemento</h1>
    <div class="card-bloco" id="quiz"></div>
    <button class="submit-btn" id="verifyAnswersBtn">Verificar Respostas</button>

    <button class="generate-questions-btn submit-btn" id="generateNewQuestionsBtn" style="display:none;">
      Gerar Novas Perguntas
    </button>

    <div class="results card-bloco" id="results"></div>
    <div id="statusMessage" style="text-align: center; margin-top: 10px; font-weight: bold; color: #007bff;"></div>

    <div class="error-diagnosis-section card-bloco" id="errorDiagnosis">
      <h2>Diagnóstico de Erros</h2>
      <p>Parece que você precisa revisar os seguintes assuntos:</p>
      <ul id="topicsToReview"></ul>
    </div>

    <div class="generated-questions-section card-bloco" id="generatedQuestionsSection" style="display:none;">
      <h2>Novas Perguntas Geradas</h2>
      <div id="newQuestionsContent"></div>
    </div>
  </div>
  
  <button class="error-nav-btn" id="errorNavBtn" style="display:none;">
    <span class="arrow-icon"></span>
    <span class="button-text"></span>
  </button>

  <script>
    const quizContainer = document.getElementById("quiz");
    const resultsContainer = document.getElementById("results");
    const errorNavBtn = document.getElementById("errorNavBtn");
    const arrowIcon = errorNavBtn.querySelector(".arrow-icon");
    const buttonText = errorNavBtn.querySelector(".button-text");
    const errorDiagnosisSection = document.getElementById("errorDiagnosis");
    const topicsToReviewList = document.getElementById("topicsToReview");
    const generateNewQuestionsBtn = document.getElementById("generateNewQuestionsBtn");
    const generatedQuestionsSection = document.getElementById("generatedQuestionsSection");
    const newQuestionsContent = document.getElementById("newQuestionsContent");
    const statusMessage = document.getElementById("statusMessage");

    let wrongQuestionIndices = [];
    let errorCountByTopic = {};
    let totalAnsweredQuestionsByTopic = {};
    let currentWrongQuestionIndex = -1;
    let hasErrors = false;
    let isShowingErrors = false;
    let isShowingDiagnosis = false;

    // Inicializa a visibilidade das seções no carregamento
    errorDiagnosisSection.style.display = 'none';
    topicsToReviewList.innerHTML = '';
    statusMessage.textContent = '';

    const questions = [       {         question: "1. O Complexo Principal de Histocompatibilidade (MHC), do inglês Major Histocompatibility Complex, foi o foco principal da aula e é corretamente definido como:",         options: [           "A. Uma molécula exclusiva de linfócitos T auxiliares.",           "B. Uma proteína solúvel que circula no plasma sanguíneo e atua na inflamação.",           "C. Um complexo de proteínas encontrado na superfície das células, essencial para o sistema imune identificar o 'próprio' e o 'não-próprio'.",           "D. Uma estrutura responsável apenas por sinalizar a degradação de proteínas virais por ubiquitinação.",         ],         correctAnswer: "C. Um complexo de proteínas encontrado na superfície das células, essencial para o sistema imune identificar o 'próprio' e o 'não-próprio'.",         comment: "A alternativa C está correta, pois o MHC é um complexo de proteínas de superfície celular cuja função primordial é apresentar antígenos para identificação pelo sistema imune, distinguindo o próprio do não-próprio.",         topic: "Definição e Conceito do MHC/HLA",       },       {         question: "2. Em seres humanos, o Complexo Principal de Histocompatibilidade (MHC) é mais conhecido por qual denominação e por qual motivo histórico?",         options: [           "A. Complexo CD4, por ser crucial na ativação de linfócitos T CD4+.",           "B. Antígeno Leucocitário Humano (HLA), devido à sua descoberta inicial em leucócitos.",           "C. Proteassoma, devido ao seu papel na degradação de proteínas endógenas.",           "D. TAP, por ser um transportador de peptídeos do citosol para o Retículo Endoplasmático.",         ],         correctAnswer: "B. Antígeno Leucocitário Humano (HLA), devido à sua descoberta inicial em leucócitos.",         comment: "O MHC é denominado Antígeno Leucocitário Humano (HLA) em humanos. Essa nomenclatura se deve ao fato de que as moléculas foram inicialmente descobertas em leucócitos (glóbulos brancos).",         topic: "Nomenclatura (HLA) e Localização do Gene",       },       {         question: "3. O MHC/HLA é codificado por genes localizados em qual estrutura celular?",         options: [           "A. No citosol, onde ocorre a ubiquitinação.",           "B. No Complexo de Golgi, responsável pelo transporte final da molécula.",           "C. No cromossomo 6.",           "D. Na membrana plasmática da célula.",         ],         correctAnswer: "C. No cromossomo 6.",         comment: "Os genes responsáveis por codificar o Complexo Principal de Histocompatibilidade (MHC) estão localizados especificamente no cromossomo 6.",         topic: "Localização Cromossômica e Genética do MHC",       },       {         question: "4. A Dra. Flávia ressalta que os genes do MHC são os mais polimórficos do corpo. O que confere essa característica, segundo o resumo?",         options: [           "A. A herança monogenética, garantindo que apenas um alelo seja expresso.",           "B. A homodominância, resultando em moléculas idênticas entre indivíduos.",           "C. A herança de codominância, onde se recebe 50% dos genes de cada pai.",           "D. A replicação viral, que constantemente insere novas variantes alélicas.",         ],         correctAnswer: "C. A herança de codominância, onde se recebe 50% dos genes de cada pai.",         comment: "O polimorfismo do MHC deve-se à sua herança de codominância, em que o indivíduo recebe 50% dos genes de cada pai, resultando em uma combinação única e diversa de moléculas de MHC.",         topic: "Polimorfismo e Herança de Codominância",       },       {         question: "5. Qual é a principal implicação da alta variabilidade genética (polimorfismo) do MHC/HLA para a sobrevivência da espécie?",         options: [           "A. Promove a rejeição de enxertos de forma controlada.",           "B. Garante que todas as células T citotóxicas reconheçam o mesmo antígeno.",           "C. Aumenta a predisposição a doenças autoimunes.",           "D. Garante uma vantagem evolutiva, tornando a espécie mais resistente à extinção por um único patógeno.",         ],         correctAnswer: "D. Garante uma vantagem evolutiva, tornando a espécie mais resistente à extinção por um único patógeno.",         comment: "A diversidade genética do MHC é uma vantagem evolutiva, pois assegura que a população humana não seja extinta por um único patógeno, já que nem todos os indivíduos teriam o mesmo MHC para o patógeno reconhecer.",         topic: "Vantagem Evolutiva do Polimorfismo",       },       {         question: "6. A função biológica primordial das moléculas do MHC é:",         options: [           "A. Produzir citocinas inflamatórias para atrair macrófagos.",           "B. Apresentar peptídeos (epítopos) de antígenos para o reconhecimento pelos linfócitos T.",           "C. Atuar como um receptor transmembrana para a entrada de vírus.",           "D. Degradar proteínas virais em fragmentos peptídicos no citosol.",         ],         correctAnswer: "B. Apresentar peptídeos (epítopos) de antígenos para o reconhecimento pelos linfócitos T.",         comment: "A principal função do MHC é atuar como uma 'placa de aviso' para o sistema imune, apresentando fragmentos de antígenos (peptídeos ou epítopos) na superfície celular para que os linfócitos T os reconheçam.",         topic: "Função Primária do MHC: Apresentação de Antígenos",       },       {         question: "7. O MHC de Classe I é encontrado em:",         options: [           "A. Apenas em Células Apresentadoras de Antígeno (APCs).",           "B. Quase todas as células nucleadas do corpo.",           "C. Apenas em linfócitos B e macrófagos.",           "D. Somente em células que já estão infectadas por vírus.",         ],         correctAnswer: "B. Quase todas as células nucleadas do corpo.",         comment: "O MHC de Classe I está presente em praticamente todas as células nucleadas do organismo.",         topic: "Distribuição Celular do MHC I",       },       {         question: "8. O MHC de Classe II é encontrado em:",         options: [           "A. Células que já estão infectadas por vírus.",           "B. Quase todas as células nucleadas do corpo.",           "C. Células Apresentadoras de Antígeno (APCs), como macrófagos, células dendríticas e linfócitos B.",           "D. Apenas em linfócitos T CD8+ citotóxicos.",         ],         correctAnswer: "C. Células Apresentadoras de Antígeno (APCs), como macrófagos, células dendríticas e linfócitos B.",         comment: "O MHC de Classe II é expresso somente em Células Apresentadoras de Antígeno (APCs), como macrófagos, células dendríticas e linfócitos B.",         topic: "Distribuição Celular do MHC II",       },       {         question: "9. Qual tipo de linfócito T é ativado pela apresentação de antígenos via MHC de Classe I?",         options: [           "A. Linfócito T auxiliar (CD4+).",           "B. Linfócito B de memória.",           "C. Linfócito T citotóxico (CD8+).",           "D. Células Natural Killer (NK).",         ],         correctAnswer: "C. Linfócito T citotóxico (CD8+).",         comment: "O MHC de Classe I apresenta antígenos especificamente aos linfócitos T citotóxicos (CD8+), cuja função é destruir a célula alvo.",         topic: "Linfócito T Associado ao MHC I",       },       {         question: "10. Qual tipo de linfócito T é ativado pela apresentação de antígenos via MHC de Classe II?",         options: [           "A. Linfócito T auxiliar (CD4+).",           "B. Linfócito T citotóxico (CD8+).",           "C. Células Natural Killer (NK).",           "D. Plasmócitos.",         ],         correctAnswer: "A. Linfócito T auxiliar (CD4+).",         comment: "O MHC de Classe II apresenta antígenos aos linfócitos T auxiliares (CD4+). O CD4+ coordena a resposta imune e ajuda a ativar outras células, como linfócitos B e macrófagos.",         topic: "Linfócito T Associado ao MHC II",       },       {         question: "11. Qual é a principal função do linfócito T citotóxico (CD8+) após ser ativado pelo MHC de Classe I?",         options: [           "A. Produzir anticorpos.",           "B. Coordenar a resposta imune ativando linfócitos B.",           "C. Destruir a célula alvo, que está danificada, infectada por vírus ou cancerígena.",           "D. Apresentar antígenos exógenos a outras células.",         ],         correctAnswer: "C. Destruir a célula alvo, que está danificada, infectada por vírus ou cancerígena.",         comment: "A função do T CD8+ ativado pelo MHC I é induzir a morte da célula alvo, eliminando a célula que apresentou o peptídeo estranho na superfície (por estar infectada ou mutada).",         topic: "Função Efetora do T CD8+",       },       {         question: "12. Qual é o principal papel do linfócito T auxiliar (CD4+) após ser ativado pelo MHC de Classe II?",         options: [           "A. Destruir diretamente a célula alvo por citotoxicidade.",           "B. Degradando peptídeos exógenos em vesículas fagolisossômicas.",           "C. Coordenar a resposta imune, ativando outras células, como linfócitos B para produzir anticorpos.",           "D. Transportar peptídeos do citosol para o Retículo Endoplasmático.",         ],         correctAnswer: "C. Coordenar a resposta imune, ativando outras células, como linfócitos B para produzir anticorpos.",         comment: "O T CD4+ ativado pelo MHC II é um linfócito auxiliar que coordena a resposta imune, ativando outras células, incluindo linfócitos B para a produção de anticorpos.",         topic: "Função Efetora do T CD4+",       },       {         question: "13. O MHC de Classe I (Via Endógena) apresenta peptídeos provenientes de quais tipos de antígenos?",         options: [           "A. Exógenos (capturados do meio extracelular).",           "B. Endógenos (proteínas produzidas dentro da própria célula, como virais ou de células cancerígenas).",           "C. Apenas peptídeos ligados à Cadeia Invariante.",           "D. Peptídeos transportados por vesículas do Complexo de Golgi.",         ],         correctAnswer: "B. Endógenos (proteínas produzidas dentro da própria célula, como virais ou de células cancerígenas).",         comment: "A via do MHC de Classe I é especializada na apresentação de antígenos endógenos, ou seja, peptídeos de proteínas sintetizadas no citosol, como as de vírus ou de células tumorais.",         topic: "Vias de Apresentação: MHC I (Endógena)",       },       {         question: "14. O MHC de Classe II (Via Exógena) apresenta peptídeos provenientes de quais tipos de antígenos?",         options: [           "A. Endógenos (proteínas produzidas dentro da própria célula, como virais ou de células cancerígenas).",           "B. Exógenos (capturados do meio extracelular, como bactérias ou toxinas).",           "C. Apenas peptídeos cortados pelo proteassoma.",           "D. Peptídeos com 8 a 10 aminoácidos de comprimento.",         ],         correctAnswer: "B. Exógenos (capturados do meio extracelular, como bactérias ou toxinas).",         comment: "A via do MHC de Classe II é ativada por antígenos exógenos (capturados do meio extracelular, como por fagocitose), que são internalizados e processados em vesículas.",         topic: "Vias de Apresentação: MHC II (Exógena)",       },       {         question: "15. Na Via Endógena (MHC I), o que marca uma proteína para que seja degradada e processada?",         options: [           "A. A proteína Cadeia Invariante (Li).",           "B. O Transportador Associado ao Processamento de Antígenos (TAP).",           "C. A adição da proteína ubiquitina (ubiquitinação).",           "D. Enzimas em vesículas fagolisossômicas.",         ],         correctAnswer: "C. A adição da proteína ubiquitina (ubiquitinação).",         comment: "Na via endógena, a proteína a ser degradada é marcada pela adição da proteína ubiquitina (ubiquitinação), que a direciona ao proteassoma para clivagem em peptídeos.",         topic: "Processamento de Antígenos MHC I: Ubiquitinação",       },       {         question: "16. Onde ocorre a degradação da proteína marcada por ubiquitina na Via Endógena (MHC I)?",         options: [           "A. No Complexo de Golgi.",           "B. No retículo endoplasmático (RE).",           "C. No proteassoma.",           "D. Na superfície da célula.",         ],         correctAnswer: "C. No proteassoma.",         comment: "A degradação da proteína marcada por ubiquitina ocorre no citosol, dentro de uma estrutura multiproteica chamada proteassoma.",         topic: "Processamento de Antígenos MHC I: Proteassoma",       },       {         question: "17. Qual é a função da molécula TAP (Transportador Associado ao Processamento de Antígenos) na Via Endógena (MHC I)?",         options: [           "A. Degradar as proteínas em peptídeos.",           "B. Ligar-se ao MHC I para impedir a ligação de peptídeos.",           "C. Transportar os peptídeos gerados no citosol para o retículo endoplasmático (RE).",           "D. Transportar o complexo MHC I-peptídeo do RE para o Complexo de Golgi.",         ],         correctAnswer: "C. Transportar os peptídeos gerados no citosol para o retículo endoplasmático (RE).",         comment: "O TAP é um transportador que tem a função de levar os peptídeos, gerados pela degradação da proteína no citosol, para dentro do retículo endoplasmático (RE).",         topic: "Processamento de Antígenos MHC I: TAP",       },       {         question: "18. Qual é a função da Cadeia Invariante (Li) na Via Exógena (MHC II)?",         options: [           "A. Marcar o MHC II para a degradação no proteassoma.",           "B. Transportar o antígeno exógeno do meio extracelular para dentro da APC.",           "C. Ligar-se à fenda de ligação do peptídeo do MHC II recém-sintetizado no RE, impedindo que peptídeos endógenos se liguem antes do processamento.",           "D. Degradar a Cadeia Invariante em fragmentos de peptídeos.",         ],         correctAnswer: "C. Ligar-se à fenda de ligação do peptídeo do MHC II recém-sintetizado no RE, impedindo que peptídeos endógenos se liguem antes do processamento.",         comment: "A Cadeia Invariante (Li) liga-se ao MHC II no RE e bloqueia sua fenda de ligação, impedindo que os peptídeos endógenos se liguem. Isso garante que o MHC II só se ligue aos peptídeos exógenos após ser transportado para a vesícula fagolisossômica.",         topic: "Processamento de Antígenos MHC II: Cadeia Invariante",       },       {         question: "19. Onde o complexo MHC I-peptídeo e o complexo MHC II-peptídeo são formados e modificados antes de serem expostos na superfície celular?",         options: [           "A. No citosol.",           "B. No proteassoma.",           "C. No retículo endoplasmático (RE) e no Complexo de Golgi.",           "D. Na membrana plasmática.",         ],         correctAnswer: "C. No retículo endoplasmático (RE) e no Complexo de Golgi.",         comment: "As cadeias polipeptídicas de MHC I e MHC II são sintetizadas no retículo endoplasmático (RE) e passam pelo Complexo de Golgi para serem modificadas e transportadas à superfície celular. A ligação do peptídeo ao MHC I ocorre no RE, e a ligação do peptídeo ao MHC II ocorre em uma vesícula (MIIC) após o Golgi.",         topic: "Síntese e Transporte do MHC",       },       {         question: "20. O MHC de Classe III é distinto das classes I e II por:",         options: [           "A. Estar envolvido na rejeição de transplantes.",           "B. Ser codificado por genes não localizados no cromossomo 6.",           "C. Não estar diretamente envolvido na apresentação de antígenos ou na rejeição de transplantes, sendo uma proteína solúvel no soro.",           "D. Ser encontrado em todas as células nucleadas do corpo.",         ],         correctAnswer: "C. Não estar diretamente envolvido na apresentação de antígenos ou na rejeição de transplantes, sendo uma proteína solúvel no soro.",         topic: "MHC Classe III e sua Função",       },       {         question: "21. O que é a rejeição hiperaguda de transplante e quando ela ocorre?",         options: [           "A. É um processo lento que destrói o órgão ao longo do tempo.",           "B. Ocorre em semanas a meses e é mediada por linfócitos T do receptor.",           "C. Ocorre em minutos a horas após o transplante, causada por anticorpos pré-existentes no receptor.",           "D. Ocorre apenas em transplantes de medula óssea, onde as células do doador atacam o receptor.",         ],         correctAnswer: "C. Ocorre em minutos a horas após o transplante, causada por anticorpos pré-existentes no receptor.",         comment: "A rejeição hiperaguda é a mais rápida (minutos a horas) e é causada pela reação imediata de anticorpos já presentes no receptor contra os antígenos do doador.",         topic: "Tipos de Rejeição: Hiperaguda",       },       {         question: "22. A rejeição aguda de transplante desenvolve-se em semanas a meses após o transplante e envolve o ataque de qual tipo de célula imune do receptor?",         options: [           "A. Linfócitos B.",           "B. Células T do receptor.",           "C. Macrófagos não ativados.",           "D. Células NK do doador.",         ],         correctAnswer: "B. Células T do receptor.",         comment: "A rejeição aguda é uma reação de hipersensibilidade mediada por células, desenvolvendo-se semanas a meses após a cirurgia, e é desencadeada pela ação dos linfócitos T do receptor.",         topic: "Tipos de Rejeição: Aguda",       },       {         question: "23. A Doença do Enxerto Contra o Hospedeiro (DECH) ocorre principalmente em transplantes de qual órgão/tecido?",         options: [           "A. Transplante renal.",           "B. Transplante de medula óssea.",           "C. Transplante hepático (fígado).",           "D. Transfusão sanguínea.",         ],         correctAnswer: "B. Transplante de medula óssea.",         comment: "A DECH ocorre, principalmente, em transplantes de medula óssea, quando as células imunes do doador (presentes na medula) atacam os tecidos do receptor.",         topic: "Doença do Enxerto Contra o Hospedeiro (DECH)",       },       {         question: "24. Qual molécula co-receptora nos linfócitos T auxiliares (CD4+) interage com o MHC de Classe II?",         options: [           "A. TCR (Receptor de Célula T).",           "B. CD8.",           "C. Cadeia Invariante (Li).",           "D. CD4.",         ],         correctAnswer: "D. CD4.",         comment: "A apresentação de antígenos via MHC de Classe II se dá pela interação com a molécula co-receptora CD4, presente nos linfócitos T auxiliares (CD4+).",         topic: "Co-Receptores do Linfócito T: CD4",       },       {         question: "25. Qual molécula co-receptora nos linfócitos T citotóxicos (CD8+) interage com o MHC de Classe I?",         options: [           "A. CD8.",           "B. CD4.",           "C. Cadeia Invariante (Li).",           "D. TCR (Receptor de Célula T).",         ],         correctAnswer: "A. CD8.",         comment: "A apresentação de antígenos via MHC de Classe I se dá pela interação com a molécula co-receptora CD8, presente nos linfócitos T citotóxicos (CD8+).",         topic: "Co-Receptores do Linfócito T: CD8",       },       {         question: "26. O que é o MHC de Classe I em termos estruturais?",         options: [           "A. Um homodímero de cadeias $\beta$.",           "B. Um heterodímero composto por uma cadeia $\alpha$ longa e uma cadeia $\beta$ ( $\beta 2$-microglobulina) curta.",           "C. Um heterodímero composto por duas cadeias $\alpha$ e duas cadeias $\beta$.",           "D. Uma cadeia polipeptídica simples.",         ],         correctAnswer: "B. Um heterodímero composto por uma cadeia $\alpha$ longa e uma cadeia $\beta$ ( $\beta 2$-microglobulina) curta.",         comment: "O MHC I possui uma estrutura heterodimérica, composta por uma cadeia alfa ($\alpha$) longa e polimórfica, e uma cadeia beta ($\beta$) mais curta, que é a $\beta 2$-microglobulina.",         topic: "Estrutura do MHC I",       },       {         question: "27. O que é o MHC de Classe II em termos estruturais?",         options: [           "A. Um heterodímero composto por uma cadeia $\alpha$ longa e uma cadeia $\beta$ ( $\beta 2$-microglobulina) curta.",           "B. Uma cadeia polipeptídica simples.",           "C. Um heterodímero composto por duas cadeias $\alpha$ e duas cadeias $\beta$.",           "D. Um homodímero de cadeias $\alpha$.",         ],         correctAnswer: "C. Um heterodímero composto por duas cadeias $\alpha$ e duas cadeias $\beta$.",         comment: "O MHC II possui uma estrutura heterodimérica composta por duas cadeias polipeptídicas de tamanho semelhante, uma alfa e uma beta (duas alfas e duas betas no total).",         topic: "Estrutura do MHC II",       },       {         question: "28. A rejeição de transplantes é desencadeada pelo reconhecimento de quais moléculas do doador pelo sistema imune do receptor?",         options: [           "A. Apenas pelo tipo sanguíneo.",           "B. As moléculas do MHC do doador (alogênicas).",           "C. Somente por anticorpos pré-existentes.",           "D. As proteínas TAP (Transportador Associado ao Processamento de Antígenos).",         ],         correctAnswer: "B. As moléculas do MHC do doador (alogênicas).",         comment: "A rejeição de transplantes é causada pelo reconhecimento das moléculas MHC/HLA do doador (alogênicas) como estranhas, o que desencadeia uma resposta imune.",         topic: "Mecanismo de Rejeição de Transplantes",       },       {         question: "29. A Dra. Flávia afirma que a rejeição crônica é:",         options: [           "A. Uma reação imediata, minutos após o transplante.",           "B. Um processo lento, que destrói o órgão transplantado ao longo do tempo.",           "C. Uma doença autoimune mediada por genes no cromossomo 6.",           "D. Uma doença onde as células imunitárias do doador atacam o receptor.",         ],         correctAnswer: "B. Um processo lento, que destrói o órgão transplantado ao longo do tempo.",         comment: "A rejeição crônica é um processo lento que se manifesta em meses ou anos, resultando na destruição progressiva do órgão transplantado.",         topic: "Tipos de Rejeição: Crônica",       },       {         question: "30. Qual é a única condição de transplante que, idealmente, não requer o uso de imunossupressores, segundo a aula?",         options: [           "A. Transplante entre pais e filhos.",           "B. Transplante entre irmãos com 50% de compatibilidade.",           "C. Transplante com a mesma tipagem sanguínea.",           "D. Transplante entre gêmeos idênticos.",         ],         correctAnswer: "D. Transplante entre gêmeos idênticos.",         comment: "Transplantes entre gêmeos idênticos têm 100% de compatibilidade de MHC, e são a única condição em que o uso de imunossupressores não é estritamente necessário para evitar rejeição.",         topic: "Estratégias de Transplante: Imunossupressão e Gêmeos",       },       {         question: "31. Qual é o objetivo principal dos medicamentos imunossupressores no contexto de transplantes?",         options: [           "A. Aumentar a atividade do sistema imune para combater o vírus.",           "B. Reduzir a atividade do sistema imune para prevenir a rejeição do transplante.",           "C. Aumentar a produção de MHC I em todas as células.",           "D. Realizar a ubiquitinação de proteínas estranhas.",         ],         correctAnswer: "B. Reduzir a atividade do sistema imune para prevenir a rejeição do transplante.",         comment: "Imunossupressores são medicamentos que têm como função reduzir ou modular a atividade do sistema imunológico, prevenindo que este ataque o órgão transplantado e cause rejeição.",         topic: "Imunossupressores: Função e Uso",       },       {         question: "32. O que é o Crossmatch (Prova Cruzada), que é um teste sorológico simples para transplantes?",         options: [           "A. Um exame genético que identifica as variantes do MHC.",           "B. Um teste onde se mistura o soro do receptor com as células do doador para verificar anticorpos pré-existentes que causem aglutinação.",           "C. A degradação da proteína no proteassoma.",           "D. O transporte de peptídeos do citosol para o Retículo Endoplasmático.",         ],         correctAnswer: "B. Um teste onde se mistura o soro do receptor com as células do doador para verificar anticorpos pré-existentes que causem aglutinação.",         comment: "O Crossmatch é um teste simples que busca no soro do receptor anticorpos pré-existentes que possam reagir (causando aglutinação) com as células do doador, indicando risco de rejeição hiperaguda.",         topic: "Testes de Compatibilidade: Crossmatch",       },       {         question: "33. A 'Tipagem do HLA' (HLA Typing) é um exame genético (ex: PCR) cujo objetivo é:",         options: [           "A. Apenas identificar o tipo sanguíneo do doador.",           "B. Medir o nível de imunossupressores no sangue do receptor.",           "C. Identificar as proteínas MHC/HLA da superfície celular para avaliar a compatibilidade entre doador e receptor.",           "D. Marcar proteínas endógenas para degradação.",         ],         correctAnswer: "C. Identificar as proteínas MHC/HLA da superfície celular para avaliar a compatibilidade entre doador e receptor.",         comment: "A tipagem HLA é o exame genético crucial para identificar os alelos MHC/HLA do doador e do receptor, sendo essencial para determinar o grau de compatibilidade e o risco de rejeição.",         topic: "Testes de Compatibilidade: HLA Typing",       },       {         question: "34. O polimorfismo do MHC/HLA é um fator de risco para o desenvolvimento de:",         options: [           "A. Rejeição hiperaguda, em função da alta compatibilidade.",           "B. Doenças autoimunes, como diabetes tipo 1 e esclerose múltipla.",           "C. Doença do Enxerto Contra o Hospedeiro (DECH).",           "D. Rejeição aguda, devido à baixa atividade dos linfócitos T.",         ],         correctAnswer: "B. Doenças autoimunes, como diabetes tipo 1 e esclerose múltipla.",         comment: "Embora a diversidade seja vantajosa evolutivamente, certas combinações de MHC/HLA estão associadas a um maior risco de desenvolvimento de doenças autoimunes, onde o sistema imune ataca os próprios tecidos.",         topic: "MHC e Doenças Autoimunes",       },       {         question: "35. No MHC de Classe I, qual cadeia polipeptídica é considerada a mais polimórfica?",         options: [           "A. Cadeia $\beta 2$-microglobulina.",           "B. Cadeia $\beta$.",           "C. Cadeia $\alpha$.",           "D. Cadeia Invariante.",         ],         correctAnswer: "C. Cadeia $\alpha$.",         comment: "O MHC de Classe I é composto por cadeias $\alpha$ e $\beta$, sendo a cadeia $\alpha$ a mais polimórfica e onde ocorre a essência da diferença entre um ser humano e outro.",         topic: "Estrutura do MHC I: Cadeia Polimórfica",       },       {         question: "36. Qual tipo de MHC é aumentado por citocinas como os interferons ($\alpha$, $\beta$ e $\gamma$) durante uma resposta imune, segundo o resumo?",         options: [           "A. MHC de Classe I.",           "B. MHC de Classe II.",           "C. MHC de Classe III.",           "D. Tanto MHC de Classe I quanto MHC de Classe II.",         ],         correctAnswer: "D. Tanto MHC de Classe I quanto MHC de Classe II.",         comment: "A expressão de MHC de Classe I e de Classe II pode ser aumentada por citocinas como os interferons produzidos durante a resposta imune, potencializando a apresentação de antígenos.",         topic: "Regulação da Expressão do MHC",       },       {         question: "37. Qual fator, se já presente no receptor, pode prejudicar o transplante por indicar a presença de anticorpos que podem atacar o enxerto?",         options: [           "A. Histórico de transfusão sanguínea.",           "B. Histórico de gestação.",           "C. Histórico de transplante prévio.",           "D. Todas as opções anteriores.",         ],         correctAnswer: "D. Todas as opções anteriores.",         comment: "Todas as situações citadas (transfusão, gestação, transplante prévio e infecções virais/reais) podem levar à sensibilização, ou seja, à produção de anticorpos que podem prejudicar o transplante subsequente.",         topic: "Sensibilização e Risco de Rejeição",       },       {         question: "38. Onde o peptídeo liga-se ao MHC de Classe I recém-sintetizado?",         options: [           "A. Na membrana plasmática.",           "B. No Complexo de Golgi.",           "C. No retículo endoplasmático (RE).",           "D. No proteassoma.",         ],         correctAnswer: "C. No retículo endoplasmático (RE).",         comment: "O MHC de Classe I, após ser sintetizado no retículo endoplasmático (RE) e ligado ao transportador TAP, liga-se ao peptídeo endógeno também dentro do RE, formando o complexo MHC I-peptídeo.",         topic: "Montagem do Complexo MHC I-Peptídeo",       },       {         question: "39. Na Via Exógena (MHC II), onde ocorre a degradação do antígeno fagocitado em peptídeos?",         options: [           "A. No citosol, pelo proteassoma.",           "B. Em vesículas fagolisossômicas, por enzimas.",           "C. No Complexo de Golgi.",           "D. Na superfície da APC.",         ],         correctAnswer: "B. Em vesículas fagolisossômicas, por enzimas.",         comment: "O antígeno exógeno fagocitado é degradado em peptídeos pelas enzimas presentes no compartimento endossômico/fagolisossômico.",         topic: "Processamento de Antígenos MHC II: Fagolisossomo",       },       {         question: "40. A estrutura do MHC I é um heterodímero. A Cadeia $\beta$ é a $\beta 2$-microglobulina. Qual é o papel da Cadeia $\alpha$ no MHC I?",         options: [           "A. É a cadeia mais polimórfica e contém os domínios de ligação ao peptídeo.",           "B. É menos polimórfica e atua como a Cadeia Invariante.",           "C. É a cadeia mais curta e menos importante para a estabilidade da molécula.",           "D. Não possui domínios extracelulares.",         ],         correctAnswer: "A. É a cadeia mais polimórfica e contém os domínios de ligação ao peptídeo.",         comment: "O MHC de Classe I é composto pela cadeia $\alpha$ longa e polimórfica e pela $\beta 2$-microglobulina curta. A Cadeia $\alpha$ é o principal sítio de polimorfismo e contém os domínios $\alpha 1$ e $\alpha 2$ que formam a fenda de ligação do peptídeo.",         topic: "Estrutura do MHC I: Cadeia Alfa",       }, ];

    function buildQuiz() {
      const output = [];

      questions.forEach((currentQuestion, questionNumber) => {
        const options = [];
        for (let i = 0; i < currentQuestion.options.length; i++) {
          options.push(
            `<label class="option" data-question="${questionNumber}" data-value="${currentQuestion.options[i]}">
              <img src="tesouras.png" class="scissor-icon" onclick="event.stopPropagation(); this.parentNode.classList.toggle('struck-through');">
              ${currentQuestion.options[i]}
            </label>`
          );
        }

        output.push(
          `<div class="card" id="question-${questionNumber}" data-topic="${currentQuestion.topic}">
            <div class="question">${currentQuestion.question}</div>
            <div class="options">${options.join("")}</div>
            <div class="comment" id="comment-${questionNumber}"></div>
          </div>`
        );
      });

      quizContainer.innerHTML = output.join("");
    }

    function showResults() {
      wrongQuestionIndices = [];
      errorCountByTopic = {};
      totalAnsweredQuestionsByTopic = {};
      currentWrongQuestionIndex = -1;
      hasErrors = false;
      isShowingErrors = false;
      isShowingDiagnosis = false;

      errorDiagnosisSection.style.display = 'none';
      topicsToReviewList.innerHTML = '';
      statusMessage.textContent = '';

      // Busca por todas as perguntas: estáticas e dinâmicas
      const allQuestionCards = document.querySelectorAll('.quiz-container .card, #newQuestionsContent .card');
      let correctAnswersCount = 0;
      let totalQuestionsAnswered = 0;

      console.log('🔍 Verificando', allQuestionCards.length, 'perguntas...');

      allQuestionCards.forEach((card, index) => {
        const questionEl = card.querySelector('.question') || card.querySelector('p');
        if (!questionEl) return;

        const questionText = questionEl.textContent.trim();
        const optionsContainer = card.querySelector('.options') || card;
        const allOptions = optionsContainer.querySelectorAll('.option, label.option, label');
        const userAnswerElement = optionsContainer.querySelector('.option.selected, label.selected');
        const commentDiv = card.querySelector('.comment');

        const questionTopic = card.dataset.topic || "Tópico não informado";
        
        console.log(`📝 Pergunta ${index + 1}: Tópico = "${questionTopic}"`);
        console.log(`🔍 Encontradas ${allOptions.length} alternativas`);
        
        // Remove classes anteriores
        allOptions.forEach(option => {
          option.classList.remove('correct', 'incorrect', 'selected');
        });
        if (commentDiv) commentDiv.classList.remove('show');

        let correctAnswerValue = null;
        let questionComment = null;

        // Verifica se é pergunta estática ou dinâmica
        const isStatic = card.id && card.id.startsWith('question-');
        if (isStatic) {
          // Pergunta estática - busca nos dados originais
          const questionData = questions.find(q => q.question.trim() === questionText);
          if (questionData) {
            correctAnswerValue = questionData.correctAnswer.trim();
            questionComment = questionData.comment;
          }
        } else {
          // Pergunta dinâmica - busca pela opção marcada como correta
          const correctOpt = optionsContainer.querySelector('.option[data-answer="true"], label[data-answer="true"]');
          if (correctOpt) {
            correctAnswerValue = correctOpt.dataset.value?.trim() || correctOpt.textContent.trim();
            console.log(`✅ Resposta correta encontrada: "${correctAnswerValue}"`);
          } else {
            console.log('❌ Nenhuma resposta correta encontrada para pergunta dinâmica');
          }
          
          // Busca comentário no próprio card ou no div comment
          const commentElement = card.querySelector('.comment');
          if (commentElement && commentElement.textContent.trim()) {
            questionComment = commentElement.textContent.trim();
          }
        }

        // Processa resposta do usuário e aplica coloração
        let userAnswer = null;
        if (userAnswerElement) {
          userAnswerElement.classList.add('selected');
          userAnswer = userAnswerElement.dataset.value?.trim() || userAnswerElement.textContent.trim();
          totalQuestionsAnswered++;
          totalAnsweredQuestionsByTopic[questionTopic] = (totalAnsweredQuestionsByTopic[questionTopic] || 0) + 1;

          console.log(`👤 Resposta do usuário: "${userAnswer}"`);
          console.log(`🎯 Resposta correta: "${correctAnswerValue}"`);

          // Verifica se a resposta está correta
          if (userAnswer === correctAnswerValue) {
            correctAnswersCount++;
            console.log(`✅ Resposta correta!`);
          } else {
            hasErrors = true;
            errorCountByTopic[questionTopic] = (errorCountByTopic[questionTopic] || 0) + 1;
            console.log(`❌ Resposta incorreta para tópico: ${questionTopic}`);
          }
        }

        // Aplica coloração: SEMPRE marca a correta de verde, e a errada de vermelho se foi marcada
        allOptions.forEach(option => {
          const optionValue = option.dataset.value?.trim() || option.textContent.trim();
          
          // Marca a resposta correta de verde SEMPRE
          if (optionValue === correctAnswerValue) {
            option.classList.add('correct');
            console.log(`🟢 Marcando como correta: "${optionValue}"`);
          }
          
          // Se o usuário marcou uma resposta E ela está errada, marca de vermelho
          if (userAnswer && optionValue === userAnswer && userAnswer !== correctAnswerValue) {
            option.classList.add('incorrect');
            console.log(`🔴 Marcando como incorreta: "${optionValue}"`);
          }
        });

        // Mostra comentário se disponível
        if (commentDiv && questionComment) {
          commentDiv.textContent = questionComment;
          commentDiv.classList.add('show');
        }
      });

      // Exibe resultados
      resultsContainer.textContent = `Você acertou ${correctAnswersCount} de ${totalQuestionsAnswered} questões respondidas.`;

      console.log('📊 Erros por tópico:', errorCountByTopic);
      console.log('📊 Total por tópico:', totalAnsweredQuestionsByTopic);

      // Gera diagnóstico de erros
      if (hasErrors) {
        for (const topic in errorCountByTopic) {
          const errors = errorCountByTopic[topic];
          const total = totalAnsweredQuestionsByTopic[topic] || 0;
          if (total > 0) {
            const percent = ((errors / total) * 100).toFixed(1);
            const li = document.createElement('li');
            li.textContent = `${topic}: ${percent}% de erros (${errors} de ${total} questões respondidas)`;
            topicsToReviewList.appendChild(li);
          }
        }
      } else {
        const li = document.createElement('li');
        li.textContent = "🥳 Parabéns! Você não teve erros nas questões respondidas.";
        topicsToReviewList.appendChild(li);
      }

      errorDiagnosisSection.style.display = 'block';
      generatedQuestionsSection.style.display = 'block';
      generateNewQuestionsBtn.style.display = 'block';
      scrollToDiagnosis();
    }

    function scrollToQuestion(index) {
      const questionCard = document.getElementById(`question-${index}`);
      if (questionCard) {
        questionCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }
    }

    function scrollToDiagnosis() {
        errorDiagnosisSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function scrollToGeneratedQuestions() {
        generatedQuestionsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // Event listener para seleção de opções (funciona para estáticas e dinâmicas)
    document.addEventListener("click", function (event) {
      const clickedElement = event.target;
      const optionElement = clickedElement.closest('.option');

      if (optionElement) {
          if (clickedElement.classList.contains("scissor-icon")) {
              event.stopPropagation();
              optionElement.classList.toggle("struck-through");
          }
          else {
              const parentCard = optionElement.closest('.card');
              const currentQuestionOptions = parentCard.querySelectorAll('.option');

              currentQuestionOptions.forEach(opt => opt.classList.remove("selected"));
              optionElement.classList.add("selected");
          }
      }
    });

    generateNewQuestionsBtn.addEventListener("click", async function() {
        statusMessage.textContent = '⏳ Gerando novas perguntas...';
        generateNewQuestionsBtn.disabled = true;

        const topics = Object.keys(errorCountByTopic).filter(topic => {
            const errorsInTopic = errorCountByTopic[topic] || 0;
            const totalAnsweredInTopic = totalAnsweredQuestionsByTopic[topic] || 0;
            return errorsInTopic > 0 && totalAnsweredInTopic > 0;
        });

        const topicsToSend = topics.length > 0 ? topics : ["fisiologia celular", "biologia"];

        try {
            const response = await fetch('https://www.quizia.xyz/quiz', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ topicos: topicsToSend }),
            });

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            newQuestionsContent.innerHTML = '';
            if (data && data.html) {
                console.log('📥 HTML recebido do Flask:', data.html);
                
                // Insere o HTML diretamente sem reconstrução complexa
                newQuestionsContent.innerHTML = data.html.replace(/```html|```/g, '');
                
                // Adiciona tesouras e ajusta formatação apenas se necessário
                newQuestionsContent.querySelectorAll('.card').forEach((card, cardIndex) => {
                    // Garante que o elemento de pergunta tenha a classe correta
                    const questionElement = card.querySelector('p');
                    if (questionElement && !questionElement.classList.contains('question')) {
                       questionElement.classList.add('question');
                    }

                    // Remove qualquer input de radio que possa existir e adiciona tesouras
                    card.querySelectorAll('label').forEach((label) => {
                        // Remove inputs de radio MAS preserva o atributo data-answer
                        const radioInput = label.querySelector('input[type="radio"]');
                        if (radioInput) {
                            // PRESERVA o atributo data-answer do input no label
                            if (radioInput.hasAttribute('data-answer')) {
                                label.setAttribute('data-answer', radioInput.getAttribute('data-answer'));
                            }
                            radioInput.remove();
                        }
                        
                        // Garante que tenha a classe option
                        if (!label.classList.contains('option')) {
                            label.classList.add('option');
                        }

                        // Garante que tenha data-value
                        if (!label.dataset.value) {
                            label.dataset.value = label.textContent.trim();
                        }

                        // Adiciona tesoura se não existir
                        if (!label.querySelector('.scissor-icon')) {
                            const scissorIcon = document.createElement('img');
                            scissorIcon.src = 'tesouras.png';
                            scissorIcon.className = 'scissor-icon';
                            scissorIcon.onclick = function(e) {
                                e.stopPropagation();
                                label.classList.toggle('struck-through');
                            };
                            label.insertBefore(scissorIcon, label.firstChild);
                        }
                    });

                    console.log(`🏷️ Card ${cardIndex}: data-topic = "${card.dataset.topic}"`);
                    
                    // Verifica se há opção correta marcada
                    const correctOption = card.querySelector('label[data-answer="true"]');
                    if (correctOption) {
                        console.log(`✅ Opção correta encontrada: "${correctOption.dataset.value}"`);
                    } else {
                        console.log('❌ Nenhuma opção correta encontrada');
                    }
                });
            } else {
                newQuestionsContent.innerHTML = "<p>Não foi possível gerar novas perguntas para os tópicos selecionados.</p>";
            }
            
            generatedQuestionsSection.style.display = 'block';
            scrollToGeneratedQuestions();
            statusMessage.textContent = '✅ Perguntas geradas com sucesso!';
            setTimeout(() => { statusMessage.textContent = '' }, 3000);

        } catch (error) {
            console.error('Erro ao gerar novas perguntas:', error);
            newQuestionsContent.innerHTML = `<p>Erro ao carregar novas perguntas: ${error.message}. Por favor, tente novamente.</p>`;
            generatedQuestionsSection.style.display = 'block';
            scrollToGeneratedQuestions();
            statusMessage.textContent = '❌ Erro na requisição: ' + error.message;
            setTimeout(() => { statusMessage.textContent = '' }, 5000);
        } finally {
            generateNewQuestionsBtn.disabled = false;
        }
    });

    // Inicialização
    buildQuiz();
    errorDiagnosisSection.style.display = 'none';
    generatedQuestionsSection.style.display = 'none';
    generateNewQuestionsBtn.style.display = 'none';

    // Event listener para o botão de verificar respostas
    document.getElementById("verifyAnswersBtn").addEventListener("click", showResults);
  </script>
</body>
</html>
